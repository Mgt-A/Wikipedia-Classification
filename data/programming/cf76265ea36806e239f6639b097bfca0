<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15alpha" />
		<meta name="keywords" content="Quaternions and spatial rotation,3-sphere,Axis angle,Celestial sphere,Charts on SO(3),Clifford algebra,Common subexpression elimination,Complex numbers,Computer game,Computer graphics,Conjugation" />
		<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit" />
		<link rel="edit" title="Edit this page" href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit" />
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<link rel="alternate" type="application/rss+xml" title="Wikipedia RSS Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Quaternions and spatial rotation - Wikipedia, the free encyclopedia</title>
		<link rel="stylesheet" href="/skins-1.5/common/shared.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/common/commonPrint.css?207xx" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins-1.5/monobook/main.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/chick/main.css?207xx" type="text/css" media="handheld" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE50Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE55Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins-1.5/monobook/IE60Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins-1.5/monobook/IE70Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Handheld.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="handheld" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=2678400&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js?207xx"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins-1.5";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://en.wikipedia.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Quaternions_and_spatial_rotation";
		var wgTitle = "Quaternions and spatial rotation";
		var wgAction = "view";
		var wgArticleId = "186057";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 284284432;
		var wgVersion = "1.15alpha";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgMWSuggestTemplate = "http://en.wikipedia.org/w/api.php?action=opensearch\x26search={searchTerms}\x26namespace={namespaces}\x26suggest";
		var wgDBname = "enwiki";
		var wgSearchNamespaces = [0];
		var wgMWSuggestMessages = ["with suggestions", "no suggestions"];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?207xx"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js?207xx"></script>
		<script type="text/javascript" src="/skins-1.5/common/mwsuggest.js?207xx"></script>
<script type="text/javascript">/*<![CDATA[*/
var wgNotice='';var wgNoticeLocal='';
/*]]>*/</script>		<script type="text/javascript" src="http://upload.wikimedia.org/centralnotice/wikipedia/en/centralnotice.js?207xx"></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Quaternions_and_spatial_rotation skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><script type='text/javascript'>if (wgNotice != '') document.writeln(wgNotice);</script></div>		<h1 id="firstHeading" class="firstHeading">Quaternions and spatial rotation</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><a href="/wiki/Quaternion" title="Quaternion">Unit quaternions</a> provide a convenient mathematical notation for representing <a href="/wiki/Orientation" title="Orientation">orientations</a> and <a href="/wiki/Rotation" title="Rotation">rotations</a> of objects in three dimensions. Compared to <a href="/wiki/Euler_angles" title="Euler angles">Euler angles</a> they are simpler to <a href="/wiki/Function_composition" title="Function composition">compose</a> and avoid the problem of <a href="/wiki/Gimbal_lock" title="Gimbal lock">gimbal lock</a>. Compared to rotation <a href="/wiki/Matrix_(mathematics)" title="Matrix (mathematics)">matrices</a> they are more <a href="/wiki/Numerically_stable" title="Numerically stable" class="mw-redirect">numerically stable</a> and may be more efficient. Quaternions have found their way into applications in <a href="/wiki/Computer_graphics" title="Computer graphics">computer graphics</a>, <a href="/wiki/Robotics" title="Robotics">robotics</a>, <a href="/wiki/Navigation" title="Navigation">navigation</a>, <a href="/wiki/Molecular_dynamics" title="Molecular dynamics">molecular dynamics</a> and <a href="/wiki/Orbital_mechanics" title="Orbital mechanics">orbital mechanics</a> of <a href="/wiki/Satellites" title="Satellites" class="mw-redirect">satellites</a>.<sup id="cite_ref-0" class="reference"><a href="#cite_note-0" title=""><span>[</span>1<span>]</span></a></sup></p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Quaternion_rotation_operations"><span class="tocnumber">1</span> <span class="toctext">Quaternion rotation operations</span></a>
<ul>
<li class="toclevel-2"><a href="#Visualizing_the_space_of_rotations"><span class="tocnumber">1.1</span> <span class="toctext">Visualizing the space of rotations</span></a></li>
<li class="toclevel-2"><a href="#Parameterizing_the_space_of_rotations"><span class="tocnumber">1.2</span> <span class="toctext">Parameterizing the space of rotations</span></a></li>
<li class="toclevel-2"><a href="#Quaternions_briefly"><span class="tocnumber">1.3</span> <span class="toctext">Quaternions briefly</span></a></li>
<li class="toclevel-2"><a href="#Parameterizing_the_space_of_rotations_with_quaternions"><span class="tocnumber">1.4</span> <span class="toctext">Parameterizing the space of rotations with quaternions</span></a></li>
<li class="toclevel-2"><a href="#Proof_of_the_quaternion_rotation_identity"><span class="tocnumber">1.5</span> <span class="toctext">Proof of the quaternion rotation identity</span></a></li>
<li class="toclevel-2"><a href="#Example"><span class="tocnumber">1.6</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Quaternion_non-commutativity_and_rotations"><span class="tocnumber">2</span> <span class="toctext">Quaternion non-commutativity and rotations</span></a></li>
<li class="toclevel-1"><a href="#Quaternions_versus_other_representations_of_rotations"><span class="tocnumber">3</span> <span class="toctext">Quaternions versus other representations of rotations</span></a>
<ul>
<li class="toclevel-2"><a href="#Performance_comparisons_with_other_rotation_methods"><span class="tocnumber">3.1</span> <span class="toctext">Performance comparisons with other rotation methods</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Pairs_of_unit_quaternions_as_rotations_in_4D_space"><span class="tocnumber">4</span> <span class="toctext">Pairs of unit quaternions as rotations in 4D space</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">6</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#External_links_and_resources"><span class="tocnumber">7</span> <span class="toctext">External links and resources</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Quaternion_rotation_operations" id="Quaternion_rotation_operations"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=1" title="Edit section: Quaternion rotation operations">edit</a>]</span> <span class="mw-headline">Quaternion rotation operations</span></h2>
<p>A very strict explanation of the properties used in this section is given by Altmann.<sup id="cite_ref-1" class="reference"><a href="#cite_note-1" title=""><span>[</span>2<span>]</span></a></sup></p>
<p><a name="Visualizing_the_space_of_rotations" id="Visualizing_the_space_of_rotations"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=2" title="Edit section: Visualizing the space of rotations">edit</a>]</span> <span class="mw-headline">Visualizing the space of rotations</span></h3>
<p>Unit quaternions represent the <a href="/wiki/Mathematical_space" title="Mathematical space" class="mw-redirect">mathematical space</a> of rotations in three dimensions in a very straightforward way. The correspondence between rotations and quaternions can be understood by first visualizing the space of rotations itself.</p>
<p>Any rotation in three dimensions is a rotation by some angle about some axis. When the angle is zero the axis does not matter, so rotation by zero degrees is a single point in the space of rotations (the identity rotation). For a tiny but nonzero angle, the set of possible rotations is like a small sphere surrounding the identity rotation, where each point on the sphere represents an axis pointing in a particular direction (compare the <a href="/wiki/Celestial_sphere" title="Celestial sphere">celestial sphere</a>). Rotations through increasingly large angles are increasingly far from the identity rotation, and we can think of them as concentric spheres of increasing radius. Thus, near the identity rotation, the abstract space of rotations looks similar to ordinary three-dimensional space (which can also be seen as a central point surrounded by concentric spheres of every radius). However, as the rotation angle increases past 180°, rotations about different axes stop diverging and become more similar to each other, becoming identical (and equal to the identity rotation) when the angle reaches 360°.</p>
<p>We can see similar behavior on the surface of a <a href="/wiki/Sphere" title="Sphere">sphere</a>. If we start at the north pole and draw straight lines (that is, lines of <a href="/wiki/Longitude" title="Longitude">longitude</a>) in many directions, they will diverge but eventually converge again at the south pole. Concentric circles of increasing radius drawn around the north pole (lines of <a href="/wiki/Latitude" title="Latitude">latitude</a>) will eventually collapse to a point at the south pole once the radius reaches the distance between the poles. If we think of different directions from the pole (that is, different longitudes) as different rotation <i>axes</i>, and different distances from the pole (that is, different latitudes) as different rotation <i>angles</i>, we have an analogy to the space of rotations. Since the sphere's surface is two dimensional while the space of rotations is three dimensional, we must actually model the space of rotations as a <a href="/wiki/Hypersphere" title="Hypersphere" class="mw-redirect">hypersphere</a>; however, we can think of the ordinary sphere as a slice through the full hypersphere (just as a circle is a slice through a sphere). We can take the slice to represent, for example, just the rotations about axes in the <i>xy</i> plane. Note that the angle of rotation is <i>twice</i> the latitude difference from the north pole: points on the equator represent rotations of 180°, not 90°, and the south pole represents a rotation of 360°, not 180°.</p>
<p>The north pole and the south pole represent the same rotation, and in fact this is true of any two antipodal points: if one is a rotation by <i>α</i> around the axis <b>v</b>, the other is a rotation by 360° − <i>α</i> around the axis −<b>v</b>. In fact, then, the space of rotations is not the (hyper)sphere itself but the (hyper)sphere with antipodal points identified. But for many purposes we can think of rotations as points on the sphere, even though they are twofold redundant (a so-called <a href="/wiki/Double_covering_group" title="Double covering group" class="mw-redirect">double cover</a>).</p>
<p><a name="Parameterizing_the_space_of_rotations" id="Parameterizing_the_space_of_rotations"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=3" title="Edit section: Parameterizing the space of rotations">edit</a>]</span> <span class="mw-headline">Parameterizing the space of rotations</span></h3>
<p>We can parameterize the surface of a sphere with two coordinates, such as latitude and longitude. But latitude and longitude are ill-behaved (<a href="/wiki/Degeneracy_(mathematics)" title="Degeneracy (mathematics)">degenerate</a>) at the north and south poles, though the poles are not intrinsically different from any other points on the sphere. It can be shown that no two-parameter coordinate system can avoid such degeneracy (the <a href="/wiki/Hairy_ball_theorem" title="Hairy ball theorem">hairy ball theorem</a>). We can avoid such problems by embedding the sphere in three-dimensional space and parameterizing it with three Cartesian coordinates (here <i>w</i>,<i>x</i>,<i>y</i>), placing the north pole at (<i>w</i>,<i>x</i>,<i>y</i>) = (1,0,0), the south pole at (<i>w</i>,<i>x</i>,<i>y</i>) = (−1,0,0), and the equator at <i>w</i> = 0, <i>x</i><sup>2</sup> + <i>y</i><sup>2</sup> = 1. Points on the sphere satisfy the constraint <i>w</i><sup>2</sup> + <i>x</i><sup>2</sup> + <i>y</i><sup>2</sup> = 1, so we still have just two <a href="/wiki/Degrees_of_freedom_(physics_and_chemistry)" title="Degrees of freedom (physics and chemistry)">degrees of freedom</a> though there are three coordinates. A point (<i>w</i>,<i>x</i>,<i>y</i>) on the sphere represents a rotation around the (<i>x</i>,<i>y</i>,0) axis by an angle <img class="tex" alt="\alpha= 2 \cos^{-1} w = 2 \sin^{-1} \sqrt{x^2+y^2}" src="http://upload.wikimedia.org/math/8/0/b/80b7492cea83c184ac82a78a4f04d8cc.png" />.</p>
<p>In the same way the hyperspherical space of 3D rotations can be parameterized by three angles (<a href="/wiki/Euler_angles" title="Euler angles">Euler angles</a>), but any such parameterization is degenerate at some points on the hypersphere, leading to the problem of <a href="/wiki/Gimbal_lock" title="Gimbal lock">gimbal lock</a>. We can avoid this by using four Euclidean coordinates <i>w</i>,<i>x</i>,<i>y</i>,<i>z</i>, with <i>w</i><sup>2</sup> + <i>x</i><sup>2</sup> + <i>y</i><sup>2</sup> + <i>z</i><sup>2</sup> = 1. The point (<i>w</i>,<i>x</i>,<i>y</i>,<i>z</i>) represents a rotation around the (<i>x</i>,<i>y</i>,<i>z</i>) axis by an angle <img class="tex" alt="\alpha = 2 \cos^{-1} w = 2 \sin^{-1} \sqrt{x^2+y^2+z^2}." src="http://upload.wikimedia.org/math/a/9/e/a9eb2250f099e88f18e079ac93e75c4d.png" /></p>
<p><a name="Quaternions_briefly" id="Quaternions_briefly"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=4" title="Edit section: Quaternions briefly">edit</a>]</span> <span class="mw-headline">Quaternions briefly</span></h3>
<div class="rellink noprint relarticle mainarticle">Main article: <a href="/wiki/Quaternions" title="Quaternions" class="mw-redirect">Quaternions</a></div>
<p>The <a href="/wiki/Complex_numbers" title="Complex numbers" class="mw-redirect">complex numbers</a> can be defined by introducing an abstract symbol <b>i</b> which satisfies the usual rules of algebra and additionally the rule <b>i</b><sup>2</sup> = −1. This is sufficient to reproduce all of the rules of complex number arithmetic: for example, <img class="tex" alt="(a+b\mathbf{i})(c+d\mathbf{i}) = ac + ad\mathbf{i} + b\mathbf{i}c + b\mathbf{i}d\mathbf{i} = ac + ad\mathbf{i} + bc\mathbf{i} + bd\mathbf{i}^2 = (ac - bd) + (bc + ad) \mathbf{i}" src="http://upload.wikimedia.org/math/3/2/5/32576829932c7b4a3855b05a5b20cac5.png" />.</p>
<p>In the same way the quaternions can be defined by introducing abstract symbols <b>i</b>, <b>j</b>, <b>k</b> which satisfy the rules <b>i</b><sup>2</sup> = <b>j</b><sup>2</sup> = <b>k</b><sup>2</sup> = <b>ijk</b> = −1 and the usual algebraic rules <i>except</i> the commutative law of multiplication (a familiar example of such a noncommutative algebra is <a href="/wiki/Matrix_algebra" title="Matrix algebra">matrix algebra</a>). From this all of the rules of quaternion arithmetic follow: for example, one can show that <img class="tex" alt="(a + b\mathbf{i} + c\mathbf{j} + d\mathbf{k}) (e + f\mathbf{i} + g\mathbf{j} + h\mathbf{k}) = (ae - bf - cg - dh) + (af + be + ch - dg) \mathbf{i} + (ag + ce + df - bh) \mathbf{j} + (ah + de + bg - cf) \mathbf{k}" src="http://upload.wikimedia.org/math/6/8/2/68249a8da5a135bb62b10c337aa6bf5d.png" />.</p>
<p>The imaginary part <img class="tex" alt="b\mathbf{i} + c\mathbf{j} + d\mathbf{k}" src="http://upload.wikimedia.org/math/2/8/0/2804b2a933672c43e5ec162b261c76b5.png" /> of a quaternion behaves like a <a href="/wiki/Vector" title="Vector">vector</a> <img class="tex" alt="(b, c, d) \in \mathbb{R}^3" src="http://upload.wikimedia.org/math/9/0/b/90bdb01c53cc01da43c752469fff8265.png" />, and the real part <i>a</i> behaves like a <a href="/wiki/Scalar" title="Scalar">scalar</a> in <img class="tex" alt="\mathbb{R}" src="http://upload.wikimedia.org/math/6/9/a/69a45f1e602cd2b2c2e67e41811fd226.png" />. When quaternions are used in geometry, it is more convenient to define them as <i>a scalar plus a vector</i> and use the modern language of vector <a href="/wiki/Cross_product" title="Cross product">cross</a> and <a href="/wiki/Dot_product" title="Dot product">dot products</a> (which were actually inspired by the quaternions in the first place). In place of the rules <b>i</b><sup>2</sup> = <b>j</b><sup>2</sup> = <b>k</b><sup>2</sup> = <b>ijk</b> = −1 we have the vector multiplication rule <img class="tex" alt="\mathbf{vw} = \mathbf{v} \times \mathbf{w} - \mathbf{v} \cdot \mathbf{w}" src="http://upload.wikimedia.org/math/0/7/d/07d8a5de2f71a39a4b7c5a286d48aec8.png" />. Vector multiplication is noncommutative (because of the cross product), while scalar-scalar and scalar-vector multiplications commute. From these rules it follows immediately that <img class="tex" alt="(s + \mathbf{v}) (t + \mathbf{w}) = (st - \mathbf{v} \cdot \mathbf{w}) + (s\mathbf{w} + t\mathbf{v} + \mathbf{v} \times \mathbf{w})" src="http://upload.wikimedia.org/math/8/2/2/82262291ca80487f70d52354d5c5f047.png" />.</p>
<p>The (left and right) multiplicative inverse of a nonzero quaternion is <img class="tex" alt="(s + \mathbf{v})^{-1} = \frac{s - \mathbf{v}}{s^2 + |\mathbf{v}|^2}" src="http://upload.wikimedia.org/math/a/f/f/aff1d8721a1c8f350b9610c1ffa98164.png" />, as can be verified by direct calculation.</p>
<p><a name="Parameterizing_the_space_of_rotations_with_quaternions" id="Parameterizing_the_space_of_rotations_with_quaternions"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=5" title="Edit section: Parameterizing the space of rotations with quaternions">edit</a>]</span> <span class="mw-headline">Parameterizing the space of rotations with quaternions</span></h3>
<p>Let (<i>w</i>,<i>x</i>,<i>y</i>,<i>z</i>) be the coordinates of a rotation as previously described. Define the quaternion</p>
<dl>
<dd><img class="tex" alt="q = w + x\mathbf{i} + y\mathbf{j} + z\mathbf{k} = w + (x,y,z) = \cos (\alpha/2) + \mathbf{u} \sin (\alpha/2)" src="http://upload.wikimedia.org/math/c/d/c/cdcfffde3c8f360604cda9a35fa9d39b.png" /></dd>
</dl>
<p>where <b>u</b> is a unit vector. Then it can be shown (see next section) that the quaternion product</p>
<dl>
<dd><img class="tex" alt="q \mathbf{v} q^{-1}" src="http://upload.wikimedia.org/math/4/0/f/40f80679cf10cd08dff02eecb9bd06ba.png" /></dd>
</dl>
<p>yields the vector <b>v</b> rotated by an angle <i>α</i> around the <b>u</b> axis. The rotation is clockwise if our line of sight points in the direction <b>u</b>. This operation is known as <a href="/wiki/Conjugation" title="Conjugation">conjugation</a> by <i>q</i>.</p>
<p>It follows that quaternion multiplication is composition of rotations, for if <i>p</i> and <i>q</i> are quaternions representing rotations, then rotation (conjugation) by <i>pq</i> is</p>
<dl>
<dd><img class="tex" alt="p q \mathbf{v} (p q)^{-1} = p q \mathbf{v} q^{-1} p^{-1}" src="http://upload.wikimedia.org/math/8/d/b/8db4d7c7ee12a003a9912109fa96afcc.png" />,</dd>
</dl>
<p>which is the same as rotating (conjugating) by <i>q</i> and then by <i>p</i>.</p>
<p>The quaternion inverse of a rotation is the opposite rotation, since <img class="tex" alt="q^{-1} (q \mathbf{v} q^{-1}) q = \mathbf{v}" src="http://upload.wikimedia.org/math/1/b/1/1b1bbf90f350788ec5841d348fdb9f9c.png" />. The square of a quaternion rotation is a rotation by twice the angle around the same axis. More generally <i>q</i><sup><i>n</i></sup> is a rotation by <i>n</i> times the angle around the same axis as <i>q</i>. This can be extended to arbitrary real <i>n</i>, allowing for smooth interpolation between spatial orientations; see <a href="/wiki/Slerp" title="Slerp">Slerp</a>.</p>
<p><a name="Proof_of_the_quaternion_rotation_identity" id="Proof_of_the_quaternion_rotation_identity"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=6" title="Edit section: Proof of the quaternion rotation identity">edit</a>]</span> <span class="mw-headline">Proof of the quaternion rotation identity</span></h3>
<p>Let <b>u</b> be a unit vector (the rotation axis) and let <img class="tex" alt="q = \cos \frac{\alpha}{2} + \mathbf{u} \sin \frac{\alpha}{2}" src="http://upload.wikimedia.org/math/4/b/c/4bcb55b5d24cab2ddf66ca12f0560ff1.png" />. Our goal is to show that</p>
<dl>
<dd><img class="tex" alt="\mathbf{v}' = q \mathbf{v} q^{-1} = \left( \cos \frac{\alpha}{2} + \mathbf{u} \sin \frac{\alpha}{2} \right) \, \mathbf{v} \, \left( \cos \frac{\alpha}{2} - \mathbf{u} \sin \frac{\alpha}{2} \right)" src="http://upload.wikimedia.org/math/3/c/f/3cfd02c6f950976dfade24e02648053b.png" /></dd>
</dl>
<p>yields the vector <b>v</b> rotated by an angle <i>α</i> around the axis <b>u</b>. Expanding out, we have</p>
<dl>
<dd><img class="tex" alt="\begin{array}{lll}
\mathbf{v}' &amp;=&amp; \mathbf{v} \cos^2 \frac{\alpha}{2} + (\mathbf{uv} - \mathbf{vu}) \sin \frac{\alpha}{2} \cos \frac{\alpha}{2} - \mathbf{uvu} \sin^2 \frac{\alpha}{2} \\
&amp;=&amp; \mathbf{v} \cos^2 \frac{\alpha}{2} + 2 (\mathbf{u} \times \mathbf{v}) \sin \frac{\alpha}{2} \cos \frac{\alpha}{2} - (\mathbf{v} (\mathbf{u} \cdot \mathbf{u}) - 2 \mathbf{u} (\mathbf{u} \cdot \mathbf{v})) \sin^2 \frac{\alpha}{2} \\
&amp;=&amp; \mathbf{v} (\cos^2 \frac{\alpha}{2} - \sin^2 \frac{\alpha}{2}) + (\mathbf{u} \times \mathbf{v}) (2 \sin \frac{\alpha}{2} \cos \frac{\alpha}{2}) + \mathbf{u} (\mathbf{u} \cdot \mathbf{v}) (2 \sin^2 \frac{\alpha}{2}) \\
&amp;=&amp; \mathbf{v} \cos \alpha + (\mathbf{u} \times \mathbf{v}) \sin \alpha + \mathbf{u} (\mathbf{u} \cdot \mathbf{v}) (1 - \cos \alpha) \\
&amp;=&amp; (\mathbf{v} - \mathbf{u} (\mathbf{u} \cdot \mathbf{v})) \cos \alpha + (\mathbf{u} \times \mathbf{v}) \sin \alpha + \mathbf{u} (\mathbf{u} \cdot \mathbf{v}) \\
&amp;=&amp; \mathbf{v}_{\bot} \cos \alpha + (\mathbf{u} \times \mathbf{v}_{\bot}) \sin \alpha + \mathbf{v}_{\|}
\end{array}" src="http://upload.wikimedia.org/math/d/1/f/d1f889cd61b7797e634f241d3a339494.png" /></dd>
</dl>
<p>where <img class="tex" alt="\mathbf{v}_{\bot}" src="http://upload.wikimedia.org/math/b/0/0/b00d675352f4baebccf3187a3b05ca99.png" /> and <img class="tex" alt="\mathbf{v}_{\|}" src="http://upload.wikimedia.org/math/e/9/d/e9d6b139b4388cafe8519a8abc1f52f0.png" /> are the components of <b>v</b> perpendicular and parallel to <b>u</b> respectively. This is the formula of a rotation by <i>α</i> around the <b>u</b> axis.</p>
<p><a name="Example" id="Example"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=7" title="Edit section: Example">edit</a>]</span> <span class="mw-headline">Example</span></h3>
<p>Consider the rotation <i>f</i> around the axis <b>u</b> = <i>i</i> + <i>j</i> + <i>k</i>, with a rotation angle of 120°, or <sup>2π</sup>⁄<sub>3</sub> <a href="/wiki/Radian" title="Radian">radians</a>.</p>
<dl>
<dd><img class="tex" alt="\alpha = \frac{2 \pi}{3} = 120^\circ" src="http://upload.wikimedia.org/math/c/7/f/c7fb8d3b68dc96d1eab1e28f770787e5.png" /></dd>
</dl>
<p>The length of <b>u</b> is √3, the half angle is <sup>π</sup>⁄<sub>3</sub> (60°) with <a href="/wiki/Cosine" title="Cosine" class="mw-redirect">cosine</a> ½, (cos 60° = 0.5) and <a href="/wiki/Sine" title="Sine" class="mw-redirect">sine</a> <sup>√3</sup>⁄<sub>2</sub>, (sin 60° ≈ 0.866). We are therefore dealing with a conjugation by the unit quaternion</p>
<dl>
<dd><img class="tex" alt="\begin{array}{lll}
z
&amp;=&amp; \cos\frac{\alpha}{2} + \sin\frac{\alpha}{2}\,\hat\mathbf{u}\\
&amp;=&amp; \cos \frac{\pi}{3} + \sin \frac{\pi}{3}\,\hat\mathbf{u}\\
&amp;=&amp; \frac{1}{2} + \frac{\sqrt{3}}{2}\cdot\,\hat\mathbf{u}\\
&amp;=&amp; \frac{1}{2} + \frac{\sqrt{3}}{2}\cdot \frac{(i+j+k)}{\sqrt{3}}\\
&amp;=&amp; \frac{1 + i + j + k}{2}.
\end{array}" src="http://upload.wikimedia.org/math/f/8/5/f853c9d4405c7c6b7d8df3216552c4e7.png" /></dd>
</dl>
<p>Concretely,</p>
<dl>
<dd><i>f</i>(<i>ai</i> + <i>bj</i> + <i>ck</i>) = <i>z</i> (<i>ai</i> + <i>bj</i> + <i>ck</i>) <i>z</i><sup>-1</sup> .</dd>
</dl>
<p>Note that <i>z</i><sup>-1</sup>&#160;= 1/<i>z</i>, as <i>z</i> has unit modulus; here <i>z</i><sup>-1</sup>&#160;= <i>z</i><sup>*</sup>&#160;= (1−<i>i</i>−<i>j</i>−<i>k</i>)/2. This can be simplified, using the ordinary rules for quaternion arithmetic, to</p>
<dl>
<dd><i>f</i>(<i>ai</i> + <i>bj</i> + <i>ck</i>) = <i>ci</i> + <i>aj</i> + <i>bk</i>,</dd>
</dl>
<p>as expected: the rotation corresponds to keeping a <a href="/wiki/Cube" title="Cube">cube</a> held fixed at one point, and rotating it 120° about the long diagonal through the fixed point (observe how the three axes are <a href="/wiki/Cyclic_permutation" title="Cyclic permutation">permuted cyclically</a>).</p>
<p><a name="Quaternion_non-commutativity_and_rotations" id="Quaternion_non-commutativity_and_rotations"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=8" title="Edit section: Quaternion non-commutativity and rotations">edit</a>]</span> <span class="mw-headline">Quaternion non-commutativity and rotations</span></h2>
<p>The multiplication of quaternions is <a href="/wiki/Non-commutative" title="Non-commutative" class="mw-redirect">non-commutative</a>. Since this operation corresponds to a three dimensional rotation, this property can be easily demonstrated by showing that three dimensional rotations are not commutative in general. A simple exercise of applying two rotations to an asymmetrical object (e.g., a book) can explain it. First, rotate a book 90 degrees clockwise around the z axis. Next rotate it 180 degrees clockwise around the x axis and memorize the result. Then restore the original orientation, so that the book title is again readable, and apply those rotations in opposite order. Compare the outcome to the earlier result. This shows that, in general, the composition of two different rotations around two distinct spatial axes will not commute.</p>
<p><a name="Quaternions_versus_other_representations_of_rotations" id="Quaternions_versus_other_representations_of_rotations"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=9" title="Edit section: Quaternions versus other representations of rotations">edit</a>]</span> <span class="mw-headline">Quaternions versus other representations of rotations</span></h2>
<p>The representation of a rotation as a quaternion (4 numbers) is more compact than the representation as an <a href="/wiki/Orthogonal_matrix" title="Orthogonal matrix">orthogonal matrix</a> (9 numbers). Furthermore, for a given axis and angle, one can easily construct the corresponding quaternion, and conversely, for a given quaternion one can easily read off the axis and the angle. Both of these are much harder with matrices or <a href="/wiki/Euler_angle" title="Euler angle" class="mw-redirect">Euler angles</a>.</p>
<p>In <a href="/wiki/Computer_game" title="Computer game" class="mw-redirect">computer games</a> and other applications, one is often interested in “smooth rotations”, meaning that the scene should slowly rotate and not in a single step. This can be accomplished by choosing a <a href="/wiki/Curve" title="Curve">curve</a> such as the <a href="/wiki/Slerp" title="Slerp">spherical linear interpolation</a> in the quaternions, with one endpoint being the identity transformation 1 (or some other initial rotation) and the other being the intended final rotation. This is more problematic with other representations of rotations.</p>
<p>When composing several rotations on a computer, rounding errors necessarily accumulate. A quaternion that’s slightly off still represents a rotation after being normalised—a matrix that’s slightly off need not be <a href="/wiki/Orthogonal" title="Orthogonal" class="mw-redirect">orthogonal</a> anymore and therefore is harder to convert back to a proper orthogonal matrix.</p>
<p>Quaternions also avoid a phenomenon called <a href="/wiki/Gimbal_lock" title="Gimbal lock">gimbal lock</a> which can result when, for example in <a href="/wiki/Flight_dynamics" title="Flight dynamics">pitch/yaw/roll rotational systems</a>, the pitch is rotated 90° up or down, so that yaw and roll then correspond to the same motion, and a degree of freedom of rotation is lost. In a <a href="/wiki/Gimbal" title="Gimbal">gimbal</a>-based aerospace inertial navigation system, for instance, this could have disastrous results if the aircraft is in a steep dive or ascent.</p>
<p>The <a href="/wiki/Orthogonal_matrix" title="Orthogonal matrix">orthogonal matrix</a> corresponding to a rotation by the unit quaternion <span class="texhtml"><i>z</i> = <i>a</i> + <i>b</i><i>i</i> + <i>c</i><i>j</i> + <i>d</i><i>k</i></span> (with |z| = 1) is given by</p>
<dl>
<dd><img class="tex" alt="\begin{pmatrix}
a^2+b^2-c^2-d^2&amp;2bc-2ad        &amp;2ac+2bd        \\
2ad+2bc        &amp;a^2-b^2+c^2-d^2&amp;2cd-2ab        \\
2bd-2ac        &amp;2ab+2cd        &amp;a^2-b^2-c^2+d^2\\
\end{pmatrix}." src="http://upload.wikimedia.org/math/5/3/c/53c2fbec7f209fec205ffcf0f43de464.png" /></dd>
</dl>
<p>The quaternion <span class="texhtml">(<i>q</i><sub>0</sub> + <i>q</i><sub><i>x</i></sub><i>i</i> + <i>q</i><sub><i>y</i></sub><i>j</i> + <i>q</i><sub><i>z</i></sub><i>k</i>)</span> corresponding to a rotation matrix <span class="texhtml"><i>Q</i><sub><i>i</i><i>j</i></sub></span> can be problematic if the trace (sum of the diagonal elements) of the rotation matrix is zero or very small. A robust method is to choose the diagonal element with the largest absolute value (<span class="texhtml"><i>Q</i><sub><i>u</i><i>u</i></sub>)</span>. The value of</p>
<dl>
<dd><img class="tex" alt="r=\sqrt{1+Q_{uu}-Q_{vv}-Q_{ww}}" src="http://upload.wikimedia.org/math/f/b/9/fb9a48554a99b2e8eaa93adaad9548f4.png" /></dd>
</dl>
<p>will certainly be a real number, where <i>uvw</i> is an even permutation of <i>xyz</i> (i.e. <i>xyz</i>, <i>yzx</i> or <i>zxy</i>). The quaternion may now be written as:</p>
<dl>
<dd><img class="tex" alt="q_0 = \frac{Q_{wv}-Q_{vw}}{2r}" src="http://upload.wikimedia.org/math/f/f/0/ff03786ad6580f06257ac79464e7cc72.png" /></dd>
</dl>
<dl>
<dd><img class="tex" alt="q_u = r/2\," src="http://upload.wikimedia.org/math/9/8/c/98cbe9576ae6abcde25d998cf2aad903.png" /></dd>
</dl>
<dl>
<dd><img class="tex" alt="q_v = \frac{Q_{uv}+Q_{vu}}{2r}" src="http://upload.wikimedia.org/math/6/3/0/630b84062064938c87e0c9de03013b0f.png" /></dd>
</dl>
<dl>
<dd><img class="tex" alt="q_w = \frac{Q_{wu}+Q_{uw}}{2r}" src="http://upload.wikimedia.org/math/e/0/d/e0d0d31eb398714555bf2bd23698f1a1.png" /></dd>
</dl>
<p>Beware the vector convention: There are two conventions for rotation matrices: one assumes row vectors on the left; the other assumes column vectors on the right; the two conventions generate matrices that are the transpose of each other. The above matrix assumes column vectors on the right. In general, a matrix for vertex transpose is ambiguous unless the vector convention is also mentioned. Historically, the column-on-the-right convention comes from math and classical mechanics, whereas row-vector-on-the-left comes from computer graphics, where typesetting row vectors was easier back in the early days.</p>
<p>(Compare the equivalent <a href="/wiki/Rotation_matrix#Axis_and_angle" title="Rotation matrix">general formula for a 3 × 3 rotation matrix in terms of the axis and the angle</a>.)</p>
<p>Note that quaternions, like any other rotation or linear transform, are not "handed" (as in left-handed vs right-handed). Handedness of a coordinate system comes from the interpretation of the numbers in physical space. No matter what the handedness convention, rotating the X vector 90 degrees around the Z vector will yield the Y vector -- the math and numbers are the same.</p>
<p><i>See also</i>: <a href="/wiki/Charts_on_SO(3)" title="Charts on SO(3)">Charts on SO(3)</a>, <a href="/wiki/Euler_angles" title="Euler angles">Euler angles</a>, <a href="/wiki/Axis_angle" title="Axis angle">axis angle</a>, <a href="/wiki/Gimbal_lock" title="Gimbal lock">Gimbal lock</a></p>
<p><a name="Performance_comparisons_with_other_rotation_methods" id="Performance_comparisons_with_other_rotation_methods"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=10" title="Edit section: Performance comparisons with other rotation methods">edit</a>]</span> <span class="mw-headline">Performance comparisons with other rotation methods</span></h3>
<p>This section discusses the performance implications of using quaternions versus other methods (axis/angle or rotation matrices) to perform rotations in 3D. A brief summary:</p>
<table class="wikitable">
<caption>Performance comparison of rotation chaining operations</caption>
<tr>
<th>Method</th>
<th>Storage</th>
<th># multiplies</th>
<th># add/subtracts</th>
<th>total operations</th>
</tr>
<tr>
<td><a href="/wiki/Rotation_matrix" title="Rotation matrix">Rotation matrix</a></td>
<td>9</td>
<td>27</td>
<td>18</td>
<td>45</td>
</tr>
<tr>
<td><a href="/wiki/Quaternions" title="Quaternions" class="mw-redirect">Quaternions</a></td>
<td>4</td>
<td>16</td>
<td>12</td>
<td>28</td>
</tr>
</table>
<table class="wikitable">
<caption>Performance comparison of various rotation operations</caption>
<tr>
<th>Method</th>
<th>Storage</th>
<th># multiplies</th>
<th># add/subtracts</th>
<th># sin/cos</th>
<th>total operations</th>
</tr>
<tr>
<td><a href="/wiki/Rotation_matrix" title="Rotation matrix">Rotation matrix</a></td>
<td>9</td>
<td>9</td>
<td>6</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<td><a href="/wiki/Quaternions" title="Quaternions" class="mw-redirect">Quaternions</a></td>
<td>4</td>
<td>21</td>
<td>18</td>
<td>0</td>
<td>39</td>
</tr>
<tr>
<td><a href="/wiki/Rotation_matrix#Angle-Axis_representation_and_quaternion_representation" title="Rotation matrix">Angle/axis</a></td>
<td>4*</td>
<td>23</td>
<td>16</td>
<td>2</td>
<td>41</td>
</tr>
</table>
<p>* Note: angle-axis can be stored as 3 elements by multiplying the unit rotation axis by the rotation angle; however, before using it the unit axis and angle must be recovered by normalizing, costing additional math operations.</p>
<p>There are three basic approaches to rotating a vector <i>v</i>:</p>
<ol>
<li>Compute the matrix-vector product of a 3x3 <a href="/wiki/Rotation_matrix" title="Rotation matrix">rotation matrix</a> <b>R</b> and the original 3x1 vector <i>v</i>, giving <img class="tex" alt="v_\text{new} = \mathbf{R}v" src="http://upload.wikimedia.org/math/f/7/2/f720a5cc53cc53625c27cfc2858786a7.png" />. This requires 3*(3 multiplications + 2 additions) = 9 multiplications and 6 additions, the most efficient method for rotating a vector.</li>
<li>Use the quaternion rotation formula derived <a href="#Derivation" title="">above</a> of <img class="tex" alt="v_\text{new}= z \mathbf{v} z^{-1}" src="http://upload.wikimedia.org/math/f/1/3/f13952066c21c0f57c05ac03c8d44de7.png" />. Computing this result is equivalent to transforming the quaternion to a <a href="/wiki/Rotation_matrix" title="Rotation matrix">rotation matrix</a> <b>R</b> using the <a href="#Quaternions_versus_other_representations_of_rotations" title="">formula above</a> then multiplying with a vector. Performing some <a href="/wiki/Common_subexpression_elimination" title="Common subexpression elimination">common subexpression elimination</a> yields an algorithm that costs 21 multiplies and 18 adds. As a second approach, the quaternion could first be converted to its equivalent angle/axis representation then the angle/axis representation used to rotate the vector. However, this is both less efficient and less numerically stable when the quaternion nears the no-rotation point.</li>
<li>Use the <a href="/wiki/Rotation_matrix#Angle-Axis_representation_and_quaternion_representation" title="Rotation matrix">angle-axis formula</a> to convert an angle/axis to a <a href="/wiki/Rotation_matrix" title="Rotation matrix">rotation matrix</a> <b>R</b> then multiplying with a vector. Converting the angle/axis to <b>R</b> using <a href="/wiki/Common_subexpression_elimination" title="Common subexpression elimination">common subexpression elimination</a> costs 14 multiplies, 2 function calls (sin, cos), and 10 add/subtracts; from item 1, rotating using <b>R</b> adds an additional 9 multiplications and 6 additions for a total of 23 multiplies, 16 add/subtracts, and 2 function calls (sin, cos).</li>
</ol>
<p>Pseudo-code for rotating using a quaternion: given a quaternion <i>z</i> = <i>a</i> + <i>bi</i> + <i>cj</i> + <i>dk</i> (with |z| = 1) and a vector <i>v</i> with elements <i>v1</i>, <i>v2</i>, and <i>v3</i>, the following code performs a rotation. Note the use of temporary variables <i>t</i>xx. Also note one optimization of the diagonal entries of the <b>R</b> matrix: since <span class="texhtml"><i>a</i><sup>2</sup> + <i>b</i><sup>2</sup> + <i>c</i><sup>2</sup> + <i>d</i><sup>2</sup> = 1</span>, rewrite the top-left entry as <span class="texhtml"><i>a</i><sup>2</sup> + <i>b</i><sup>2</sup> + <i>c</i><sup>2</sup> + <i>d</i><sup>2</sup> − 2<i>c</i><sup>2</sup> − 2<i>d</i><sup>2</sup> = 1 − 2<i>c</i><sup>2</sup> − 2<i>d</i><sup>2</sup></span>; the other two diagonal entries can be similarly rewritten.</p>
<pre>
t2 =   a*b
t3 =   a*c
t4 =   a*d
t5 =  -b*b
t6 =   b*c
t7 =   b*d
t8 =  -c*c
t9 =   c*d
t10 = -d*d
v1new = 2*( (t8 + t10)*v1 + (t6 -  t4)*v2 + (t3 + t7)*v3 ) + v1
v2new = 2*( (t4 +  t6)*v1 + (t5 + t10)*v2 + (t9 - t2)*v3 ) + v2
v3new = 2*( (t7 -  t3)*v1 + (t2 +  t9)*v2 + (t5 + t8)*v3 ) + v3
</pre>
<p>Pseudo-code for creating an <a href="/wiki/Rotation_matrix#Angle-Axis_representation_and_quaternion_representation" title="Rotation matrix">angle/axis matrix</a> where the unit axis is (<i>v1</i>, <i>v2</i>, <i>v3</i>) and the angle is <i>θ</i>:</p>
<pre>
t1 =  cos(theta)
t2 =  1 - t1
t3 =  v1*v1
t6 =  t2*v1
t7 =  t6*v2
t8 =  sin(theta)
t9 =  t8*v3
t11 = t6*v3
t12 = t8*v2
t15 = v2*v2
t19 = t2*v2*v3
t20 = t8*v1
t24 = v3*v3
R[1, 1] = t1 + t2*t3
R[1, 2] = t7 - t9
R[1, 3] = t11 + t12
R[2, 1] = t7 + t9
R[2, 2] = t1 + t2*t15
R[2, 3] = t19 - t20
R[3, 1] = t11 - t12
R[3, 2] = t19 + t20
R[3, 3] = t1 + t2*t24
</pre>
<p><a name="Pairs_of_unit_quaternions_as_rotations_in_4D_space" id="Pairs_of_unit_quaternions_as_rotations_in_4D_space"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=11" title="Edit section: Pairs of unit quaternions as rotations in 4D space">edit</a>]</span> <span class="mw-headline">Pairs of unit quaternions as rotations in 4D space</span></h2>
<p>A pair of unit quaternions <i>z</i><sub>l</sub> and <i>z</i><sub>r</sub> can represent any rotation in 4D space. Given a four dimensional vector <b>v</b>, and pretending that it is a quaternion, we can rotate the vector <b>v</b> like this:</p>
<p><img class="tex" alt="f(v)=z_lvz_r=
\begin{pmatrix}
a_l&amp;-b_l&amp;-c_l&amp;-d_l\\
b_l&amp;a_l&amp;-d_l&amp;c_l\\
c_l&amp;d_l&amp;a_l&amp;-b_l\\
d_l&amp;-c_l&amp;b_l&amp;a_l
\end{pmatrix}\begin{pmatrix}
a_r&amp;-b_r&amp;-c_r&amp;-d_r\\
b_r&amp;a_r&amp;d_r&amp;-c_r\\
c_r&amp;-d_r&amp;a_r&amp;b_r\\
d_r&amp;c_r&amp;-b_r&amp;a_r
\end{pmatrix}\begin{pmatrix}
w\\x\\y\\z
\end{pmatrix}.
" src="http://upload.wikimedia.org/math/8/2/e/82e69289d89eaa9beaf845f44e4b4c63.png" /></p>
<p>It is straightforward to check that for each matrix <i>M</i> <i>M</i><sup>T</sup> = <i>I</i>, that is, that each matrix (and hence both matrices together) represents a rotation. Note that since (<i>z</i><sup><i>l</i></sup> <i>v</i>) <i>z</i><sup><i>r</i></sup> = <i>z</i><sup><i>l</i></sup> (<i>v</i> <i>z</i><sup><i>r</i></sup>), the two matrices must commute. Therefore, there are two commuting subgroups of the set of four dimensional rotations. Arbitrary four dimensional rotations have 6 degrees of freedom, each matrix represents 3 of those 6 degrees of freedom.</p>
<p>Since an <a href="/wiki/Infinitesimal" title="Infinitesimal">infinitesimal</a> four-dimensional rotation can be represented by a pair of quaternions (as follows), all (non-infinitesimal) four-dimensional rotations can also be represented.</p>
<p><img class="tex" alt="z_lvz_r=\begin{pmatrix}
1      &amp;-dt_{ab}&amp;-dt_{ac}&amp;-dt_{ad}\\
dt_{ab}&amp;1       &amp;-dt_{bc}&amp;-dt_{bd}\\
dt_{ac}&amp; dt_{bc}&amp;1       &amp;-dt_{cd}\\
dt_{ad}&amp; dt_{bd}&amp; dt_{cd}&amp;1
\end{pmatrix}\begin{pmatrix}
w\\
x\\
y\\
z
\end{pmatrix}
" src="http://upload.wikimedia.org/math/f/0/3/f03cf499f007e94a46eb9f97629cf23f.png" /></p>
<p><img class="tex" alt="z_l=
\left(1+{dt_{ab}+dt_{cd}\over 2}i+{dt_{ac}-dt_{bd}\over 2}j+{dt_{ad}+dt_{bc}\over 2}k\right)
" src="http://upload.wikimedia.org/math/3/5/6/35609cb6dae7d278502c5400ee6a38a0.png" /></p>
<p><img class="tex" alt="z_r=
\left(1+{dt_{ab}-dt_{cd}\over 2}i+{dt_{ac}+dt_{bd}\over 2}j+{dt_{ad}-dt_{bc}\over 2}k\right)
" src="http://upload.wikimedia.org/math/4/2/3/423937313d9f3befeb01614ef3f4eae7.png" /></p>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=12" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="/wiki/Slerp" title="Slerp">Slerp</a> — spherical linear interpolation</li>
<li><a href="/wiki/Dual_quaternion" title="Dual quaternion">dual quaternion</a></li>
<li><a href="/wiki/Conversion_between_quaternions_and_Euler_angles" title="Conversion between quaternions and Euler angles">conversion between quaternions and Euler angles</a></li>
<li><a href="/wiki/Rotation_group" title="Rotation group">rotation group</a></li>
<li><a href="/wiki/Coordinate_rotation" title="Coordinate rotation" class="mw-redirect">coordinate rotations</a></li>
<li><a href="/wiki/Clifford_algebra" title="Clifford algebra">Clifford algebras</a></li>
<li><a href="/wiki/Spinor_group" title="Spinor group" class="mw-redirect">spinor group</a></li>
<li><a href="/wiki/Covering_map" title="Covering map" class="mw-redirect">covering map</a></li>
<li><a href="/wiki/3-sphere" title="3-sphere">3-sphere</a></li>
<li><a href="/wiki/SO(4)" title="SO(4)">SO(4)</a></li>
</ul>
<p><a name="References" id="References"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=13" title="Edit section: References">edit</a>]</span> <span class="mw-headline">References</span></h2>
<ol class="references">
<li id="cite_note-0"><b><a href="#cite_ref-0" title="">^</a></b> <i>Quaternions and rotation Sequences: a Primer with Applications to Orbits, Aerospace, and Virtual Reality.</i> Kuipers, Jack B., Princeton University Press copyright 1999.</li>
<li id="cite_note-1"><b><a href="#cite_ref-1" title="">^</a></b> <i>Rotations, Quaternions, and Double Groups.</i> Altmann, Simon L., Dover Publications, 1986.</li>
</ol>
<p><a name="External_links_and_resources" id="External_links_and_resources"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit&amp;section=14" title="Edit section: External links and resources">edit</a>]</span> <span class="mw-headline">External links and resources</span></h2>
<ul>
<li><a href="ftp://ftp.cis.upenn.edu/pub/graphics/shoemake/quatut.ps.Z" class="external text" title="ftp://ftp.cis.upenn.edu/pub/graphics/shoemake/quatut.ps.Z" rel="nofollow">Shoemake, Ken. Quaternion tutorial</a></li>
<li><a href="http://graphics.stanford.edu/courses/cs348c-95-fall/software/quatdemo/" class="external text" title="http://graphics.stanford.edu/courses/cs348c-95-fall/software/quatdemo/" rel="nofollow">Hart, Francis, Kauffman. Quaternion demo</a></li>
<li><a href="http://www.diku.dk/publikationer/tekniske.rapporter/1998/98-5.ps.gz" class="external text" title="http://www.diku.dk/publikationer/tekniske.rapporter/1998/98-5.ps.gz" rel="nofollow">Dam, Koch, Lillholm. Quaternions, Interpolation and Animation</a></li>
<li><a href="http://home.ewha.ac.kr/~bulee/quaternion.pdf" class="external text" title="http://home.ewha.ac.kr/~bulee/quaternion.pdf" rel="nofollow">Byung-Uk Lee, Unit Quaternion Representation of Rotation</a></li>
<li><a href="http://www.itk.org/CourseWare/Training/QuaternionsI.pdf" class="external text" title="http://www.itk.org/CourseWare/Training/QuaternionsI.pdf" rel="nofollow">Ibanez, Luis, Quaternion Tutorial I</a></li>
<li><a href="http://www.itk.org/CourseWare/Training/QuaternionsII.pdf" class="external text" title="http://www.itk.org/CourseWare/Training/QuaternionsII.pdf" rel="nofollow">Ibanez, Luis, Quaternion Tutorial II</a></li>
<li><a href="http://citeseer.ist.psu.edu/vicci01quaternions.html" class="external text" title="http://citeseer.ist.psu.edu/vicci01quaternions.html" rel="nofollow">Leandra Vicci, Quaternions and Rotations in 3-Space: The Algebra and its Geometric Interpretation</a></li>
</ul>


<!-- 
NewPP limit report
Preprocessor node count: 205/1000000
Post-expand include size: 356/2048000 bytes
Template argument size: 125/2048000 bytes
Expensive parser function count: 0/500
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:186057-0!1!0!default!!en!2 and timestamp 20090416210438 -->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation">http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/Category:Quaternions" title="Category:Quaternions">Quaternions</a></span> | <span dir='ltr'><a href="/wiki/Category:Rotational_symmetry" title="Category:Rotational symmetry">Rotational symmetry</a></span> | <span dir='ltr'><a href="/wiki/Category:3D_computer_graphics" title="Category:3D computer graphics">3D computer graphics</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Quaternions_and_spatial_rotation" title="View the content page [c]" accesskey="c">Article</a></li>
				 <li id="ca-talk"><a href="/wiki/Talk:Quaternions_and_spatial_rotation" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=edit" title="You can edit this page. &#10;Please use the preview button before saving. [e]" accesskey="e">Edit this page</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Quaternions_and_spatial_rotation" title="You are encouraged to log in; however, it is not mandatory. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li>
				<li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content — the best of Wikipedia">Featured content</a></li>
				<li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/w/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Wikipedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if one exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search Wikipedia for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-interaction'>
		<h5>Interaction</h5>
		<div class='pBody'>
			<ul>
				<li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li>
				<li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-contact"><a href="/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Donate" title="Support us">Donate to Wikipedia</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Quaternions_and_spatial_rotation" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Quaternions_and_spatial_rotation" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Wikipedia:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=Quaternions_and_spatial_rotation&amp;oldid=284284432" title="Permanent link to this version of the page">Permanent link</a></li><li id="t-cite"><a href="/w/index.php?title=Special:Cite&amp;page=Quaternions_and_spatial_rotation&amp;id=284284432">Cite this page</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>Languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-es"><a href="http://es.wikipedia.org/wiki/Cuaterniones_y_rotaci%C3%B3n_en_el_espacio">Español</a></li>
				<li class="interwiki-fr"><a href="http://fr.wikipedia.org/wiki/Quaternions_et_rotation_dans_l%27espace">Français</a></li>
				<li class="interwiki-uk"><a href="http://uk.wikipedia.org/wiki/%D0%9A%D0%B2%D0%B0%D1%82%D0%B5%D1%80%D0%BD%D1%96%D0%BE%D0%BD%D0%B8_%D1%96_%D0%BF%D0%BE%D0%B2%D0%BE%D1%80%D0%BE%D1%82%D0%B8_%D0%BF%D1%80%D0%BE%D1%81%D1%82%D0%BE%D1%80%D1%83">Українська</a></li>
				<li class="interwiki-ru"><a href="http://ru.wikipedia.org/wiki/%D0%9A%D0%B2%D0%B0%D1%82%D0%B5%D1%80%D0%BD%D0%B8%D0%BE%D0%BD%D1%8B_%D0%B8_%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%B0">Русский</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 16 April 2009, at 21:04 (UTC).</li>
					<li id="copyright">All text is available under the terms of the <a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Copyrights" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc.</a>, a U.S. registered <a class='internal' href="http://en.wikipedia.org/wiki/501%28c%29#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="http://en.wikipedia.org/wiki/Non-profit_organization" title="Non-profit organization">nonprofit</a> <a href="http://en.wikipedia.org/wiki/Charitable_organization" title="Charitable organization">charity</a>.<br /></li>
					<li id="privacy"><a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
					<li id="disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served by srv191 in 0.202 secs. --></body></html>
