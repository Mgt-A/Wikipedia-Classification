<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15alpha" />
		<meta name="keywords" content="Lookup table,3D LUT,Array,Associative array,Boolean function,Boolean logic,Branch table,CLUT,CORDIC,C (programming language),Cache miss" />
		<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Lookup_table&amp;action=edit" />
		<link rel="edit" title="Edit this page" href="/w/index.php?title=Lookup_table&amp;action=edit" />
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<link rel="alternate" type="application/rss+xml" title="Wikipedia RSS Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Lookup table - Wikipedia, the free encyclopedia</title>
		<link rel="stylesheet" href="/skins-1.5/common/shared.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/common/commonPrint.css?207xx" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins-1.5/monobook/main.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/chick/main.css?207xx" type="text/css" media="handheld" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE50Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE55Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins-1.5/monobook/IE60Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins-1.5/monobook/IE70Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Handheld.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="handheld" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=2678400&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js?207xx"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins-1.5";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://en.wikipedia.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Lookup_table";
		var wgTitle = "Lookup table";
		var wgAction = "view";
		var wgArticleId = "356457";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 278711860;
		var wgVersion = "1.15alpha";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgMWSuggestTemplate = "http://en.wikipedia.org/w/api.php?action=opensearch\x26search={searchTerms}\x26namespace={namespaces}\x26suggest";
		var wgDBname = "enwiki";
		var wgSearchNamespaces = [0];
		var wgMWSuggestMessages = ["with suggestions", "no suggestions"];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?207xx"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js?207xx"></script>
		<script type="text/javascript" src="/skins-1.5/common/mwsuggest.js?207xx"></script>
<script type="text/javascript">/*<![CDATA[*/
var wgNotice='';var wgNoticeLocal='';
/*]]>*/</script>		<script type="text/javascript" src="http://upload.wikimedia.org/centralnotice/wikipedia/en/centralnotice.js?207xx"></script>
<style type="text/css">/*<![CDATA[*/
.source-c {line-height: normal;}
.source-c li, .source-c pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for c
 * CSS class: source-c, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie (http://qbnz.com/highlighter)
 */
.source-c .de1, .source-c .de2 {font-family: 'Courier New', Courier, monospace; font-weight: normal;}
.source-c  {}
.source-c .head {}
.source-c .foot {}
.source-c .imp {font-weight: bold; color: red;}
.source-c .ln-xtra {color: #cc0; background-color: #ffc;}
.source-c li {font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;}
.source-c li.li2 {font-weight: bold;}
.source-c .kw1 {color: #b1b100;}
.source-c .kw2 {color: #000000; font-weight: bold;}
.source-c .kw3 {color: #000066;}
.source-c .kw4 {color: #993333;}
.source-c .co1 {color: #808080; font-style: italic;}
.source-c .co2 {color: #339933;}
.source-c .coMULTI {color: #808080; font-style: italic;}
.source-c .es0 {color: #000099; font-weight: bold;}
.source-c .br0 {color: #66cc66;}
.source-c .st0 {color: #ff0000;}
.source-c .nu0 {color: #cc66cc;}
.source-c .me1 {color: #202020;}
.source-c .me2 {color: #202020;}

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
/*]]>*/
</style>		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Lookup_table skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><script type='text/javascript'>if (wgNotice != '') document.writeln(wgNotice);</script></div>		<h1 id="firstHeading" class="firstHeading">Lookup table</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>In <a href="/wiki/Computer_science" title="Computer science">computer science</a>, a <b>lookup table</b> is a <a href="/wiki/Data_structure" title="Data structure">data structure</a>, usually an <a href="/wiki/Array" title="Array">array</a> or <a href="/wiki/Associative_array" title="Associative array">associative array</a>, often used to replace a runtime computation with a simpler array indexing operation. The savings in terms of processing time can be significant, since retrieving a value from memory is often faster than undergoing an 'expensive' computation. Lookup tables are also used extensively to validate input values by matching against a list of valid (or invalid) items in an array and, in some programming languages, may include pointer functions (or offsets to labels) to process the matching input. In data analysis applications, such as <a href="/wiki/Image_Processing" title="Image Processing" class="mw-redirect">image processing</a>, a lookup table is used to transform the input data into a more desirable output format. For example, a grayscale picture of the planet Saturn will be transformed into a color image to emphasize the differences in its rings.</p>
<p>A classic example of reducing run-time computations using lookup tables is to obtain the result of a <a href="/wiki/Trigonometry" title="Trigonometry">trigonometry</a> calculation, such as the <a href="/wiki/Sine" title="Sine" class="mw-redirect">sine</a> of a value. Calculating trigonometric functions can substantially slow a computing application. The same application can finish much sooner when it first precalculates the sine of a number of values, for example for each whole number of degrees. Then, when the program requires the sine of a value, it can use the lookup table to retrieve the closest sine value from a memory address, and may also take the step of interpolating to the sine of the desired value, rather than work out the unique value every time using the mathematical formula. Lookup tables are thus used by mathematics co-processors in computer systems. An error in a lookup table was responsible for Intel's infamous <a href="/wiki/Pentium_FDIV_bug" title="Pentium FDIV bug">floating-point divide bug</a>.</p>
<p>Before the advent of computers, printed lookup tables of values were used by people to speed up hand calculations of complex functions, such as in trigonometry, logarithms, and statistical density functions.</p>
<p>Functions of a single variable (such as sine and cosine) may be implemented by a simple array. Functions involving two or more variables require multidimensional array indexing techniques. The latter case may thus employ a two-dimensional array of <b>power[x][y]</b> to replace a function to calculate <b>x<sup>y</sup></b> for a limited range of x and y values. Functions that have more than one result may be implemented with lookup tables that are arrays of structures.</p>
<p>As mentioned, there are intermediate solutions that use tables in combination with a small amount of computation, often using <a href="/wiki/Interpolation" title="Interpolation">interpolation</a>. Pre-calculation combined with interpolation can produce higher accuracy for values that fall between two precomputed values. This technique requires slightly more time to be performed but can greatly enhance accuracy in applications that require the higher accuracy. Depending on the values being precomputed, pre-computation with interpolation can also be used to shrink the lookup table size while maintaining accuracy.</p>
<p>In <a href="/wiki/Image_processing" title="Image processing">image processing</a>, lookup tables are often called <b><a href="/wiki/3D_LUT" title="3D LUT">LUT</a></b>s and give an output value for each of a range of index values. One common LUT, called the <i>colormap</i> or <i><a href="/wiki/Palette_(computing)" title="Palette (computing)">palette</a></i>, is used to determine the colors and intensity values with which a particular image will be displayed. <a href="/wiki/Computed_tomography#Windowing" title="Computed tomography">Windowing</a> in <a href="/wiki/Computed_tomography" title="Computed tomography">computed tomography</a> refers to a related concept.</p>
<p>While often effective, employing a lookup table may nevertheless result in a severe penalty if the computation that the LUT replaces is relatively simple. Memory retrieval time and the complexity of memory requirements can increase application operation time and system complexity relative to what would be required by straight formula computation. The possibility of <a href="/wiki/Cache_pollution" title="Cache pollution">polluting the cache</a> may also become a problem. Table accesses for large tables will almost certainly cause a <a href="/wiki/Cache_miss" title="Cache miss" class="mw-redirect">cache miss</a>. This phenomenon is increasingly becoming an issue as processors outpace memory. A similar issue appears in <a href="/wiki/Rematerialization" title="Rematerialization">rematerialization</a>, a <a href="/wiki/Compiler_optimization" title="Compiler optimization">compiler optimization</a>. In some environments, such as the <a href="/wiki/Java_(programming_language)" title="Java (programming language)">Java programming language</a>, table lookups can be even more expensive due to mandatory bounds-checking involving an additional comparison and branch for each lookup.</p>
<p>There are two fundamental limitations on when it is possible to construct a lookup table for a required operation. One is the amount of memory that is available: one cannot construct a lookup table larger than the space available for the table, although it is possible to construct disk-based lookup tables at the expense of lookup time. The other is the time required to compute the table values in the first instance; although this usually needs to be done only once, if it takes a prohibitively long time, it may make the use of a lookup table an inappropriate solution. Tables can however be statically defined in many cases, avoiding any additional processing once compiled.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Examples"><span class="tocnumber">1</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2"><a href="#Computing_sines"><span class="tocnumber">1.1</span> <span class="toctext">Computing sines</span></a>
<ul>
<li class="toclevel-3"><a href="#Sine_table_example"><span class="tocnumber">1.1.1</span> <span class="toctext">Sine table example</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Counting_bits"><span class="tocnumber">1.2</span> <span class="toctext">Counting bits</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Caches"><span class="tocnumber">2</span> <span class="toctext">Caches</span></a></li>
<li class="toclevel-1"><a href="#Hardware_LUTs"><span class="tocnumber">3</span> <span class="toctext">Hardware LUTs</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a href="#External_links"><span class="tocnumber">5</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Examples" id="Examples"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=1" title="Edit section: Examples">edit</a>]</span> <span class="mw-headline">Examples</span></h2>
<p><a name="Computing_sines" id="Computing_sines"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=2" title="Edit section: Computing sines">edit</a>]</span> <span class="mw-headline">Computing sines</span></h3>
<p>Most computers, which only perform basic arithmetic operations, cannot directly calculate the <a href="/wiki/Sine" title="Sine" class="mw-redirect">sine</a> of a given value. Instead, they use the <a href="/wiki/CORDIC" title="CORDIC">CORDIC</a> algorithm or a complex formula such as the following <a href="/wiki/Taylor_series" title="Taylor series">Taylor series</a> to compute the value of sine to a high degree of precision:</p>
<dl>
<dd><img class="tex" alt="\operatorname{sin}(x) \approx x - \frac{x^3}{6} + \frac{x^5}{120} - \frac{x^7}{5040}" src="http://upload.wikimedia.org/math/a/d/3/ad34a5fe4ffeb9364df19eea92eacc65.png" /> (for <i>x</i> close to 0)</dd>
</dl>
<p>However, this can be expensive to compute, especially on slow processors, and there are many applications, particularly in traditional <a href="/wiki/Computer_graphics" title="Computer graphics">computer graphics</a>, that need to compute many thousands of sine values every second. A common solution is to initially compute the sine of many evenly distributed values, and then to find the sine of <i>x</i> we choose the sine of the value closest to <i>x</i>. This will be close to the correct value because sine is a <a href="/wiki/Continuous_function" title="Continuous function">continuous function</a> with a bounded rate of change. For example:</p>
<pre>
 <i>real array</i> sine_table[-1000..1000]
 <b>for</b> x <b>from</b> -1000 <b>to</b> 1000
     sine_table[x] := sine(pi * x / 1000)
</pre>
<pre>
 <b>function</b> lookup_sine(x)
     <b>return</b> sine_table[round(1000 * x / pi)]
</pre>
<div class="thumb tright">
<div class="thumbinner" style="width:182px;"><a href="/wiki/File:Interpolation_example_linear.svg" class="image" title="Linear interpolation on a portion of the sine function"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/67/Interpolation_example_linear.svg/180px-Interpolation_example_linear.svg.png" width="180" height="144" border="0" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Interpolation_example_linear.svg" class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
Linear interpolation on a portion of the sine function</div>
</div>
</div>
<p>Unfortunately, the table requires quite a bit of space: if IEEE double-precision floating-point numbers are used, over 16,000 bytes would be required. We can use fewer samples, but then our precision will significantly worsen. One good solution is <a href="/wiki/Linear_interpolation" title="Linear interpolation">linear interpolation</a>, which draws a line between the two points in the table on either side of the value and locates the answer on that line. This is still quick to compute, and much more accurate for <a href="/wiki/Smooth_function" title="Smooth function">smooth functions</a> such as the sine function. Here is our example using linear interpolation:</p>
<pre>
 <b>function</b> lookup_sine(x)
     x1 := floor(x*1000/pi)
     y1 := sine_table[x1]
     y2 := sine_table[x1+1]
     <b>return</b> y1 + (y2-y1)*(x*1000/pi-x1)
</pre>
<p>When using interpolation, it is often beneficial to use <i><a href="/w/index.php?title=Non-uniform_sampling&amp;action=edit&amp;redlink=1" class="new" title="Non-uniform sampling (page does not exist)">non-uniform sampling</a></i>, which means that where the function is close to straight, we use few sample points, while where it changes value quickly we use more sample points to keep the approximation close to the real curve. For more information, see <a href="/wiki/Interpolation" title="Interpolation">interpolation</a>.</p>
<p><a name="Sine_table_example" id="Sine_table_example"></a></p>
<h4><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=3" title="Edit section: Sine table example">edit</a>]</span> <span class="mw-headline">Sine table example</span></h4>
<div dir="ltr" style="text-align: left;">
<pre class="source-c">
<span class="co1">// C 8-bit Sine Table</span>
<span class="kw4">const</span> <span class="kw4">unsigned</span> <span class="kw4">char</span> sinetable<span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span> = <span class="br0">{</span>
	<span class="nu0">128</span>,<span class="nu0">131</span>,<span class="nu0">134</span>,<span class="nu0">137</span>,<span class="nu0">140</span>,<span class="nu0">143</span>,<span class="nu0">146</span>,<span class="nu0">149</span>,<span class="nu0">152</span>,<span class="nu0">156</span>,<span class="nu0">159</span>,<span class="nu0">162</span>,<span class="nu0">165</span>,<span class="nu0">168</span>,<span class="nu0">171</span>,<span class="nu0">174</span>,
	<span class="nu0">176</span>,<span class="nu0">179</span>,<span class="nu0">182</span>,<span class="nu0">185</span>,<span class="nu0">188</span>,<span class="nu0">191</span>,<span class="nu0">193</span>,<span class="nu0">196</span>,<span class="nu0">199</span>,<span class="nu0">201</span>,<span class="nu0">204</span>,<span class="nu0">206</span>,<span class="nu0">209</span>,<span class="nu0">211</span>,<span class="nu0">213</span>,<span class="nu0">216</span>,
	<span class="nu0">218</span>,<span class="nu0">220</span>,<span class="nu0">222</span>,<span class="nu0">224</span>,<span class="nu0">226</span>,<span class="nu0">228</span>,<span class="nu0">230</span>,<span class="nu0">232</span>,<span class="nu0">234</span>,<span class="nu0">236</span>,<span class="nu0">237</span>,<span class="nu0">239</span>,<span class="nu0">240</span>,<span class="nu0">242</span>,<span class="nu0">243</span>,<span class="nu0">245</span>,
	<span class="nu0">246</span>,<span class="nu0">247</span>,<span class="nu0">248</span>,<span class="nu0">249</span>,<span class="nu0">250</span>,<span class="nu0">251</span>,<span class="nu0">252</span>,<span class="nu0">252</span>,<span class="nu0">253</span>,<span class="nu0">254</span>,<span class="nu0">254</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,
	<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">255</span>,<span class="nu0">254</span>,<span class="nu0">254</span>,<span class="nu0">253</span>,<span class="nu0">252</span>,<span class="nu0">252</span>,<span class="nu0">251</span>,<span class="nu0">250</span>,<span class="nu0">249</span>,<span class="nu0">248</span>,<span class="nu0">247</span>,
	<span class="nu0">246</span>,<span class="nu0">245</span>,<span class="nu0">243</span>,<span class="nu0">242</span>,<span class="nu0">240</span>,<span class="nu0">239</span>,<span class="nu0">237</span>,<span class="nu0">236</span>,<span class="nu0">234</span>,<span class="nu0">232</span>,<span class="nu0">230</span>,<span class="nu0">228</span>,<span class="nu0">226</span>,<span class="nu0">224</span>,<span class="nu0">222</span>,<span class="nu0">220</span>,
	<span class="nu0">218</span>,<span class="nu0">216</span>,<span class="nu0">213</span>,<span class="nu0">211</span>,<span class="nu0">209</span>,<span class="nu0">206</span>,<span class="nu0">204</span>,<span class="nu0">201</span>,<span class="nu0">199</span>,<span class="nu0">196</span>,<span class="nu0">193</span>,<span class="nu0">191</span>,<span class="nu0">188</span>,<span class="nu0">185</span>,<span class="nu0">182</span>,<span class="nu0">179</span>,
	<span class="nu0">176</span>,<span class="nu0">174</span>,<span class="nu0">171</span>,<span class="nu0">168</span>,<span class="nu0">165</span>,<span class="nu0">162</span>,<span class="nu0">159</span>,<span class="nu0">156</span>,<span class="nu0">152</span>,<span class="nu0">149</span>,<span class="nu0">146</span>,<span class="nu0">143</span>,<span class="nu0">140</span>,<span class="nu0">137</span>,<span class="nu0">134</span>,<span class="nu0">131</span>,
	<span class="nu0">128</span>,<span class="nu0">124</span>,<span class="nu0">121</span>,<span class="nu0">118</span>,<span class="nu0">115</span>,<span class="nu0">112</span>,<span class="nu0">109</span>,<span class="nu0">106</span>,<span class="nu0">103</span>,<span class="nu0">99</span>, <span class="nu0">96</span>, <span class="nu0">93</span>, <span class="nu0">90</span>, <span class="nu0">87</span>, <span class="nu0">84</span>, <span class="nu0">81</span>, 
	<span class="nu0">79</span>, <span class="nu0">76</span>, <span class="nu0">73</span>, <span class="nu0">70</span>, <span class="nu0">67</span>, <span class="nu0">64</span>, <span class="nu0">62</span>, <span class="nu0">59</span>, <span class="nu0">56</span>, <span class="nu0">54</span>, <span class="nu0">51</span>, <span class="nu0">49</span>, <span class="nu0">46</span>, <span class="nu0">44</span>, <span class="nu0">42</span>, <span class="nu0">39</span>, 
	<span class="nu0">37</span>, <span class="nu0">35</span>, <span class="nu0">33</span>, <span class="nu0">31</span>, <span class="nu0">29</span>, <span class="nu0">27</span>, <span class="nu0">25</span>, <span class="nu0">23</span>, <span class="nu0">21</span>, <span class="nu0">19</span>, <span class="nu0">18</span>, <span class="nu0">16</span>, <span class="nu0">15</span>, <span class="nu0">13</span>, <span class="nu0">12</span>, <span class="nu0">10</span>, 
	<span class="nu0">9</span>,  <span class="nu0">8</span>,  <span class="nu0">7</span>,  <span class="nu0">6</span>,  <span class="nu0">5</span>,  <span class="nu0">4</span>,  <span class="nu0">3</span>,  <span class="nu0">3</span>,  <span class="nu0">2</span>,  <span class="nu0">1</span>,  <span class="nu0">1</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  
	<span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">0</span>,  <span class="nu0">1</span>,  <span class="nu0">1</span>,  <span class="nu0">2</span>,  <span class="nu0">3</span>,  <span class="nu0">3</span>,  <span class="nu0">4</span>,  <span class="nu0">5</span>,  <span class="nu0">6</span>,  <span class="nu0">7</span>,  <span class="nu0">8</span>,  
	<span class="nu0">9</span>,  <span class="nu0">10</span>, <span class="nu0">12</span>, <span class="nu0">13</span>, <span class="nu0">15</span>, <span class="nu0">16</span>, <span class="nu0">18</span>, <span class="nu0">19</span>, <span class="nu0">21</span>, <span class="nu0">23</span>, <span class="nu0">25</span>, <span class="nu0">27</span>, <span class="nu0">29</span>, <span class="nu0">31</span>, <span class="nu0">33</span>, <span class="nu0">35</span>, 
	<span class="nu0">37</span>, <span class="nu0">39</span>, <span class="nu0">42</span>, <span class="nu0">44</span>, <span class="nu0">46</span>, <span class="nu0">49</span>, <span class="nu0">51</span>, <span class="nu0">54</span>, <span class="nu0">56</span>, <span class="nu0">59</span>, <span class="nu0">62</span>, <span class="nu0">64</span>, <span class="nu0">67</span>, <span class="nu0">70</span>, <span class="nu0">73</span>, <span class="nu0">76</span>, 
	<span class="nu0">79</span>, <span class="nu0">81</span>, <span class="nu0">84</span>, <span class="nu0">87</span>, <span class="nu0">90</span>, <span class="nu0">93</span>, <span class="nu0">96</span>, <span class="nu0">99</span>, <span class="nu0">103</span>,<span class="nu0">106</span>,<span class="nu0">109</span>,<span class="nu0">112</span>,<span class="nu0">115</span>,<span class="nu0">118</span>,<span class="nu0">121</span>,<span class="nu0">124</span>
<span class="br0">}</span>;
</pre></div>
<p><a name="Counting_bits" id="Counting_bits"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=4" title="Edit section: Counting bits">edit</a>]</span> <span class="mw-headline">Counting bits</span></h3>
<p>Another, more discrete problem that is expensive to solve on many computers is that of counting the number of bits which are set to 1 in a number, sometimes called the <i>population function</i>. For example, the number 37 is 100101 in binary, so it contains three set bits. A simple piece of <a href="/wiki/C_(programming_language)" title="C (programming language)">C</a> code designed to count the 1 bits in a <i>int</i> might look like this:</p>
<div dir="ltr" style="text-align: left;">
<pre class="source-c">
<span class="kw4">int</span> count_ones<span class="br0">(</span><span class="kw4">unsigned</span> <span class="kw4">int</span> x<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw4">int</span> result = <span class="nu0">0</span>;
    <span class="kw1">while</span> <span class="br0">(</span>x != <span class="nu0">0</span><span class="br0">)</span>
        result++, x = x &amp; <span class="br0">(</span>x<span class="nu0">-1</span><span class="br0">)</span>;
    <span class="kw1">return</span> result;
<span class="br0">}</span>
</pre></div>
<p>Unfortunately, this simple algorithm can take potentially hundreds of cycles on a modern architecture, because it makes many branches (loops) and branching is slow. This can be ameliorated using <a href="/wiki/Loop_unrolling" title="Loop unrolling" class="mw-redirect">loop unrolling</a> and some other more clever tricks, but there is a simple and fast solution using table lookup: simply construct a table <i>bits_set</i> with 256 entries giving the number of one bits set in each possible byte value. We then use this table to find the number of ones in each byte of the integer and add up the results. With no branches, four memory accesses, and almost no arithmetic, this can be dramatically faster than the algorithm above (this code assumes that <code>int</code> is 32-bit wide):</p>
<div dir="ltr" style="text-align: left;">
<pre class="source-c">
<span class="kw4">int</span> count_ones<span class="br0">(</span><span class="kw4">unsigned</span> <span class="kw4">int</span> x<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">return</span> bits_set<span class="br0">[</span> x        &amp; <span class="nu0">255</span><span class="br0">]</span> + bits_set<span class="br0">[</span><span class="br0">(</span>x &gt;&gt;  <span class="nu0">8</span><span class="br0">)</span> &amp; <span class="nu0">255</span><span class="br0">]</span>
         + bits_set<span class="br0">[</span><span class="br0">(</span>x &gt;&gt; <span class="nu0">16</span><span class="br0">)</span> &amp; <span class="nu0">255</span><span class="br0">]</span> + bits_set<span class="br0">[</span><span class="br0">(</span>x &gt;&gt; <span class="nu0">24</span><span class="br0">)</span> &amp; <span class="nu0">255</span><span class="br0">]</span>;
<span class="br0">}</span>
</pre></div>
<p>Note that even this simple algorithm can be too slow now, because the code runs faster from the cache of modern processors, but lookup tables do not fit well in caches and can cause a slower access to memory (in addition it requires computing addresses within a table, to perform the four lookups needed). On a 64-bit platform, the lookup table, if used, cannot be appropriately increased in size as it would exhaust processor caches, and if the lookup table is used to count bits by group of 8, then eight successive lookups are needed and this slows down the performance.</p>
<p><a name="Caches" id="Caches"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=5" title="Edit section: Caches">edit</a>]</span> <span class="mw-headline">Caches</span></h2>
<p>Storage caches (including disk caches for files, or processor caches for either for code or data) work also like a lookup table: the table is built with very fast memory instead of being stored on slower external memory, and maintains two pieces of data for a subrange of bits composing an external memory (or disk) address (notably the lowest bits of any possible external address):</p>
<ul>
<li>one piece (the tag) contains the value of the remaining bits of the address; if these bits match with those from the memory address to read or write, then the other piece contains the cached value for this address.</li>
<li>the other piece maintains the data associated to that address.</li>
</ul>
<p>A single (fast) lookup is performed to read the tag in the lookup table at the index specified by the lowest bits of the desired external storage address, and to determine if the memory address is hit by the cache. When a hit is found, no access to external memory is needed (except for write operations, where the cached value may need to be updated asynchronously to the slower memory after some time, or if the position in the cache must be replaced to cache another addresss).</p>
<p><a name="Hardware_LUTs" id="Hardware_LUTs"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=6" title="Edit section: Hardware LUTs">edit</a>]</span> <span class="mw-headline">Hardware LUTs</span></h2>
<p>In <a href="/wiki/Digital_logic" title="Digital logic" class="mw-redirect">digital logic</a>, an <i>n</i>-bit lookup table can be implemented with a <a href="/wiki/Multiplexer" title="Multiplexer">multiplexer</a> whose select lines are the inputs of the LUT and whose inputs are constants. An <i>n</i>-bit LUT can encode any <i>n</i>-input <a href="/wiki/Boolean_function" title="Boolean function">Boolean function</a> by modeling such functions as <a href="/wiki/Truth_table" title="Truth table">truth tables</a>. This is an efficient way of encoding <a href="/wiki/Boolean_logic" title="Boolean logic">Boolean logic</a> functions, and LUTs with 4-6 bits of input are in fact the key component of modern <a href="/wiki/Field-programmable_gate_array" title="Field-programmable gate array">FPGAs</a>.</p>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=7" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="/wiki/Branch_table" title="Branch table">Branch table</a></li>
<li><a href="/wiki/Memoization" title="Memoization">Memoization</a></li>
<li><a href="/wiki/Memory_bound_function" title="Memory bound function">Memory bound function</a></li>
<li><a href="/wiki/Palette_(computing)" title="Palette (computing)">Palette</a> and <a href="/wiki/CLUT" title="CLUT" class="mw-redirect">Colour Look-Up Table</a> - for the usage in computer graphics</li>
</ul>
<p><a name="External_links" id="External_links"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Lookup_table&amp;action=edit&amp;section=8" title="Edit section: External links">edit</a>]</span> <span class="mw-headline">External links</span></h2>
<ul>
<li><a href="http://en.wikibooks.org/wiki/360_Assembly/Branch_Instructions" class="external text" title="http://en.wikibooks.org/wiki/360_Assembly/Branch_Instructions" rel="nofollow">Fast table lookup using input character as index for branch table</a></li>
<li><a href="http://webster.cs.ucr.edu/AoA/Windows/HTML/TableLookups.html" class="external text" title="http://webster.cs.ucr.edu/AoA/Windows/HTML/TableLookups.html" rel="nofollow">Art of Assembly: Calculation via Table Lookups</a></li>
<li><a href="http://www.allthesky.com/articles/imagecolor.html" class="external text" title="http://www.allthesky.com/articles/imagecolor.html" rel="nofollow">Color Presentation of Astronomical Images</a></li>
</ul>


<!-- 
NewPP limit report
Preprocessor node count: 21/1000000
Post-expand include size: 0/2048000 bytes
Template argument size: 0/2048000 bytes
Expensive parser function count: 0/500
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:356457-0!1!0!default!!en!2 and timestamp 20090404111705 -->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org/wiki/Lookup_table">http://en.wikipedia.org/wiki/Lookup_table</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/Category:Arrays" title="Category:Arrays">Arrays</a></span> | <span dir='ltr'><a href="/wiki/Category:Associative_arrays" title="Category:Associative arrays">Associative arrays</a></span> | <span dir='ltr'><a href="/wiki/Category:Image_processing" title="Category:Image processing">Image processing</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Lookup_table" title="View the content page [c]" accesskey="c">Article</a></li>
				 <li id="ca-talk"><a href="/wiki/Talk:Lookup_table" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=Lookup_table&amp;action=edit" title="You can edit this page. &#10;Please use the preview button before saving. [e]" accesskey="e">Edit this page</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=Lookup_table&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Lookup_table" title="You are encouraged to log in; however, it is not mandatory. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li>
				<li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content — the best of Wikipedia">Featured content</a></li>
				<li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/w/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Wikipedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if one exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search Wikipedia for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-interaction'>
		<h5>Interaction</h5>
		<div class='pBody'>
			<ul>
				<li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li>
				<li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-contact"><a href="/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Donate" title="Support us">Donate to Wikipedia</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Lookup_table" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Lookup_table" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Wikipedia:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=Lookup_table&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=Lookup_table&amp;oldid=278711860" title="Permanent link to this version of the page">Permanent link</a></li><li id="t-cite"><a href="/w/index.php?title=Special:Cite&amp;page=Lookup_table&amp;id=278711860">Cite this page</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>Languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-cs"><a href="http://cs.wikipedia.org/wiki/Lookup_table">Česky</a></li>
				<li class="interwiki-de"><a href="http://de.wikipedia.org/wiki/Lookup-Tabelle">Deutsch</a></li>
				<li class="interwiki-fr"><a href="http://fr.wikipedia.org/wiki/LUT">Français</a></li>
				<li class="interwiki-it"><a href="http://it.wikipedia.org/wiki/Look-Up_Table">Italiano</a></li>
				<li class="interwiki-ja"><a href="http://ja.wikipedia.org/wiki/%E3%83%AB%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB">日本語</a></li>
				<li class="interwiki-pl"><a href="http://pl.wikipedia.org/wiki/Lookup_table">Polski</a></li>
				<li class="interwiki-pt"><a href="http://pt.wikipedia.org/wiki/LUT">Português</a></li>
				<li class="interwiki-ru"><a href="http://ru.wikipedia.org/wiki/%D0%A2%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D0%B0">Русский</a></li>
				<li class="interwiki-simple"><a href="http://simple.wikipedia.org/wiki/Lookup_table">Simple English</a></li>
				<li class="interwiki-zh"><a href="http://zh.wikipedia.org/wiki/%E6%9F%A5%E6%89%BE%E8%A1%A8">中文</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 21 March 2009, at 10:28.</li>
					<li id="copyright">All text is available under the terms of the <a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Copyrights" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc.</a>, a U.S. registered <a class='internal' href="http://en.wikipedia.org/wiki/501%28c%29#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="http://en.wikipedia.org/wiki/Non-profit_organization" title="Non-profit organization">nonprofit</a> <a href="http://en.wikipedia.org/wiki/Charitable_organization" title="Charitable organization">charity</a>.<br /></li>
					<li id="privacy"><a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
					<li id="disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served by srv101 in 0.074 secs. --></body></html>
