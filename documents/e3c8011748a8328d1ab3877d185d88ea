<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15alpha" />
		<meta name="keywords" content="Canny edge detector,Canny edge detector,Affine shape adaptation,Algorithm,Binary image,Blob detection,Calculus of variations,Computer vision,Convolution,Corner detection,DSP" />
		<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Canny_edge_detector&amp;action=edit" />
		<link rel="edit" title="Edit this page" href="/w/index.php?title=Canny_edge_detector&amp;action=edit" />
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<link rel="alternate" type="application/rss+xml" title="Wikipedia RSS Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Canny edge detector - Wikipedia, the free encyclopedia</title>
		<link rel="stylesheet" href="/skins-1.5/common/shared.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/common/commonPrint.css?207xx" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins-1.5/monobook/main.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/chick/main.css?207xx" type="text/css" media="handheld" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE50Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE55Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins-1.5/monobook/IE60Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins-1.5/monobook/IE70Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Handheld.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="handheld" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=2678400&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js?207xx"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins-1.5";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://en.wikipedia.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Canny_edge_detector";
		var wgTitle = "Canny edge detector";
		var wgAction = "view";
		var wgArticleId = "476817";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 280593313;
		var wgVersion = "1.15alpha";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgMWSuggestTemplate = "http://en.wikipedia.org/w/api.php?action=opensearch\x26search={searchTerms}\x26namespace={namespaces}\x26suggest";
		var wgDBname = "enwiki";
		var wgSearchNamespaces = [0];
		var wgMWSuggestMessages = ["with suggestions", "no suggestions"];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?207xx"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js?207xx"></script>
		<script type="text/javascript" src="/skins-1.5/common/mwsuggest.js?207xx"></script>
<script type="text/javascript">/*<![CDATA[*/
var wgNotice='';var wgNoticeLocal='';
/*]]>*/</script>		<script type="text/javascript" src="http://upload.wikimedia.org/centralnotice/wikipedia/en/centralnotice.js?207xx"></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Canny_edge_detector skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><script type='text/javascript'>if (wgNotice != '') document.writeln(wgNotice);</script></div>		<h1 id="firstHeading" class="firstHeading">Canny edge detector</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<table class="infobox" cellspacing="5" style="width: 22em; text-align: left; font-size: 88%; line-height: 1.5em; width:20em;">
<tr>
<td colspan="2" class="" style="text-align:center; font-size: 125%; font-weight: bold;"><a href="/wiki/Feature_detection_(computer_vision)" title="Feature detection (computer vision)">Feature detection</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/File:Corner.png" class="image" title="Corner.png"><img alt="" src="http://upload.wikimedia.org/wikipedia/en/thumb/5/5f/Corner.png/200px-Corner.png" width="200" height="174" border="0" /></a><br />
<span style="">Output of a typical corner detection algorithm</span></td>
</tr>
<tr>
<th colspan="2" style="text-align:center;"><a href="/wiki/Edge_detection" title="Edge detection">Edge detection</a></th>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><strong class="selflink">Canny</strong></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Canny_edge_detector#Conclusion" title="Canny edge detector">Canny-Deriche</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Edge_detection#Differential_edge_detection" title="Edge detection">Differential</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Sobel_operator" title="Sobel operator">Sobel</a></td>
</tr>
<tr>
<th colspan="2" style="text-align:center;"><a href="/wiki/Interest_point_detection" title="Interest point detection">Interest point detection</a></th>
</tr>
<tr>
<th colspan="2" style="text-align:center;"><a href="/wiki/Corner_detection" title="Corner detection">Corner detection</a></th>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Corner_detection#The_Harris_.26_Stephens_.2F_Plessey_corner_detection_algorithm" title="Corner detection">Harris operator</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Corner_detection#The_Shi_and_Tomasi_corner_detection_algorithm" title="Corner detection">Shi and Tomasi</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Corner_detection#The_level_curve_curvature_approach" title="Corner detection">Level curve curvature</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Corner_detection#The_SUSAN_corner_detector" title="Corner detection">SUSAN</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Corner_detection#The_FAST_feature_detector" title="Corner detection">FAST</a></td>
</tr>
<tr>
<th colspan="2" style="text-align:center;"><a href="/wiki/Blob_detection" title="Blob detection">Blob detection</a></th>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Blob_detection#The_Laplacian_of_Gaussian" title="Blob detection">Laplacian of Gaussian (LoG)</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Difference_of_Gaussians" title="Difference of Gaussians">Difference of Gaussians (DoG)</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Blob_detection#The_determinant_of_the_Hessian" title="Blob detection">Determinant of Hessian (DoH)</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Maximally_stable_extremal_regions" title="Maximally stable extremal regions">Maximally stable extremal regions</a></td>
</tr>
<tr>
<th colspan="2" style="text-align:center;"><a href="/wiki/Ridge_detection" title="Ridge detection">Ridge detection</a></th>
</tr>
<tr>
<th colspan="2" style="text-align:center;">Affine invariant feature detection</th>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Affine_shape_adaptation" title="Affine shape adaptation">Affine shape adaptation</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Harris_affine_region_detector" title="Harris affine region detector">Harris affine</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Hessian_Affine_region_detector" title="Hessian Affine region detector">Hessian affine</a></td>
</tr>
<tr>
<th colspan="2" style="text-align:center;">Feature description</th>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Scale-invariant_feature_transform" title="Scale-invariant feature transform">SIFT</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/SURF" title="SURF">SURF</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/GLOH" title="GLOH">GLOH</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/LESH" title="LESH">LESH</a></td>
</tr>
<tr>
<th colspan="2" style="text-align:center;"><a href="/wiki/Scale-space" title="Scale-space" class="mw-redirect">Scale-space</a></th>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Scale-space_axioms" title="Scale-space axioms">Scale-space axioms</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Scale-space_implementation" title="Scale-space implementation" class="mw-redirect">Implementation details</a></td>
</tr>
<tr>
<td colspan="2" class="" style="text-align:center;"><a href="/wiki/Pyramid_(image_processing)" title="Pyramid (image processing)">Pyramids</a></td>
</tr>
<tr>
<td style="text-align:right;" colspan="2">
<div class="noprint plainlinksneverexpand navbar" style="background:none; padding:0; font-weight:normal;; font-size:xx-small;">This box: <a href="/wiki/Template:FeatureDetectionCompVisNavbox" title="Template:FeatureDetectionCompVisNavbox"><span title="View this template" style="">view</span></a>&#160;•&#160;<a href="/w/index.php?title=Template_talk:FeatureDetectionCompVisNavbox&amp;action=edit&amp;redlink=1" class="new" title="Template talk:FeatureDetectionCompVisNavbox (page does not exist)"><span title="Discussion about this template" style="">talk</span></a></div>
</td>
</tr>
</table>
<p>The <b>Canny</b> <a href="/wiki/Edge_detection" title="Edge detection">edge detection</a> operator was developed by <a href="/wiki/John_F._Canny" title="John F. Canny" class="mw-redirect">John F. Canny</a> in 1986 and uses a multi-stage <a href="/wiki/Algorithm" title="Algorithm">algorithm</a> to detect a wide range of edges in images. Most importantly, Canny also produced a <i>computational theory of edge detection</i> explaining why the technique works.</p>
<div class="thumb tright">
<div class="thumbinner" style="width:302px;"><a href="/wiki/File:Valve_monochrome_canny_(6).PNG" class="image" title="The Canny edge detector applied to a colour photograph of a steam engine. (See the original image here)"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Valve_monochrome_canny_%286%29.PNG/300px-Valve_monochrome_canny_%286%29.PNG" width="300" height="225" border="0" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Valve_monochrome_canny_(6).PNG" class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
The Canny edge detector applied to a colour photograph of a steam engine. (See the original image <a href="http://en.wikipedia.org/wiki/Image:Valve_original_(1).PNG" class="external text" title="http://en.wikipedia.org/wiki/Image:Valve_original_(1).PNG" rel="nofollow">here</a>)</div>
</div>
</div>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Development_of_the_Canny_algorithm"><span class="tocnumber">1</span> <span class="toctext">Development of the Canny algorithm</span></a></li>
<li class="toclevel-1"><a href="#Stages_of_the_Canny_algorithm"><span class="tocnumber">2</span> <span class="toctext">Stages of the Canny algorithm</span></a>
<ul>
<li class="toclevel-2"><a href="#Noise_reduction"><span class="tocnumber">2.1</span> <span class="toctext">Noise reduction</span></a></li>
<li class="toclevel-2"><a href="#Finding_the_intensity_gradient_of_the_image"><span class="tocnumber">2.2</span> <span class="toctext">Finding the intensity gradient of the image</span></a></li>
<li class="toclevel-2"><a href="#Non-maximum_suppression"><span class="tocnumber">2.3</span> <span class="toctext">Non-maximum suppression</span></a></li>
<li class="toclevel-2"><a href="#Tracing_edges_through_the_image_and_hysteresis_thresholding"><span class="tocnumber">2.4</span> <span class="toctext">Tracing edges through the image and hysteresis thresholding</span></a></li>
<li class="toclevel-2"><a href="#Differential_geometric_formulation_of_the_Canny_edge_detector"><span class="tocnumber">2.5</span> <span class="toctext">Differential geometric formulation of the Canny edge detector</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1"><a href="#Conclusion"><span class="tocnumber">4</span> <span class="toctext">Conclusion</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">5</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a href="#External_links"><span class="tocnumber">7</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Development_of_the_Canny_algorithm" id="Development_of_the_Canny_algorithm"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=1" title="Edit section: Development of the Canny algorithm">edit</a>]</span> <span class="mw-headline">Development of the Canny algorithm</span></h2>
<p>Canny's aim was to discover the optimal edge detection algorithm. In this situation, an "optimal" edge detector means:</p>
<ul>
<li><i>good <a href="/wiki/Detection" title="Detection">detection</a></i> - the algorithm should mark as many real edges in the image as possible.</li>
<li><i>good <a href="/wiki/Localization" title="Localization">localization</a></i> - edges marked should be as close as possible to the edge in the real image.</li>
<li><i>minimal response</i> - a given edge in the image should only be marked once, and where possible, image noise should not create false edges.</li>
</ul>
<p>To satisfy these requirements Canny used the <a href="/wiki/Calculus_of_variations" title="Calculus of variations">calculus of variations</a> - a technique which finds the <a href="/wiki/Function_(mathematics)" title="Function (mathematics)">function</a> which optimizes a given <a href="/wiki/Functional_(mathematics)" title="Functional (mathematics)">functional</a>. The optimal function in Canny's detector is described by the sum of four <a href="/wiki/Exponential_function" title="Exponential function">exponential</a> terms, but can be approximated by the first <a href="/wiki/Derivative" title="Derivative">derivative</a> of a <a href="/wiki/Gaussian_function" title="Gaussian function">Gaussian</a>.</p>
<p><a name="Stages_of_the_Canny_algorithm" id="Stages_of_the_Canny_algorithm"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=2" title="Edit section: Stages of the Canny algorithm">edit</a>]</span> <span class="mw-headline">Stages of the Canny algorithm</span></h2>
<p><a name="Noise_reduction" id="Noise_reduction"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=3" title="Edit section: Noise reduction">edit</a>]</span> <span class="mw-headline"><a href="/wiki/Image_noise_reduction" title="Image noise reduction" class="mw-redirect">Noise reduction</a></span></h3>
<div class="thumb tright">
<div class="thumbinner" style="width:202px;"><a href="/wiki/File:Valve_gaussian_(2).PNG" class="image" title="The image after a 5x5 Gaussian mask has been passed across each pixel."><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Valve_gaussian_%282%29.PNG/200px-Valve_gaussian_%282%29.PNG" width="200" height="150" border="0" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Valve_gaussian_(2).PNG" class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
The image after a 5x5 Gaussian mask has been passed across each pixel.</div>
</div>
</div>
<p>Because the Canny edge detector uses a filter based on the first derivative of a Gaussian, it is susceptible to noise present on raw unprocessed image data, so to begin with, the raw image is <a href="/wiki/Convolution" title="Convolution">convolved</a> with a Gaussian filter. The result is a slightly <a href="/wiki/Gaussian_blur" title="Gaussian blur">blurred</a> version of the original which is not affected by a single noisy pixel to any significant degree.</p>
<p>Here is an example of a 5x5 Gaussian filter, used to create the image to the right, with <span class="texhtml">σ</span> = 1.4:</p>
<dl>
<dd><img class="tex" alt="
\mathbf{B} = \frac{1}{159} \begin{bmatrix} 
2 &amp; 4 &amp; 5 &amp; 4 &amp; 2 \\
4 &amp; 9 &amp; 12 &amp; 9 &amp; 4 \\
5 &amp; 12 &amp; 15 &amp; 12 &amp; 5 \\
4 &amp; 9 &amp; 12 &amp; 9 &amp; 4 \\
2 &amp; 4 &amp; 5 &amp; 4 &amp; 2
\end{bmatrix} * \mathbf{A}
" src="http://upload.wikimedia.org/math/4/1/b/41b5d83873429bca78d23547b2624ca7.png" /></dd>
</dl>
<p><a name="Finding_the_intensity_gradient_of_the_image" id="Finding_the_intensity_gradient_of_the_image"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=4" title="Edit section: Finding the intensity gradient of the image">edit</a>]</span> <span class="mw-headline">Finding the intensity gradient of the image</span></h3>
<div class="thumb tleft">
<div class="thumbinner" style="width:202px;"><a href="/wiki/File:Valve_sobel_with_angle_colour_(4).PNG" class="image" title="A binary edge map, derived from the Sobel operator, with a threshold of  80. The edges are coloured to indicate the edge direction: yellow for zero degrees, green for 45 degrees, blue for 90 degrees and red for 135 degrees."><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/5/57/Valve_sobel_with_angle_colour_%284%29.PNG/200px-Valve_sobel_with_angle_colour_%284%29.PNG" width="200" height="150" border="0" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Valve_sobel_with_angle_colour_(4).PNG" class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
A binary edge map, derived from the Sobel operator, with a threshold of 80. The edges are coloured to indicate the edge direction: yellow for zero degrees, green for 45 degrees, blue for 90 degrees and red for 135 degrees.</div>
</div>
</div>
<p>An edge in an image may point in a variety of directions, so the Canny algorithm uses four filters to detect horizontal, vertical and diagonal edges in the blurred image. The edge detection operator (Roberts, Prewitt, Sobel for example) returns a value for the first derivative in the horizontal direction (Gy) and the vertical direction (Gx). From this the edge gradient and direction can be determined:</p>
<p><img class="tex" alt="\mathbf{G} = \sqrt{ {\mathbf{G}_x}^2 + {\mathbf{G}_y}^2 }" src="http://upload.wikimedia.org/math/3/d/8/3d82fd5595a30ee764dc968e29101012.png" /></p>
<p><img class="tex" alt="\mathbf{\Theta} = \operatorname{arctan}\left({ \mathbf{G}_y \over \mathbf{G}_x }\right)" src="http://upload.wikimedia.org/math/e/6/b/e6b91a9f80585571e335ffc7423888db.png" /></p>
<p>The edge direction angle is rounded to one of four angles representing vertical, horizontal and the two diagonals (0, 45, 90 and 135 degrees for example).</p>
<p><a name="Non-maximum_suppression" id="Non-maximum_suppression"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=5" title="Edit section: Non-maximum suppression">edit</a>]</span> <span class="mw-headline">Non-maximum suppression</span></h3>
<div class="thumb tright">
<div class="thumbinner" style="width:202px;"><a href="/wiki/File:Valve_canny_with_angle_colour_(7).PNG" class="image" title="The same binary map shown on the left after non-maxima suppression. The edges are still coloured to indicate direction."><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/Valve_canny_with_angle_colour_%287%29.PNG/200px-Valve_canny_with_angle_colour_%287%29.PNG" width="200" height="150" border="0" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Valve_canny_with_angle_colour_(7).PNG" class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
The same binary map shown on the left after non-maxima suppression. The edges are still coloured to indicate direction.</div>
</div>
</div>
<p>Given estimates of the image gradients, a search is then carried out to determine if the gradient magnitude assumes a local maximum in the gradient direction. So, for example,</p>
<ul>
<li>if the rounded angle is zero degrees the point will be considered to be on the edge if its intensity is greater than the intensities in the <b>north and south</b> directions,</li>
<li>if the rounded angle is 90 degrees the point will be considered to be on the edge if its intensity is greater than the intensities in the <b>west and east</b> directions,</li>
<li>if the rounded angle is 135 degrees the point will be considered to be on the edge if its intensity is greater than the intensities in the <b>north east and south west</b> directions,</li>
<li>if the rounded angle is 45 degrees the point will be considered to be on the edge if its intensity is greater than the intensities in the <b>north west and south east</b> directions.</li>
</ul>
<p>This is worked out by passing a 3x3 grid over the intensity map.</p>
<p>From this stage referred to as non-maximum suppression, a set of edge points, in the form of a <a href="/wiki/Binary_image" title="Binary image">binary image</a>, is obtained. These are sometimes referred to as "thin edges".</p>
<p><a name="Tracing_edges_through_the_image_and_hysteresis_thresholding" id="Tracing_edges_through_the_image_and_hysteresis_thresholding"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=6" title="Edit section: Tracing edges through the image and hysteresis thresholding">edit</a>]</span> <span class="mw-headline">Tracing edges through the image and hysteresis thresholding</span></h3>
<p>Intensity gradients which are large are more likely to correspond to edges than if they are small. It is in most cases impossible to specify a threshold at which a given intensity gradient switches from corresponding to an edge into not doing so. Therefore Canny uses thresholding with <a href="/wiki/Hysteresis" title="Hysteresis">hysteresis</a>.</p>
<p>Thresholding with hysteresis requires two thresholds - high and low. Making the assumption that important edges should be along continuous curves in the image allows us to follow a faint section of a given line and to discard a few noisy pixels that do not constitute a line but have produced large gradients. Therefore we begin by applying a high threshold. This marks out the edges we can be fairly sure are genuine. Starting from these, using the directional information derived earlier, edges can be traced through the image. While tracing an edge, we apply the lower threshold, allowing us to trace faint sections of edges as long as we find a starting point.</p>
<p>Once this process is complete we have a binary image where each pixel is marked as either an edge pixel or a non-edge pixel. From complementary output from the edge tracing step, the binary edge map obtained in this way can also be treated as a set of edge curves, which after further processing can be represented as polygons in the image domain.</p>
<p><a name="Differential_geometric_formulation_of_the_Canny_edge_detector" id="Differential_geometric_formulation_of_the_Canny_edge_detector"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=7" title="Edit section: Differential geometric formulation of the Canny edge detector">edit</a>]</span> <span class="mw-headline">Differential geometric formulation of the Canny edge detector</span></h3>
<p>A more refined approach to obtain edges with sub-pixel accuracy is by using the approach of <a href="/wiki/Edge_detection#Differential_edge_detection" title="Edge detection">differential edge detection</a>, where the requirement of non-maximum suppression is formulated in terms of second- and third-order derivatives computed from a <a href="/wiki/Scale-space" title="Scale-space" class="mw-redirect">scale-space</a> representation (Lindeberg 1998) -- see the article on <a href="/wiki/Edge_detection#Differential_edge_detection" title="Edge detection">edge detection</a> for a detailed description.</p>
<p><a name="Parameters" id="Parameters"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=8" title="Edit section: Parameters">edit</a>]</span> <span class="mw-headline">Parameters</span></h2>
<p>The Canny algorithm contains a number of adjustable parameters, which can affect the computation time and effectiveness of the algorithm.</p>
<ul>
<li>The size of the Gaussian filter: the smoothing filter used in the first stage directly affects the results of the Canny algorithm. Smaller filters cause less blurring, and allow detection of small, sharp lines. A larger filter causes more blurring, smearing out the value of a given pixel over a larger area of the image. Larger blurring radii are more useful for detecting larger, smoother edges - for instance, the edge of a rainbow.</li>
<li>Thresholds: the use of two thresholds with hysteresis allows more flexibility than in a single-threshold approach, but general problems of thresholding approaches still apply. A threshold set too high can miss important information. On the other hand, a threshold set too low will falsely identify irrelevant information (such as noise) as important. It is difficult to give a generic threshold that works well on all images. No tried and tested approach to this problem yet exists.</li>
</ul>
<p><a name="Conclusion" id="Conclusion"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=9" title="Edit section: Conclusion">edit</a>]</span> <span class="mw-headline">Conclusion</span></h2>
<p>The Canny algorithm is adaptable to various environments. Its parameters allow it to be tailored to recognition of edges of differing characteristics depending on the particular requirements of a given implementation. In Canny's original paper, the derivation of the optimal filter led to a <a href="/wiki/Finite_Impulse_Response" title="Finite Impulse Response" class="mw-redirect">Finite Impulse Response</a> filter, which can be slow to compute in the spatial domain if the amount of smoothing required is important (the filter will have a large spatial support in that case). For this reason, it is often suggested to use <a href="/w/index.php?title=Rachid_Deriche&amp;action=edit&amp;redlink=1" class="new" title="Rachid Deriche (page does not exist)">Rachid Deriche</a>'s <a href="/wiki/IIR" title="IIR" class="mw-redirect">Infinite Impulse Response</a> form of Canny's filter (the Canny-Deriche detector), which is recursive, and which can be computed in a short, fixed amount of time for any desired amount of smoothing. The second form is suitable for real time implementations in <a href="/wiki/FPGA" title="FPGA" class="mw-redirect">FPGAs</a> or <a href="/wiki/DSP" title="DSP">DSPs</a>, or very fast embedded PCs. In this context, however, the regular recursive implementation of the Canny operator does not give a good approximation of rotational symmetry and therefore gives a bias towards horizontal and vertical edges.</p>
<p><a name="References" id="References"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=10" title="Edit section: References">edit</a>]</span> <span class="mw-headline">References</span></h2>
<ul>
<li>Canny, J., <i>A Computational Approach To Edge Detection</i>, IEEE Trans. Pattern Analysis and Machine Intelligence, 8:679-714, 1986.</li>
<li>R. Deriche, <i>Using Canny's criteria to derive an optimal edge detector recursively implemented</i>, Int. J. Computer Vision, Vol. 1, pp. 167-187, April 1987.</li>
<li><a href="http://www.nada.kth.se/cvap/abstracts/cvap191.html" class="external text" title="http://www.nada.kth.se/cvap/abstracts/cvap191.html" rel="nofollow">Lindeberg, Tony "Edge detection and ridge detection with automatic scale selection", International Journal of Computer Vision, 30, 2, pp 117--154, 1998. (Includes the differential approach to non-maximum suppression.)</a></li>
</ul>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=11" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="/wiki/Edge_detection" title="Edge detection">Edge detection</a></li>
<li><a href="/wiki/Feature_detection_(computer_vision)" title="Feature detection (computer vision)">Feature detection (computer vision)</a></li>
<li><a href="/wiki/Feature_extraction" title="Feature extraction">Feature extraction</a></li>
<li><a href="/wiki/Scale_space" title="Scale space">Scale space</a></li>
<li><a href="/wiki/Ridge_detection" title="Ridge detection">Ridge detection</a></li>
<li><a href="/wiki/Computer_vision" title="Computer vision">Computer vision</a></li>
<li><a href="/wiki/Digital_image_processing" title="Digital image processing">Digital image processing</a></li>
</ul>
<p><a name="External_links" id="External_links"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Canny_edge_detector&amp;action=edit&amp;section=12" title="Edit section: External links">edit</a>]</span> <span class="mw-headline">External links</span></h2>
<ul>
<li><a href="http://www.cs.berkeley.edu/~jfc/" class="external text" title="http://www.cs.berkeley.edu/~jfc/" rel="nofollow">John Canny's home page</a></li>
<li><a href="http://matlabserver.cs.rug.nl/" class="external text" title="http://matlabserver.cs.rug.nl/" rel="nofollow">On-line Canny edge detector</a></li>
<li><a href="http://www.tomgibara.com/computer-vision/canny-edge-detector" class="external text" title="http://www.tomgibara.com/computer-vision/canny-edge-detector" rel="nofollow">Free Java implementation of Canny edge detector</a></li>
<li><a href="http://www-sop.inria.fr/odyssee/team/Rachid.Deriche/Publications/RD.references.html" class="external text" title="http://www-sop.inria.fr/odyssee/team/Rachid.Deriche/Publications/RD.references.html" rel="nofollow">Publication List of Rachid Deriche</a></li>
</ul>


<!-- 
NewPP limit report
Preprocessor node count: 958/1000000
Post-expand include size: 18228/2048000 bytes
Template argument size: 3088/2048000 bytes
Expensive parser function count: 0/500
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:476817-0!1!0!default!!en!2 and timestamp 20090330063910 -->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org/wiki/Canny_edge_detector">http://en.wikipedia.org/wiki/Canny_edge_detector</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/Category:Computer_vision" title="Category:Computer vision">Computer vision</a></span> | <span dir='ltr'><a href="/wiki/Category:Image_processing" title="Category:Image processing">Image processing</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Canny_edge_detector" title="View the content page [c]" accesskey="c">Article</a></li>
				 <li id="ca-talk"><a href="/wiki/Talk:Canny_edge_detector" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=Canny_edge_detector&amp;action=edit" title="You can edit this page. &#10;Please use the preview button before saving. [e]" accesskey="e">Edit this page</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=Canny_edge_detector&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Canny_edge_detector" title="You are encouraged to log in; however, it is not mandatory. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li>
				<li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content — the best of Wikipedia">Featured content</a></li>
				<li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/w/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Wikipedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if one exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search Wikipedia for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-interaction'>
		<h5>Interaction</h5>
		<div class='pBody'>
			<ul>
				<li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li>
				<li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-contact"><a href="/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Donate" title="Support us">Donate to Wikipedia</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Canny_edge_detector" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Canny_edge_detector" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Wikipedia:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=Canny_edge_detector&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=Canny_edge_detector&amp;oldid=280593313" title="Permanent link to this version of the page">Permanent link</a></li><li id="t-cite"><a href="/w/index.php?title=Special:Cite&amp;page=Canny_edge_detector&amp;id=280593313">Cite this page</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>Languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-cs"><a href="http://cs.wikipedia.org/wiki/Cannyho_hranov%C3%BD_detektor">Česky</a></li>
				<li class="interwiki-de"><a href="http://de.wikipedia.org/wiki/Canny-Algorithmus">Deutsch</a></li>
				<li class="interwiki-fr"><a href="http://fr.wikipedia.org/wiki/Algorithme_de_Canny">Français</a></li>
				<li class="interwiki-it"><a href="http://it.wikipedia.org/wiki/Algoritmo_di_Canny">Italiano</a></li>
				<li class="interwiki-zh"><a href="http://zh.wikipedia.org/wiki/Canny%E7%AE%97%E5%AD%90">中文</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 30 March 2009, at 06:39.</li>
					<li id="copyright">All text is available under the terms of the <a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Copyrights" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc.</a>, a U.S. registered <a class='internal' href="http://en.wikipedia.org/wiki/501%28c%29#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="http://en.wikipedia.org/wiki/Non-profit_organization" title="Non-profit organization">nonprofit</a> <a href="http://en.wikipedia.org/wiki/Charitable_organization" title="Charitable organization">charity</a>.<br /></li>
					<li id="privacy"><a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
					<li id="disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served by srv104 in 0.315 secs. --></body></html>
