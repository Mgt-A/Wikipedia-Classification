<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15alpha" />
		<meta name="keywords" content="Teredo tunneling,Articles with unsourced statements since March 2009,Articles with unsourced statements since April 2009,*BSD,2006,6to4,AICCU,AYIYA,Attack surface,Autonomous system (Internet),BGP" />
		<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Teredo_tunneling&amp;action=edit" />
		<link rel="edit" title="Edit this page" href="/w/index.php?title=Teredo_tunneling&amp;action=edit" />
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<link rel="alternate" type="application/rss+xml" title="Wikipedia RSS Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Teredo tunneling - Wikipedia, the free encyclopedia</title>
		<link rel="stylesheet" href="/skins-1.5/common/shared.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/common/commonPrint.css?207xx" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins-1.5/monobook/main.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/chick/main.css?207xx" type="text/css" media="handheld" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE50Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE55Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins-1.5/monobook/IE60Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins-1.5/monobook/IE70Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Handheld.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="handheld" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=2678400&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js?207xx"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins-1.5";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://en.wikipedia.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Teredo_tunneling";
		var wgTitle = "Teredo tunneling";
		var wgAction = "view";
		var wgArticleId = "1267364";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 282845868;
		var wgVersion = "1.15alpha";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgMWSuggestTemplate = "http://en.wikipedia.org/w/api.php?action=opensearch\x26search={searchTerms}\x26namespace={namespaces}\x26suggest";
		var wgDBname = "enwiki";
		var wgSearchNamespaces = [0];
		var wgMWSuggestMessages = ["with suggestions", "no suggestions"];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?207xx"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js?207xx"></script>
		<script type="text/javascript" src="/skins-1.5/common/mwsuggest.js?207xx"></script>
<script type="text/javascript">/*<![CDATA[*/
var wgNotice='';var wgNoticeLocal='';
/*]]>*/</script>		<script type="text/javascript" src="http://upload.wikimedia.org/centralnotice/wikipedia/en/centralnotice.js?207xx"></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Teredo_tunneling skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><script type='text/javascript'>if (wgNotice != '') document.writeln(wgNotice);</script></div>		<h1 id="firstHeading" class="firstHeading">Teredo tunneling</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><b>Teredo</b> is a <a href="/wiki/Tunneling_protocol" title="Tunneling protocol">tunneling protocol</a> designed to grant <a href="/wiki/IPv6" title="IPv6">IPv6</a> connectivity to nodes that are located behind IPv6-unaware <a href="/wiki/Network_address_translation" title="Network address translation">NAT</a> devices. It defines a way of <a href="/wiki/Encapsulation_(networking)" title="Encapsulation (networking)">encapsulating</a> IPv6 packets within <a href="/wiki/IPv4" title="IPv4">IPv4</a> <a href="/wiki/User_Datagram_Protocol" title="User Datagram Protocol">UDP</a> datagrams that can be routed through NAT devices and on the <a href="/wiki/IPv4_internet" title="IPv4 internet" class="mw-redirect">IPv4 internet</a>.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Purpose"><span class="tocnumber">1</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">2</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Teredo_node_types"><span class="tocnumber">2.1</span> <span class="toctext">Teredo node types</span></a></li>
<li class="toclevel-2"><a href="#Teredo_IPv6_addressing"><span class="tocnumber">2.2</span> <span class="toctext">Teredo IPv6 addressing</span></a></li>
<li class="toclevel-2"><a href="#Teredo_servers"><span class="tocnumber">2.3</span> <span class="toctext">Teredo servers</span></a></li>
<li class="toclevel-2"><a href="#Teredo_relays"><span class="tocnumber">2.4</span> <span class="toctext">Teredo relays</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Limitations"><span class="tocnumber">3</span> <span class="toctext">Limitations</span></a></li>
<li class="toclevel-1"><a href="#Alternatives_to_Teredo"><span class="tocnumber">4</span> <span class="toctext">Alternatives to Teredo</span></a></li>
<li class="toclevel-1"><a href="#Security_considerations"><span class="tocnumber">5</span> <span class="toctext">Security considerations</span></a>
<ul>
<li class="toclevel-2"><a href="#Exposure"><span class="tocnumber">5.1</span> <span class="toctext">Exposure</span></a></li>
<li class="toclevel-2"><a href="#Firewalling"><span class="tocnumber">5.2</span> <span class="toctext">Firewalling</span></a></li>
<li class="toclevel-2"><a href="#Blocking"><span class="tocnumber">5.3</span> <span class="toctext">Blocking</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Implementations"><span class="tocnumber">6</span> <span class="toctext">Implementations</span></a></li>
<li class="toclevel-1"><a href="#Choice_of_the_name_Teredo"><span class="tocnumber">7</span> <span class="toctext">Choice of the name Teredo</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">8</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#External_links"><span class="tocnumber">9</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Purpose" id="Purpose"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=1" title="Edit section: Purpose">edit</a>]</span> <span class="mw-headline">Purpose</span></h2>
<p><a href="/wiki/6to4" title="6to4">6to4</a>, the most common IPv6 over IPv4 tunneling protocol, requires the tunnel endpoint to have a public IPv4 address. However, many hosts are currently attached to the IPv4 Internet through one or several NAT devices, usually because of <a href="/wiki/IPv4_address_exhaustion" title="IPv4 address exhaustion">IPv4 address shortage</a>. In such a situation, the only available public IPv4 address is assigned to the NAT device, and the 6to4 tunnel endpoint needs to be implemented on the NAT device itself. Many NAT devices currently deployed, however, cannot be upgraded to implement 6to4, for technical or economic reasons.</p>
<p>Teredo alleviates this problem by encapsulating IPv6 packets within UDP/IPv4 datagrams, which most NATs can forward properly. Thus, IPv6-aware hosts behind NATs can be used as Teredo tunnel endpoints even when they don't have a dedicated public IPv4 address. In effect, a host implementing Teredo can gain IPv6 connectivity with no cooperation from the local network environment.</p>
<p>Teredo is intended to be a temporary measure: in the long term, all IPv6 hosts should use native IPv6 connectivity. The Teredo protocol includes provisions for a <i>sunset procedure</i>: Teredo implementation should provide a way to stop using Teredo connectivity when IPv6 has matured and connectivity becomes available using a less brittle mechanism.</p>
<p><a name="Overview" id="Overview"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=2" title="Edit section: Overview">edit</a>]</span> <span class="mw-headline">Overview</span></h2>
<dl>
<dd><i>For a complete explanation, see Teredo Overview in <a href="#External_links" title="">External links</a>.</i></dd>
</dl>
<p>The Teredo protocol performs several functions:</p>
<ol>
<li>Diagnoses UDP over IPv4 (UDPv4) connectivity and discovers the kind of NAT present (using a simplified replacement to the <a href="/wiki/STUN" title="STUN">STUN</a> protocol);</li>
<li>assigns a globally-routable unique IPv6 address to each host using it;</li>
<li>encapsulates IPv6 packets inside UDPv4 datagrams for transmission over an IPv4 network (this includes <a href="/wiki/NAT_traversal" title="NAT traversal">NAT traversal</a>);</li>
<li>routes traffic between Teredo hosts and native (or otherwise non-Teredo) IPv6 hosts.</li>
</ol>
<p><a name="Teredo_node_types" id="Teredo_node_types"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=3" title="Edit section: Teredo node types">edit</a>]</span> <span class="mw-headline">Teredo node types</span></h3>
<p>Teredo defines several different kinds of node:</p>
<ul>
<li>A <b>Teredo client</b> is a host which has IPv4 connectivity to the internet from behind a NAT and uses the Teredo tunneling protocol to access the IPv6 Internet. Teredo clients are assigned an IPv6 address that starts with the Teredo prefix (<code>2001:0000::/32</code>).</li>
</ul>
<ul>
<li>A <b>Teredo server</b> is a well-known host which is used for initial configuration of a Teredo tunnel. A Teredo server never forwards any traffic for the client (apart from IPv6 pings), and has therefore very modest bandwidth requirements (a few hundred bits per second per client at most)<sup class="noprint Template-Fact"><span title="This claim needs references to reliable sources&#160;since March 2009" style="white-space: nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed">citation needed</a></i>]</span></sup>, which allows a single server to support large numbers of clients. Additionally, a Teredo server can be implemented in a fully <a href="/wiki/Stateless_server" title="Stateless server">stateless</a> manner, thus using the same amount of memory regardless of how many clients it supports.</li>
</ul>
<ul>
<li>A <b>Teredo relay</b> serves as the remote end of a Teredo tunnel. A Teredo relay must forward all of the data on behalf of the Teredo clients it serves, with the exception of direct Teredo client to Teredo client exchanges. Therefore, a relay requires a lot of bandwidth and can only support a limited number of simultaneous clients. Each Teredo relay serves a range of IPv6 hosts (e.g. a single campus/company, an <a href="/wiki/Internet_Service_Provider" title="Internet Service Provider" class="mw-redirect">ISP</a> or a whole operator network, or even the whole <a href="/wiki/IPv6_Internet" title="IPv6 Internet" class="mw-redirect">IPv6 Internet</a>); it forwards traffic between any Teredo clients and any host within said range.</li>
</ul>
<ul>
<li>A <b>Teredo host-specific relay</b> is a Teredo relay whose range of service is limited to the very host it runs on. As such, it has no particular bandwidth or routing requirements. A computer with a host-specific relay will use Teredo to communicate with Teredo clients, but it will stick to its main IPv6 connectivity provider to reach the rest of the IPv6 Internet.</li>
</ul>
<p><a name="Teredo_IPv6_addressing" id="Teredo_IPv6_addressing"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=4" title="Edit section: Teredo IPv6 addressing">edit</a>]</span> <span class="mw-headline">Teredo IPv6 addressing</span></h3>
<p>Each Teredo client is assigned a public IPv6 address which is constructed as follows (the higher order bit is numbered 0):</p>
<ul>
<li>Bits 0 to 31 are set to the Teredo prefix (normally 2001:0000::/32).</li>
<li>Bits 32 to 63 embed the primary IPv4 address of the Teredo server that is used.</li>
<li>Bits 64 to 79 can be used to define some flags. Currently only the higher order bit is used; it is set to 1 if the Teredo client is located behind a cone NAT, 0 otherwise. For Microsoft's Windows Vista and Windows Server 2008 implementations, more bits are used. In those implementations, the format for these 16 bits is "CRAAAAUG AAAAAAAA", where "C" remains the "Cone" flag, and the 12 "A" bits are randomly chosen by the Teredo client to introduce additional protection for the Teredo node against IPv6-based scanning attacks.</li>
<li>Bits 80 to 95 contains the <i>obfuscated</i> UDP port number. This is the port number that is mapped by the NAT to the Teredo client with all bits inverted.</li>
<li>Bits 96 to 127 contains the <i>obfuscated</i> IPv4 address. This is the public IPv4 address of the NAT with all bits inverted.</li>
</ul>
<p>As an example, 2001:0000:4136:e378:8000:63bf:3fff:fdd2 refers to a Teredo client:</p>
<ul>
<li>using Teredo server at address 65.54.227.120 (4136e378 in <a href="/wiki/Hexadecimal" title="Hexadecimal">hexadecimal</a>),</li>
<li>located behind a cone NAT (bit 64 is set),</li>
<li>using UDP mapped port 40000 on its NAT (in hexadecimal 63bf <a href="/wiki/Xor" title="Xor" class="mw-redirect">xor</a> ffff equals 9c40, or decimal number 40000),</li>
<li>whose NAT has public IPv4 address 192.0.2.45 (3ffffdd2 xor ffffffff equals c000022d, which is to say 192.0.2.45).</li>
</ul>
<p><a name="Teredo_servers" id="Teredo_servers"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=5" title="Edit section: Teredo servers">edit</a>]</span> <span class="mw-headline">Teredo servers</span></h3>
<dl>
<dd><i>For a list of existing Teredo servers, see the list in <a href="#External_links" title="">External links</a>.</i></dd>
</dl>
<p>Teredo servers are used by Teredo clients to autodetect the kind of NAT behind which they are located (if any), through a simplified STUN-like <i>qualification procedure</i>. Teredo clients also maintain a binding on their NAT toward their Teredo server, by sending a UDP packet at regular time intervals. That ensures that the server can always contact any of its clients, which is required for <a href="/wiki/Hole_punching" title="Hole punching">hole punching</a> to work properly.</p>
<p>If a Teredo relay (or another Teredo client) has to send an IPv6 packet to a Teredo client, it will first send a <i>Teredo bubble</i> packet to the client's Teredo server, whose IP address can be inferred from the Teredo IPv6 address of the Teredo client. The server can then forward the <i>bubble</i> to the client, so the Teredo client software knows that hole punching must be done toward the Teredo relay.</p>
<p>Teredo servers can also transmit ICMPv6 packet from Teredo clients toward the IPv6 Internet. In practice, when a Teredo client wants to contact a native IPv6 node, it must find out where the corresponding Teredo relay is (i.e. which public IPv4 and UDP port number to send encapsulated IPv6 packets to). To do that, the client crafts an ICMPv6 Echo Request (<i>ping</i>) toward the IPv6 node, and sends it through its configured Teredo server. The Teredo server decapsulates the ping onto the IPv6 Internet, so that the ping should eventually reach the IPv6 node. The IPv6 node should then reply with an ICMPv6 Echo Reply, as mandated by <a href="http://tools.ietf.org/html/rfc2460" class="external" title="http://tools.ietf.org/html/rfc2460">RFC 2460</a>. This reply packet will be routed to the <i>closest</i> Teredo relay, which will finally try to contact the Teredo client.</p>
<p>Maintaining a Teredo server requires little bandwidth because they are not involved into the actual transmission and reception of IPv6 packets. Also, it does not involve any access to the Internet routing protocols. The only requirements for a Teredo server are:</p>
<ul>
<li>the ability to emit ICMPv6 packets with a source address belonging to the Teredo prefix,</li>
<li>two distinct public IPv4 addresses (although not written down in the official specification, Microsoft Windows clients expect both addresses to be consecutive); the second IPv4 address is needed for the purpose of NAT detection.</li>
</ul>
<p><a name="Teredo_relays" id="Teredo_relays"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=6" title="Edit section: Teredo relays">edit</a>]</span> <span class="mw-headline">Teredo relays</span></h3>
<p>A Teredo relay potentially requires a lot of network bandwidth. Also, it must export (<i>advertise</i>) a route toward the Teredo IPv6 prefix (2001:0::/32) to other IPv6 hosts. That way, the Teredo relay will receive traffic from the IPv6 hosts addressed to any Teredo client, and forward it over UDP/IPv4. Symmetrically, it will receive packets from Teredo clients addressed to native IPv6 hosts over UDP/IPv4 and inject those into the native IPv6 network.</p>
<p>In practice, network administrators can set up a private Teredo relay for their company or campus; this will provide a short path between their IPv6 network and any Teredo client. However setting up a Teredo relay on a scale beyond that of a single network requires the ability to export <a href="/wiki/BGP" title="BGP" class="mw-redirect">BGP</a> IPv6 routes to the other <a href="/wiki/Autonomous_system_(Internet)" title="Autonomous system (Internet)">autonomous systems</a> (AS's).</p>
<p>Unlike 6to4, where the two halves of a connection can use different relays, traffic between a native IPv6 and a Teredo host will use the same Teredo relay, namely the one that is closest to the native IPv6 host network-wise. The Teredo host cannot localize a relay by itself (since it cannot send IPv6 packets by itself); if it needs to initiate a connection to a native-v6 host, it will send the first packet through the Teredo server, which sends a packet to the native-v6 host using the client's Teredo IPv6 address. The native-v6 host then responds as usual to the client's Teredo IPv6 address, which will eventually cause the packet to find a Teredo relay, which will initiate a connection to the client (possibly using the Teredo server for NAT piercing). The relay is then used for communication between the two hosts for as long as is needed. This design means that neither the Teredo server nor client needs to know the IPv4 address of any Teredo relays; a suitable one is automatically found by means of the global IPv6 routing table, since all Teredo relays advertise the network 2001:0::/32.</p>
<dl>
<dd><i>For near-realtime information on Teredo and BGP, see the <a href="#External_links" title="">External links</a>.</i></dd>
</dl>
<p>On <span class="mw-formatted-date" title="2006-03-30"><span class="mw-formatted-date" title="03-30"><a href="/wiki/March_30" title="March 30">March 30</a></span>, <a href="/wiki/2006" title="2006">2006</a></span>, Italian ISP <a href="http://www.itgate.net/" class="external text" title="http://www.itgate.net/" rel="nofollow">ITGate</a> was the first AS to start advertising a route toward 2001::/32 on the IPv6 Internet, so that <a href="http://tools.ietf.org/html/rfc4380" class="external" title="http://tools.ietf.org/html/rfc4380">RFC 4380</a>-compliant Teredo implementations would be fully usable. As of 16 February 2007, it is not functional.</p>
<p>It is expected that large network operators will be maintaining Teredo relays. As with 6to4, it remains however unclear how well the Teredo service will scale up if a large proportion of Internet hosts start using IPv6 through Teredo in addition to IPv4.</p>
<p>While Microsoft has been operating a set of Teredo servers ever since the first Teredo pseudo-tunnel for Windows XP was released, it has never provided a Teredo relay service for the IPv6 Internet as a whole.</p>
<p>Public teredo servers:</p>
<ul>
<li>teredo.remlab.net (France)</li>
<li>teredo.autotrans.consulintel.com (Spain)</li>
<li>teredo.ipv6.microsoft.com (USA, Redmond) (default for WindowsXP/2003/Vista/2008 OS)</li>
<li>teredo.ngix.ne.kr (Korea)</li>
<li>debian-miredo.progsoc.org (Australia)</li>
</ul>
<p><a name="Limitations" id="Limitations"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=7" title="Edit section: Limitations">edit</a>]</span> <span class="mw-headline">Limitations</span></h2>
<p>Teredo is not compatible with all NAT devices. Using the terminology of <a href="http://tools.ietf.org/html/rfc3489" class="external" title="http://tools.ietf.org/html/rfc3489">RFC 3489</a>, full cone, restricted and port-restricted <a href="/wiki/Network_Address_Translation#Different_types_of_NAT" title="Network Address Translation" class="mw-redirect">NAT</a> devices are supported, while symmetric NATs are not. <a href="/wiki/National_Chiao_Tung_University" title="National Chiao Tung University">National Chiao Tung University</a> proposed <a href="http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=1633339&amp;fromcon" class="external text" title="http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=1633339&amp;fromcon" rel="nofollow">SymTeredo</a> which enhanced the original Teredo protocol to support symmetric NATs, and the Microsoft and Miredo implementations implement certain unspecified non-standard extensions to improve support for symmetric NATs. However, connectivity between a Teredo client behind a symmetric NAT, and a Teredo client behind a port-restricted or symmetric NAT remains seemingly impossible.<sup class="noprint Template-Fact"><span title="This claim needs references to reliable sources&#160;since April 2009" style="white-space: nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed">citation needed</a></i>]</span></sup></p>
<p>Indeed, Teredo assumes that when two clients exchange encapsulated IPv6 packets, the mapped/external UDP port numbers used will be the same as those that were used to contact the Teredo server (and building the Teredo IPv6 address). Without this assumption, it would not be possible to establish a direct communication between the two clients, and a costly relay would have to be used to perform <a href="/w/index.php?title=Triangle_routing&amp;action=edit&amp;redlink=1" class="new" title="Triangle routing (page does not exist)">triangle routing</a>. A Teredo implementation tries to detect the type of NAT at startup, and will refuse to operate if the NAT appears to be symmetric. (This limitation can sometimes be worked around by manually configuring a port forwarding rule on the NAT box, which requires administrative access to the device).</p>
<p>Teredo can only provide a single IPv6 address per tunnel endpoint. As such, it is not possible to use a single Teredo tunnel to connect multiple hosts, contrary to 6to4 and some point-to-point IPv6 tunnels.</p>
<p>The bandwidth available to all Teredo clients toward the IPv6 Internet is limited by the availability of Teredo relays (which are no different in that respect from 6to4 relays).</p>
<p><a name="Alternatives_to_Teredo" id="Alternatives_to_Teredo"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=8" title="Edit section: Alternatives to Teredo">edit</a>]</span> <span class="mw-headline">Alternatives to Teredo</span></h2>
<div class="rellink noprint relarticle mainarticle">Main article: <a href="/wiki/IPv6#Transition_mechanisms" title="IPv6">IPv6#Transition mechanisms</a></div>
<p>6to4 requires a public IPv4 address, but provides a large 48-bit IPv6 prefix for each tunnel endpoint, and has a lower encapsulation <a href="/wiki/Overhead" title="Overhead">overhead</a>.</p>
<p>Point-to-point tunnels (<a href="/wiki/Network_topology#Point-to-point" title="Network topology">Network_topology#Point-to-point</a>) are usually more reliable and accountable than automatic pseudo-tunneling schemes (Teredo and 6to4), and typically provides permanent IPv6 addresses that do not depend on the IPv4 address of the tunnel endpoint. Some point-to-point <a href="/wiki/Tunnel_broker" title="Tunnel broker">tunnel brokers</a> additionally support UDP encapsulation to traverse NATs (for instance, the <a href="/wiki/AYIYA" title="AYIYA" class="mw-redirect">AYIYA</a> protocol can do this). On the other hand, point-to-point tunnels normally require registration. Automated tools (for instance <a href="/wiki/AICCU" title="AICCU">AICCU</a>) exist to make it easy to use Point-to-Point tunnels.</p>
<p><a name="Security_considerations" id="Security_considerations"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=9" title="Edit section: Security considerations">edit</a>]</span> <span class="mw-headline">Security considerations</span></h2>
<p><a name="Exposure" id="Exposure"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=10" title="Edit section: Exposure">edit</a>]</span> <span class="mw-headline">Exposure</span></h3>
<p>Teredo increases the <i><a href="/wiki/Attack_surface" title="Attack surface">attack surface</a></i> by assigning globally routable IPv6 addresses to network hosts behind NAT devices, which are otherwise mostly unreachable from the Internet. By doing so, Teredo potentially exposes any IPv6-enabled application with an open port to the outside. It also exposes the IPv6 stack and the Teredo tunneling software to attacks should they have any remotely exploitable vulnerability.</p>
<p>The Microsoft IPv6 stack has a "protection level" <a href="/wiki/Berkeley_sockets" title="Berkeley sockets">socket</a> option. This allows applications to specify whether they are willing to handle traffic coming from the Teredo tunnel, from anywhere except Teredo (the default), or only from the local <a href="/wiki/Intranet" title="Intranet">Intranet</a>.</p>
<p><a name="Firewalling" id="Firewalling"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=11" title="Edit section: Firewalling">edit</a>]</span> <span class="mw-headline">Firewalling</span></h3>
<p>For a Teredo (pseudo-)tunnel to operate properly, outgoing UDP packets must not be filtered. Moreover, replies to these packets (i.e. "solicited traffic") must also not be filtered. This corresponds to the typical setup of a NAT and its stateful firewall functionality.</p>
<p><a name="Blocking" id="Blocking"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=12" title="Edit section: Blocking">edit</a>]</span> <span class="mw-headline">Blocking</span></h3>
<p>Teredo tunneling software will detect a fatal error and stop if outgoing IPv4 UDP traffic is blocked.</p>
<p><a name="Implementations" id="Implementations"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=13" title="Edit section: Implementations">edit</a>]</span> <span class="mw-headline">Implementations</span></h2>
<p>Several implementations of Teredo are currently available:</p>
<ul>
<li><a href="/wiki/Windows_XP#Service_Pack_2" title="Windows XP">Windows XP SP2</a> includes a client and <i>host-specific</i> relay (also in the Advanced Networking Pack for Service Pack 1).</li>
<li><a href="/wiki/Windows_Server_2003" title="Windows Server 2003">Windows Server 2003</a> has a relay and server provided under the <a href="/wiki/Microsoft" title="Microsoft">Microsoft</a> Beta program.</li>
<li><a href="/wiki/Windows_Vista" title="Windows Vista">Windows Vista</a> has built-in support for Teredo with an unspecified extension for symmetric NAT traversal.</li>
<li><a href="/wiki/Windows_7" title="Windows 7">Windows 7</a> Also has native support for Teredo, implemented in a similar fashion to Windows Vista.</li>
<li><a href="/wiki/Miredo" title="Miredo">Miredo</a> is a client, relay and server for <a href="/wiki/Linux" title="Linux">Linux</a>, <a href="/wiki/*BSD" title="*BSD" class="mw-redirect">*BSD</a> and <a href="/wiki/Mac_OS_X" title="Mac OS X">Mac OS X</a>,</li>
<li><a href="http://www-rp.lip6.fr/teredo/" class="external text" title="http://www-rp.lip6.fr/teredo/" rel="nofollow">ng_teredo</a> is a relay and server based on <a href="/wiki/Netgraph" title="Netgraph">netgraph</a> for <a href="/wiki/FreeBSD" title="FreeBSD">FreeBSD</a> from the <a href="/wiki/LIP6" title="LIP6">LIP6</a> University and 6WIND.</li>
<li><a href="http://sourceforge.net/projects/nici-teredo/" class="external text" title="http://sourceforge.net/projects/nici-teredo/" rel="nofollow">NICI-Teredo</a> is a relay for the <a href="/wiki/Linux_kernel" title="Linux kernel">Linux kernel</a> and a userland Teredo server, developed at the National Chiao Tung University.</li>
</ul>
<p><a name="Choice_of_the_name_Teredo" id="Choice_of_the_name_Teredo"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=14" title="Edit section: Choice of the name Teredo">edit</a>]</span> <span class="mw-headline">Choice of the name Teredo</span></h2>
<p>The initial nickname of the Teredo tunneling protocol was <i><a href="/wiki/Shipworm" title="Shipworm">shipworm</a></i>. The idea was that the protocol would pierce holes through NAT devices, much like the shipworms bore tunnels through wood. Shipworms are responsible for the loss of very many wooden hulls, but Christian Huitema in the original draft noted that "the animal only survives in relatively clean and unpolluted water; its recent comeback in several Northern American harbors is a testimony to their newly retrieved cleanliness. Similarly, by piercing holes through NAT, the service would contribute to a newly retrieved transparency of the Internet."</p>
<p>Christian Huitema quickly changed the name to Teredo to avoid confusion with <a href="/wiki/Computer_worm" title="Computer worm">computer worms</a><sup id="cite_ref-0" class="reference"><a href="#cite_note-0" title=""><span>[</span>1<span>]</span></a></sup>. <i>Teredo navalis</i> is the Latin name of one of the best known species of shipworm.</p>
<p><a name="References" id="References"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=15" title="Edit section: References">edit</a>]</span> <span class="mw-headline">References</span></h2>
<div class="references-small">
<ol class="references">
<li id="cite_note-0"><b><a href="#cite_ref-0" title="">^</a></b> <cite style="font-style:normal" class="web" id="CITEREFHuitema.2C_Christian2001">Huitema, Christian (2001-12-19). <a href="http://www.atm.tut.fi/list-archive/ngtrans/msg00776.html" class="external text" title="http://www.atm.tut.fi/list-archive/ngtrans/msg00776.html" rel="nofollow">"(ngtrans) Renaming Shipworm as Teredo?"</a>. IETF ngtrans wg mailing list<span class="printonly">. <a href="http://www.atm.tut.fi/list-archive/ngtrans/msg00776.html" class="external free" title="http://www.atm.tut.fi/list-archive/ngtrans/msg00776.html" rel="nofollow">http://www.atm.tut.fi/list-archive/ngtrans/msg00776.html</a></span>.</cite><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.btitle=%28ngtrans%29+Renaming+Shipworm+as+Teredo%3F&amp;rft.atitle=&amp;rft.aulast=Huitema%2C+Christian&amp;rft.au=Huitema%2C+Christian&amp;rft.date=2001-12-19&amp;rft.pub=IETF+ngtrans+wg+mailing+list&amp;rft_id=http%3A%2F%2Fwww.atm.tut.fi%2Flist-archive%2Fngtrans%2Fmsg00776.html&amp;rfr_id=info:sid/en.wikipedia.org:Teredo_tunneling"><span style="display: none;">&#160;</span></span></li>
</ol>
</div>
<div class="references-small" style="margin-left:1.5em;">
<ul>
<li>C. Huitema. <i>Teredo: Tunneling IPv6 over UDP through Network Address Translations (NATs)</i>. <a href="http://tools.ietf.org/html/rfc4380" class="external" title="http://tools.ietf.org/html/rfc4380">RFC 4380</a>, February 2006.</li>
</ul>
</div>
<p><a name="External_links" id="External_links"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Teredo_tunneling&amp;action=edit&amp;section=16" title="Edit section: External links">edit</a>]</span> <span class="mw-headline">External links</span></h2>
<ul>
<li><a href="http://technet.microsoft.com/en-us/library/bb457011.aspx" class="external text" title="http://technet.microsoft.com/en-us/library/bb457011.aspx" rel="nofollow">Teredo Overview</a> on Microsoft TechNet</li>
<li><a href="http://www.sixxs.net/tools/grh/lg/?find=2001::/32" class="external text" title="http://www.sixxs.net/tools/grh/lg/?find=2001::/32" rel="nofollow">Current anycast Teredo BGP routes</a></li>
<li><a href="http://www.sixxs.net/tools/whois/?TEREDO-MNT" class="external text" title="http://www.sixxs.net/tools/whois/?TEREDO-MNT" rel="nofollow">TEREDO-MNT</a>: list of operators advertising the Teredo prefix via BGP</li>
<li><a href="http://www.sixxs.net/tools/aiccu/brokers/" class="external text" title="http://www.sixxs.net/tools/aiccu/brokers/" rel="nofollow">List of Teredo servers</a> maintained by <a href="/w/index.php?title=SixXS&amp;action=edit&amp;redlink=1" class="new" title="SixXS (page does not exist)">SixXS</a></li>
</ul>


<!-- 
NewPP limit report
Preprocessor node count: 653/1000000
Post-expand include size: 6230/2048000 bytes
Template argument size: 2310/2048000 bytes
Expensive parser function count: 2/500
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:1267364-0!1!0!default!!en!2 and timestamp 20090409210320 -->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org/wiki/Teredo_tunneling">http://en.wikipedia.org/wiki/Teredo_tunneling</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/Category:IPv6" title="Category:IPv6">IPv6</a></span></div><div id="mw-hidden-catlinks" class="mw-hidden-cats-hidden">Hidden categories:&#32;<span dir='ltr'><a href="/wiki/Category:All_articles_with_unsourced_statements" title="Category:All articles with unsourced statements">All articles with unsourced statements</a></span> | <span dir='ltr'><a href="/wiki/Category:Articles_with_unsourced_statements_since_March_2009" title="Category:Articles with unsourced statements since March 2009">Articles with unsourced statements since March 2009</a></span> | <span dir='ltr'><a href="/wiki/Category:Articles_with_unsourced_statements_since_April_2009" title="Category:Articles with unsourced statements since April 2009">Articles with unsourced statements since April 2009</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Teredo_tunneling" title="View the content page [c]" accesskey="c">Article</a></li>
				 <li id="ca-talk"><a href="/wiki/Talk:Teredo_tunneling" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=Teredo_tunneling&amp;action=edit" title="You can edit this page. &#10;Please use the preview button before saving. [e]" accesskey="e">Edit this page</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=Teredo_tunneling&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Teredo_tunneling" title="You are encouraged to log in; however, it is not mandatory. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li>
				<li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content — the best of Wikipedia">Featured content</a></li>
				<li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/w/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Wikipedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if one exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search Wikipedia for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-interaction'>
		<h5>Interaction</h5>
		<div class='pBody'>
			<ul>
				<li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li>
				<li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-contact"><a href="/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Donate" title="Support us">Donate to Wikipedia</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Teredo_tunneling" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Teredo_tunneling" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Wikipedia:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=Teredo_tunneling&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=Teredo_tunneling&amp;oldid=282845868" title="Permanent link to this version of the page">Permanent link</a></li><li id="t-cite"><a href="/w/index.php?title=Special:Cite&amp;page=Teredo_tunneling&amp;id=282845868">Cite this page</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>Languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-de"><a href="http://de.wikipedia.org/wiki/Teredo">Deutsch</a></li>
				<li class="interwiki-es"><a href="http://es.wikipedia.org/wiki/Teredo">Español</a></li>
				<li class="interwiki-fr"><a href="http://fr.wikipedia.org/wiki/Teredo_(protocole)">Français</a></li>
				<li class="interwiki-ru"><a href="http://ru.wikipedia.org/wiki/Teredo">Русский</a></li>
				<li class="interwiki-uk"><a href="http://uk.wikipedia.org/wiki/Teredo">Українська</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 9 April 2009, at 21:03 (UTC).</li>
					<li id="copyright">All text is available under the terms of the <a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Copyrights" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc.</a>, a U.S. registered <a class='internal' href="http://en.wikipedia.org/wiki/501%28c%29#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="http://en.wikipedia.org/wiki/Non-profit_organization" title="Non-profit organization">nonprofit</a> <a href="http://en.wikipedia.org/wiki/Charitable_organization" title="Charitable organization">charity</a>.<br /></li>
					<li id="privacy"><a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
					<li id="disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served by srv161 in 0.058 secs. --></body></html>
