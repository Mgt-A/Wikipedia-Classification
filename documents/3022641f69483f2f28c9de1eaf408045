<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15alpha" />
		<meta name="keywords" content="Voice modem command set,A-law,ADPCM,AT commands,Answering machine,Blue screen of death,CTS,Caller ID,Clock generator,Codecs,Conexant" />
		<link rel="alternate" type="application/x-wiki" title="Edit this page" href="http://en.wikipedia.org/w/index.php?title=Voice_modem_command_set&amp;action=edit" />
		<link rel="edit" title="Edit this page" href="http://en.wikipedia.org/w/index.php?title=Voice_modem_command_set&amp;action=edit" />
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<link rel="alternate" type="application/rss+xml" title="Wikipedia RSS Feed" href="http://en.wikipedia.org/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom Feed" href="http://en.wikipedia.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Voice modem command set - Wikipedia, the free encyclopedia</title>
		<link rel="stylesheet" href="/skins-1.5/common/shared.css?206xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/common/commonPrint.css?206xx" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins-1.5/monobook/main.css?206xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/chick/main.css?206xx" type="text/css" media="handheld" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE50Fixes.css?206xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE55Fixes.css?206xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins-1.5/monobook/IE60Fixes.css?206xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins-1.5/monobook/IE70Fixes.css?206xx" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Handheld.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="handheld" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=2678400&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js?206xx"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins-1.5";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://en.wikipedia.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Voice_modem_command_set";
		var wgTitle = "Voice modem command set";
		var wgAction = "view";
		var wgArticleId = "8041438";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = "278510624";
		var wgVersion = "1.15alpha";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgMWSuggestTemplate = "http://en.wikipedia.org/w/api.php?action=opensearch\x26search={searchTerms}\x26namespace={namespaces}\x26suggest";
		var wgDBname = "enwiki";
		var wgSearchNamespaces = [0];
		var wgMWSuggestMessages = ["with suggestions", "no suggestions"];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?206xx"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js?206xx"></script>
		<script type="text/javascript" src="/skins-1.5/common/mwsuggest.js?206xx"></script>
<script type="text/javascript">/*<![CDATA[*/
var wgNotice='';var wgNoticeLocal='';
/*]]>*/</script>		<script type="text/javascript" src="http://upload.wikimedia.org/centralnotice/wikipedia/en/centralnotice.js?206xx"></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Voice_modem_command_set skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><script type='text/javascript'>if (wgNotice != '') document.writeln(wgNotice);</script></div>		<h1 id="firstHeading" class="firstHeading">Voice modem command set</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<dl>
<dd><i>Main article: <a href="/wiki/Modem" title="Modem">Modem</a></i></dd>
</dl>
<p><b>Voice modem</b> is a term commonly used to describe an analog telephone data modem with a built-in capability of transmitting and receiving voice recordings over the phone line. Voice modems are used for telephony and <a href="/wiki/Answering_machine" title="Answering machine">answering machine</a> applications. Similar to the <a href="/wiki/Hayes_command_set" title="Hayes command set">Hayes command set</a> used for data modems, in which the host PC commands the modem via a series of commands known as <a href="/wiki/AT_commands" title="AT commands" class="mw-redirect">AT commands</a>, there exists a well-defined set of common voice AT commands that are somewhat consistent throughout the industry.</p>
<p>Because voice mode is not the prototypical use for a modem, many modems on the market have poor or buggy support for their voice modes. Characteristics of a good voice modem depend greatly upon the intended application, and include:</p>
<ul>
<li>Reliable operation. Many modems simply "lock up" or crash the host PC - though this is more common with <a href="/wiki/Winmodem" title="Winmodem" class="mw-redirect">Winmodems</a>. Others have flow control bugs and other implementation bugs, possibly causing calls to hang, audio to skip, or audio to keep playing after an attempted abort.</li>
<li>Good audio characteristics. Some modems have an uncorrectably low signal volume or produce audio noise. Some modems are unable to recognize all but the best <a href="/wiki/DTMF" title="DTMF" class="mw-redirect">DTMF</a> signals. Some modems do a poor job of recording, or detecting and reporting silence or the end-of-call voltage reversal, which some applications need.</li>
<li>Support for <a href="/wiki/Caller_ID" title="Caller ID">Caller ID</a>, if needed. "Type-1 caller ID" as used in North America is missing from the vast majority of modems. Nearly all modem chipsets support caller ID, but because the typical dial-up Internet user doesn't need caller ID, the extra components needed to support caller ID are often omitted for cost reasons.</li>
<li>Support for multiple instances. The drivers for many internal modems (typically <a href="/wiki/Winmodem" title="Winmodem" class="mw-redirect">Winmodems</a>) cannot tolerate more than one of the same device inside a single computer. Symptoms of incompatibility include crashes, <a href="/wiki/Blue_screen_of_death" title="Blue screen of death" class="mw-redirect">blue screens of death</a>, or simple inoperability of all but a single modem. External <a href="/wiki/RS232" title="RS232" class="mw-redirect">RS232</a>-based (serial) modems do not have this limitation because each modem contains its own <a href="/wiki/Microprocessor" title="Microprocessor">microprocessor</a> and is unaware of other modems on the same host. <a href="/wiki/USB" title="USB" class="mw-redirect">USB</a> modems may or may not have this problem, because some USB modems are simply serial modems with a "USB-to-serial" converter chipset (in which case there should be no problem), and other USB modems are "host-controlled" and are essentially externally-attached Winmodems (in which case the problem may persist).</li>
</ul>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Plus_versus_Hash"><span class="tocnumber">1</span> <span class="toctext">Plus versus Hash</span></a></li>
<li class="toclevel-1"><a href="#Detecting_voice_mode"><span class="tocnumber">2</span> <span class="toctext">Detecting voice mode</span></a></li>
<li class="toclevel-1"><a href="#Entering_voice_mode"><span class="tocnumber">3</span> <span class="toctext">Entering voice mode</span></a></li>
<li class="toclevel-1"><a href="#Querying_the_modem.27s_capabilities"><span class="tocnumber">4</span> <span class="toctext">Querying the modem's capabilities</span></a></li>
<li class="toclevel-1"><a href="#Answering_calls"><span class="tocnumber">5</span> <span class="toctext">Answering calls</span></a></li>
<li class="toclevel-1"><a href="#Transmitting_audio_data"><span class="tocnumber">6</span> <span class="toctext">Transmitting audio data</span></a>
<ul>
<li class="toclevel-2"><a href="#Throttling_playback"><span class="tocnumber">6.1</span> <span class="toctext">Throttling playback</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Recording_audio_data"><span class="tocnumber">7</span> <span class="toctext">Recording audio data</span></a></li>
<li class="toclevel-1"><a href="#Terminating_a_voice_call"><span class="tocnumber">8</span> <span class="toctext">Terminating a voice call</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">10</span> <span class="toctext">See also</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Plus_versus_Hash" id="Plus_versus_Hash"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=1" title="Edit section: Plus versus Hash">edit</a>]</span> <span class="mw-headline">Plus versus Hash</span></h2>
<p>Each voice modem platform tends to support either one of two sets of voice commands - in particular, one flavor of the command set contains a + sign, and the other contains a # sign.</p>
<p><a name="Detecting_voice_mode" id="Detecting_voice_mode"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=2" title="Edit section: Detecting voice mode">edit</a>]</span> <span class="mw-headline">Detecting voice mode</span></h2>
<p>Support for voice mode can be detected on a modem by issuing the following command: <b>AT+FCLASS=?</b></p>
<p>This command is usually supported containing the plus sign whether a modem supports "plus" or the "hash" command set, because the command (which stands for "fax class") is part of the industry-standard <a href="/wiki/Fax" title="Fax">fax</a> commands which <i>always</i> use the plus.</p>
<p>A modem supporting voice will respond with a comma-delimited list of numbers that includes the number 8. A modem not supporting voice will respond with <b>ERROR</b>, or with a list of numbers not including 8. (Many modems will report <i>0,1,2</i> indicating support for data (0), and class 1 and 2 faxes - this is an indication that voice support is not present.)</p>
<p>Modems supporting the "hash" command set usually respond to <b>AT#CLS=?</b> as well.</p>
<p><a name="Entering_voice_mode" id="Entering_voice_mode"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=3" title="Edit section: Entering voice mode">edit</a>]</span> <span class="mw-headline">Entering voice mode</span></h2>
<p>The command <b>AT+FCLASS=8</b> or <b>AT#CLS=8</b> will put the modem in voice mode. Most modems still remain on-hook and respond with <b>OK</b>. Once this command has been accepted, most modems will respond with <a href="/wiki/Data_Link_Escape" title="Data Link Escape" class="mw-redirect">Data Link Escape</a> (DLE) messages instead of or in addition to normal modem responses. For example, instead of reporting a phone line ringing with the <b>RING</b> message, many modems will instead send the DLE ASCII character, followed by the letter R. The specific set of DLE events reported by each modem is specific to its chipset and documented in its reference guide.</p>
<p><a name="Querying_the_modem.27s_capabilities" id="Querying_the_modem.27s_capabilities"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=4" title="Edit section: Querying the modem's capabilities">edit</a>]</span> <span class="mw-headline">Querying the modem's capabilities</span></h2>
<p>The command <b>AT+VLS=?</b> or <b>AT#VLS=?</b> usually returns a list of operating modes that are specific to each modem. Each of these numbered modes determines the telephone line's on-hook or off-hook status, as well as sound routing between each of the following:</p>
<ul>
<li>Recording/playback</li>
<li>Telephone handset</li>
<li>Speakerphone jack (which could simply be hard-wired as an audio input on the PC's sound card instead of being a discrete jack)</li>
<li>Microphone jack (available on some voice modems)</li>
</ul>
<p>Many chipsets offer a listing of all the possible combinations of modes even if the specific modem board doesn't support them all. That's because the board manufacturer is almost always different from the chipset maker, and the chipset comes pre-configured to support all possible hardware, even if not implemented on the circuit board.</p>
<p>Example of response to AT+VLS=? from a modem on the market in 2006:</p>
<pre>
AT+VLS=?
 0," ",0000000000,0000000000,B084008000
 1,"T",0B8418E000,0FE418E000,0B8419E000
 2,"L",0884008000,0CE4008000,0884018000
 3,"LT",0B8418E000,0FE418E000,0B8419E000
 4,"S",0084008000,0484008000,3084018000
 5,"ST",0B8418E000,0FE418E000,0B8419E000
 6,"M",0084008000,04E4008000,3084008000
 7,"MST",0B8418E000,0FE418E000,0B8419E000
 8,"S1",0084008000,0484008000,3084018000
 9,"S1T",0B8418E000,0FE418E000,0B8419E000
 10,"MS1T",0B8418E000,0FE418E000,0B8419E000
 11,"M1",0084008000,04E4008000,3084008000
 13,"M1S1T",0B8418E000,0FE418E000,0B8419E000
 14,"H",0084008000,04E4008000,3084018000
 15,"HT",0B8418E000,0FE418E000,0B8419E000
 16,"MS",0084008000,04E4008000,3084018000
 17,"MS1",0084008000,04E4008000,3084018000
 19,"M1S1",0084008000,04E4008000,3084018000
 20,"t",0B8418E000,0FE418E000,BB8419E000
</pre>
<p>While every modem is different, usually mode 0 means on-hook (hung up) and mode 1 is sufficient to pick up the phone, record/playback audio, and detect <a href="/wiki/DTMF" title="DTMF" class="mw-redirect">DTMF</a> (touch tones).</p>
<p>The command <b>AT+VSM=?</b> or <b>AT#VSM=?</b> usually returns a list of audio data formats supported by the modem. Each format includes a name (such as <a href="/wiki/PCM" title="PCM" class="mw-redirect">PCM</a>, <a href="/wiki/ADPCM" title="ADPCM" class="mw-redirect">ADPCM</a>, <a href="/wiki/%CE%9C-law" title="Μ-law" class="mw-redirect">μ-law</a>, <a href="/wiki/A-law" title="A-law" class="mw-redirect">A-law</a>), a number of bits per sample (usually 2, 3, 4, 8, or 16) and an audio sampling rate (usually 7200, 8000, or 11025 <a href="/wiki/Hertz" title="Hertz">Hertz</a>). These are industry-standard audio <a href="/wiki/Codecs" title="Codecs" class="mw-redirect">codecs</a> whose implementations are well published. The <a href="/wiki/ADPCM" title="ADPCM" class="mw-redirect">ADPCM</a> standard is one notable exception. Modems claiming to support ADPCM almost always support <a href="/wiki/Dialogic_ADPCM" title="Dialogic ADPCM">Dialogic ADPCM</a>, also known as "VOX", which is similar but not compatible with other ADPCM implementations, including <a href="/wiki/IMA_ADPCM" title="IMA ADPCM" class="mw-redirect">IMA ADPCM</a> (Interactive Multimedia Association) as well as MS ADPCM (a Microsoft implementation used in <a href="/wiki/WAV" title="WAV">WAV</a> files). Modems may support these as well, if a qualifier is listed - otherwise, by default, ADPCM means Dialogic.</p>
<p>Example response to AT+VSM=? from a modem on the market in 2006:</p>
<pre>
AT+VSM=? 
 1,"UNSIGNED PCM",8,0,8000,0,0 
 129,"IMA ADPCM",4,0,8000,0,0 
 130,"UNSIGNED PCM",8,0,8000,0,0 
 140,"2 Bit ADPCM",2,0,8000, 
 141,"4 Bit ADPCM",4,0,8000,0,0 
</pre>
<p>The desired audio data format is selected using the same command but with a number instead of a question mark. It is used for both sending and receiving.</p>
<p><a name="Answering_calls" id="Answering_calls"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=5" title="Edit section: Answering calls">edit</a>]</span> <span class="mw-headline">Answering calls</span></h2>
<p>Answering calls is usually done with either the <b>AT+VLS=n</b> or <b>AT#VLS=n</b> commands, where <i>n</i> is a number representing the modem's mode. Some modems answer in response to <b>ATA</b> - the standard data-mode answer command - but other modems will interpret this as a command to actually answer in data and not voice mode.</p>
<p><a name="Transmitting_audio_data" id="Transmitting_audio_data"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=6" title="Edit section: Transmitting audio data">edit</a>]</span> <span class="mw-headline">Transmitting audio data</span></h2>
<p>To begin transmitting audio data, the host sends the command <b>AT+VTX</b> or <b>AT#VTX</b>. This results in a response from the modem of <b>CONNECT</b> or <b>VCON</b>. (Modems using the "plus" command set usually respond CONNECT, while those using the "hash" set respond VCON, which stands for voice connect).</p>
<p>From then on, the modem interprets any data sent from the computer as wave audio data, using the codec selected by the AT+VSM or AT#VSM command.</p>
<p>The audio data is always sent to the modem slightly faster than it can play it, so the modem may buffer a small portion of it and play it smoothly with no clicks or pops caused by delays in the computer's operating system. For example, during playback of an 8 kHz audio file at 8-bit resolution (which creates 8,000 bytes, or 80,000 bits when including start/stop bits, per second), the data must travel over the serial port at a minimum of 115,200 bits per second. (115,200 bit/s is the first setting of a typical computer serial port that's greater than 80,000). In addition, due to some extra overhead involved in doubling DLE bytes in the stream (mentioned below), a small amount of extra bandwidth is mandatory to allow for this.</p>
<p>When the modem wants the computer to temporarily pause so the playback can catch up, it temporarily lowers the <a href="/wiki/CTS" title="CTS">CTS</a> (Clear-To-Send) signal on the RS232 serial port. The modem re-raises the signal in time for the computer to resume sending audio data before the playback buffer becomes completely empty.</p>
<p>When the computer wants to signal the end of audio data, most modems expect to see an ASCII DLE character (0x10), followed by the&#160;! character.</p>
<p>Because the DLE byte can and often does occur in normal audio data, it must be sent twice to the modem when it is to be interpreted as a byte of audio data.</p>
<p>Most modems also accept a sequence of DLE + CAN (cancel) as a signal to <i>cancel</i> audio playback. The distinction is that the modem is to understand that it is to immediately abort playback now, rather than let remaining data in the playback buffer run to completion.</p>
<p>When the modem is done playback, it responds <b>OK</b>.</p>
<p><a name="Throttling_playback" id="Throttling_playback"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=7" title="Edit section: Throttling playback">edit</a>]</span> <span class="mw-headline">Throttling playback</span></h3>
<p>During playback, it is necessary to send the audio data at a rate that keeps the audio playing smoothly, but without sending it faster than the modem can handle it. It is also desirable to make sure the modem can always abort playback and discard any buffered audio in case a message is to be canceled. Message cancellation is expected by callers who already know the answers to voice prompts and provide their answer early (and who would become irritated at being forced to listen to a prompt they've already responded to).</p>
<p>There are several ways to keep the computer sending audio data to the modem at a rate to keep up with playback without overrunning the audio buffer.</p>
<p>The most straightforward is to use CTS flow control. The following caveats exist.</p>
<ul>
<li>Some voice modems have bugs in their implementation of flow control. In particular, a large number of <a href="/wiki/Conexant" title="Conexant">Conexant</a> chipsets will sometimes drop their CTS line and never bring it back up during playback. Conexant is a hugely popular chipset in voice modems today and they otherwise implement voice commands well, making it worthwhile to consider working around this bug. Some Conexant chipsets will also not bring CTS back up if the "playback abort" command is sent or processed by the modem while CTS is down.</li>
<li>Some voice modems offer a very large transmit buffer (for example, 4 seconds worth of audio) coupled with a bug that prevents the host from requesting an "abort playback". The result is that if a caller presses a touch-tone that's supposed to interrupt a message, and the host is providing unlimited audio data mediated by CTS alone, the end result is that the message can't be interrupted for at least 4 seconds.</li>
</ul>
<p>A second way to throttle playback involves polling a "tick" timer provided by the host computer's operating system and based on a hardware clock that's independent of the host's CPU load. This may or may not be reliable, and it depends entirely on the host operating system. However, when available, it is extremely reliable. It is reasonable to assume that the PC needs to stay ahead of the playback by a couple of hundred bytes and that the modem will buffer this. (The commands AT+VBQ or AT#VBQ on voice modems will often reveal the size of the buffer in bytes, and 1-2 kilobytes is a typical response).</p>
<p>A third way to throttle playback involves inserting dummy DLE messages into the output stream such that the audio data takes a known amount of time to transmit through the serial port, and the playback is essentially clocked by the <a href="/wiki/UART" title="UART" class="mw-redirect">UART</a> in the serial port.</p>
<p>For example, when considering using dummy DLE stuffing, a few things must first be noted. In a typical scenario, one second of audio might be 8000 one-byte samples, and with a small percentage of the samples being equal to the <a href="/wiki/DLE" title="DLE" class="mw-redirect">DLE</a> byte and must be doubled, a typical second of audio might be 8050 bytes. The trick involves inserting enough meaningless DLE messages into the bytes that the modem will discard (that is, a DLE followed by a byte without any specific meaning) so that there are exactly 11520 bytes (assuming a serial port locked at 115200 bit/s) which will take exactly 1 second to transmit through the serial port. Although it is possible that interrupt latency on the host PC may cause slightly less than 11520 bytes to be sent per second, most voice modems will buffer enough bytes before actually starting playback to permit a small skew here. Also the PC can be programmed to convert a second of audio into slightly fewer than 11520 bytes (all voice modems will buffer a small overrun without the need for flow control as long as it is no more than a few hundred bytes).</p>
<p>Dummy DLE stuffing is unlikely to work with "<a href="/wiki/Winmodem" title="Winmodem" class="mw-redirect">Winmodems</a>" that have no physical UART. It makes sense only with external serial modems that are physically clocked to a specific bit rate by a <a href="/wiki/Clock_generator" title="Clock generator">clock generator</a> behind the external serial port.</p>
<p><a name="Recording_audio_data" id="Recording_audio_data"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=8" title="Edit section: Recording audio data">edit</a>]</span> <span class="mw-headline">Recording audio data</span></h2>
<p>The method for recording audio data is the same, except that the command is <b>AT+VRX</b> or <b>AT#VRX</b>, and the modem transmits audio data while the computer receives it. The RTS/CTS flow control are not used here (the computer must accept all the audio data it receives, and the modem automatically paces its transmission to match the audio sampling rate).</p>
<p>The modem never stops transmitting until the computer tells it to stop, which is usually with CTRL-C. The data is always terminated with DLE+!, and all DLE bytes naturally occurring in the stream are sent twice to differentiate them from normal DLE messages.</p>
<p>Before, during, and after recording, the modem may notify the computer host of specific events including, but not limited to, the following:</p>
<ul>
<li>Touch-tone keypresses detected</li>
<li>Silence detected</li>
<li>Line polarity reversal detected (often meaning caller hung up)</li>
<li>Dial tone detected</li>
<li>Fax tone detected</li>
</ul>
<p>When the modem wants to tell the host about these, it sends a DLE byte, plus a (usually) 1-byte message describing the event. The list of supported events varies by modem, but usually a digit (as well as * and #) mean touch-tones pressed, and the letter "s" means silence detected. Some modems report only one event for each touch-tone keypress, while others report a keypress repeatedly until the key is released, and then a special "key released" event.</p>
<p><a name="Terminating_a_voice_call" id="Terminating_a_voice_call"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=9" title="Edit section: Terminating a voice call">edit</a>]</span> <span class="mw-headline">Terminating a voice call</span></h2>
<p>Any of the following commands usually cause the modem to hang up and terminate a voice call: <b>AT+VLS=0</b>, <b>AT#VLS=0</b>, <b>ATH</b>, <b>ATZ</b>. Dropping the <a href="/wiki/RS232" title="RS232" class="mw-redirect">RS232</a> <a href="/wiki/DTR" title="DTR">DTR</a> (data terminal ready) signal often accomplishes this as well. The modem remains in voice mode (except in the case of ATZ).</p>
<p>Voice modems do not automatically hang up even when the caller on the other end does. They may report the hangup, dialtone, or silence events, but it is up to the computer to act upon them. If when the modem is recording, the caller hangs up and the computer doesn't react, the modem will continue providing the audio recording everything else heard on the line, such as dial tones, telephone company error messages, and so forth.</p>
<p><a name="References" id="References"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=10" title="Edit section: References">edit</a>]</span> <span class="mw-headline">References</span></h2>
<ul>
<li><b>AT command reference manual</b> for Rockwell, Conexant, and Lucent chipsets. <i>(Each chipset manufacturer produces a manual with this same title, followed by the name of the product to which it applies)</i></li>
<li>Zoom Tech Support Documentation, <a href="http://www.zoom.com/techsupport/dial_up/docs.shtml" class="external text" title="http://www.zoom.com/techsupport/dial_up/docs.shtml" rel="nofollow">AT Command References</a></li>
</ul>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit&amp;section=11" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="/wiki/Hayes_command_set" title="Hayes command set">Hayes command set</a></li>
<li><a href="/wiki/Telephony" title="Telephony">Telephony</a></li>
<li><a href="/wiki/V.253" title="V.253" class="mw-redirect">V.253</a></li>
</ul>


<!-- 
NewPP limit report
Preprocessor node count: 12/1000000
Post-expand include size: 0/2048000 bytes
Template argument size: 0/2048000 bytes
Expensive parser function count: 0/500
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:8041438-0!1!0!default!!en!2 and timestamp 20090320105628 -->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org/wiki/Voice_modem_command_set">http://en.wikipedia.org/wiki/Voice_modem_command_set</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/Category:Modems" title="Category:Modems">Modems</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Voice_modem_command_set" title="View the content page [c]" accesskey="c">Article</a></li>
				 <li id="ca-talk"><a href="/wiki/Talk:Voice_modem_command_set" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=Voice_modem_command_set&amp;action=edit" title="You can edit this page. &#10;Please use the preview button before saving. [e]" accesskey="e">Edit this page</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=Voice_modem_command_set&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Voice_modem_command_set" title="You are encouraged to log in; however, it is not mandatory. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li>
				<li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content — the best of Wikipedia">Featured content</a></li>
				<li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search Wikipedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if one exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search Wikipedia for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-interaction'>
		<h5>Interaction</h5>
		<div class='pBody'>
			<ul>
				<li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li>
				<li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-contact"><a href="/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Donate" title="Support us">Donate to Wikipedia</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Voice_modem_command_set" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Voice_modem_command_set" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Wikipedia:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=Voice_modem_command_set&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=Voice_modem_command_set&amp;oldid=278510624" title="Permanent link to this version of the page">Permanent link</a></li><li id="t-cite"><a href="/w/index.php?title=Special:Cite&amp;page=Voice_modem_command_set&amp;id=278510624">Cite this page</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>Languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-uk"><a href="http://uk.wikipedia.org/wiki/%D0%93%D0%BE%D0%BB%D0%BE%D1%81%D0%BE%D0%B2%D0%B8%D0%B9_%D0%BC%D0%BE%D0%B4%D0%B5%D0%BC">Українська</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 20 March 2009, at 10:56.</li>
					<li id="copyright">All text is available under the terms of the <a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Copyrights" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc.</a>, a U.S. registered <a class='internal' href="http://en.wikipedia.org/wiki/501%28c%29#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="http://en.wikipedia.org/wiki/Non-profit_organization" title="Non-profit organization">nonprofit</a> <a href="http://en.wikipedia.org/wiki/Charitable_organization" title="Charitable organization">charity</a>.<br /></li>
					<li id="privacy"><a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
					<li id="disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served by srv133 in 0.048 secs. --></body></html>
