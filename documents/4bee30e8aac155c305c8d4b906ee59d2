<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15alpha" />
		<meta name="keywords" content="Charlieplexing,Duty cycle,Electric Current,General Purpose Input/Output,High impedance,Light emitting diode,Lossy compression,Maxim Integrated Products,Microcomputer,Microcontroller,Microprocessor" />
		<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Charlieplexing&amp;action=edit" />
		<link rel="edit" title="Edit this page" href="/w/index.php?title=Charlieplexing&amp;action=edit" />
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<link rel="alternate" type="application/rss+xml" title="Wikipedia RSS Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Charlieplexing - Wikipedia, the free encyclopedia</title>
		<link rel="stylesheet" href="/skins-1.5/common/shared.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/common/commonPrint.css?207xx" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins-1.5/monobook/main.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/chick/main.css?207xx" type="text/css" media="handheld" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE50Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE55Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins-1.5/monobook/IE60Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins-1.5/monobook/IE70Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Handheld.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="handheld" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=2678400&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js?207xx"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins-1.5";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://en.wikipedia.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Charlieplexing";
		var wgTitle = "Charlieplexing";
		var wgAction = "view";
		var wgArticleId = "5906299";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 285860979;
		var wgVersion = "1.15alpha";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgMWSuggestTemplate = "http://en.wikipedia.org/w/api.php?action=opensearch\x26search={searchTerms}\x26namespace={namespaces}\x26suggest";
		var wgDBname = "enwiki";
		var wgSearchNamespaces = [0];
		var wgMWSuggestMessages = ["with suggestions", "no suggestions"];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?207xx"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js?207xx"></script>
		<script type="text/javascript" src="/skins-1.5/common/mwsuggest.js?207xx"></script>
<script type="text/javascript">/*<![CDATA[*/
var wgNotice='';var wgNoticeLocal='';
/*]]>*/</script>		<script type="text/javascript" src="http://upload.wikimedia.org/centralnotice/wikipedia/en/centralnotice.js?207xx"></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Charlieplexing skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><script type='text/javascript'>if (wgNotice != '') document.writeln(wgNotice);</script></div>		<h1 id="firstHeading" class="firstHeading">Charlieplexing</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><b>Charlieplexing</b> is a technique proposed in early 1995 by Charlie Allen at <a href="/wiki/Maxim_Integrated_Products" title="Maxim Integrated Products">Maxim Integrated Products</a> for driving a <a href="/wiki/Multiplexed_display" title="Multiplexed display">multiplexed display</a> in which relatively few <a href="/wiki/General_Purpose_Input/Output" title="General Purpose Input/Output">I/O pins</a> on a <a href="/wiki/Microcontroller" title="Microcontroller">microcontroller</a> are used to drive an array of <a href="/wiki/Light_emitting_diode" title="Light emitting diode" class="mw-redirect">LEDs</a>. The method utilizes the tri-state logic capabilities of microcontrollers in order to gain efficiency over traditional multiplexing. Although it is more efficient in its use of IO, there are issues that cause it to be more complicated to design and render it impractical for larger displays. These issues include duty cycle, current requirements and the forward voltages of the LEDs.</p>
<div class="thumb tright">
<div class="thumbinner" style="width:182px;"><a href="/wiki/File:Sandorclock.jpg" class="image" title="A Charlieplexed digital clock which controls 90 LEDs with 10 pins of a PIC16C54 microcontroller. Click to enlarge picture.[1]"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Sandorclock.jpg/180px-Sandorclock.jpg" width="180" height="136" border="0" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Sandorclock.jpg" class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
A Charlieplexed digital clock which controls 90 LEDs with 10 pins of a PIC16C54 microcontroller. Click to enlarge picture.<sup id="cite_ref-0" class="reference"><a href="#cite_note-0" title=""><span>[</span>1<span>]</span></a></sup></div>
</div>
</div>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Traditional_multiplexing"><span class="tocnumber">1</span> <span class="toctext">Traditional multiplexing</span></a></li>
<li class="toclevel-1"><a href="#Charlieplexing"><span class="tocnumber">2</span> <span class="toctext">Charlieplexing</span></a>
<ul>
<li class="toclevel-2"><a href="#Complementary_drive"><span class="tocnumber">2.1</span> <span class="toctext">Complementary drive</span></a></li>
<li class="toclevel-2"><a href="#Expanding:_tri-state_logic"><span class="tocnumber">2.2</span> <span class="toctext">Expanding: tri-state logic</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Problems_with_charlieplexing"><span class="tocnumber">3</span> <span class="toctext">Problems with charlieplexing</span></a>
<ul>
<li class="toclevel-2"><a href="#Refresh_rate"><span class="tocnumber">3.1</span> <span class="toctext">Refresh rate</span></a></li>
<li class="toclevel-2"><a href="#Peak_current"><span class="tocnumber">3.2</span> <span class="toctext">Peak current</span></a></li>
<li class="toclevel-2"><a href="#Requirement_for_tristate"><span class="tocnumber">3.3</span> <span class="toctext">Requirement for tristate</span></a></li>
<li class="toclevel-2"><a href="#Complexity"><span class="tocnumber">3.4</span> <span class="toctext">Complexity</span></a></li>
<li class="toclevel-2"><a href="#Forward_voltage"><span class="tocnumber">3.5</span> <span class="toctext">Forward voltage</span></a></li>
<li class="toclevel-2"><a href="#LED_failure"><span class="tocnumber">3.6</span> <span class="toctext">LED failure</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Input_data_multiplexing"><span class="tocnumber">4</span> <span class="toctext">Input data multiplexing</span></a></li>
<li class="toclevel-1"><a href="#Resources"><span class="tocnumber">5</span> <span class="toctext">Resources</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Traditional_multiplexing" id="Traditional_multiplexing"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=1" title="Edit section: Traditional multiplexing">edit</a>]</span> <span class="mw-headline">Traditional multiplexing</span></h2>
<p>Display multiplexing is very different from multiplexing used in data transmission, although it has the same basic principles. In display multiplexing, the data lines of the displays are connected together in parallel to a common bus on the microcontroller. Then, the displays are turned on individually and addresses when they turn on. This allows one to use fewer I/O pins than it would normally take to drive the same number of displays directly.</p>
<p>When using charlieplexing, <i>n</i> drive pins can drive <i>n</i> digits with <i>n-1</i> segments. When simplified, it equates to <i>n</i> pins being able to drive <i>n<sup>2</sup>-n</i> segments or LEDs. Traditional multiplexing takes many more pins to drive the same number of LEDs; <i>2n</i> pins must be used to drive <i>n<sup>2</sup></i> LEDs (though a 1-of-n decoder chip can be used to reduce the number of microcontroller IO pins to <img class="tex" alt="n+\lceil\log_2n\rceil" src="http://upload.wikimedia.org/math/7/3/0/730ab1361d5b146243d64c91183ca03a.png" />).</p>
<p><a name="Charlieplexing" id="Charlieplexing"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=2" title="Edit section: Charlieplexing">edit</a>]</span> <span class="mw-headline">Charlieplexing</span></h2>
<p><a name="Complementary_drive" id="Complementary_drive"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=3" title="Edit section: Complementary drive">edit</a>]</span> <span class="mw-headline">Complementary drive</span></h3>
<p>Charlieplexing, in its simplest form, works using a matrix of complementary pairs of LEDs. The simplest possible charlieplexed matrix would look like this:<br />
<a href="/wiki/File:Complementary_Drive.png" class="image" title="Image:Complementary_Drive.png"><img alt="Image:Complementary_Drive.png" src="http://upload.wikimedia.org/wikipedia/commons/a/ad/Complementary_Drive.png" width="255" height="191" border="0" /></a><br />
By applying a positive charge to pin 1 and grounding pin 2, LED 1 will light. Since LEDs do not conduct electricity in reverse, LED 2 will stay unlit. If we reverse the charges on pin 1 and pin 2, LED 2 will light and LED 1 will be unlit.</p>
<p><a name="Expanding:_tri-state_logic" id="Expanding:_tri-state_logic"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=4" title="Edit section: Expanding: tri-state logic">edit</a>]</span> <span class="mw-headline">Expanding: tri-state logic</span></h3>
<p>If we were to expand this circuit to accommodate 3 pins and 6 LEDs, it would look like this:</p>
<p><a href="/wiki/File:3_Pin_Charlieplexing.png" class="image" title="Image:3_Pin_Charlieplexing.png"><img alt="Image:3_Pin_Charlieplexing.png" src="http://upload.wikimedia.org/wikipedia/commons/9/99/3_Pin_Charlieplexing.png" width="440" height="266" border="0" /></a></p>
<p>This presents a problem however. In order for this circuit to act like the previous one, we must disconnect one of the pins before applying charge to the remaining two. This can be solved by utilizing the <a href="/wiki/Three_State_Logic" title="Three State Logic" class="mw-redirect">tri-state logic</a> properties of microcontroller pins. Microcontroller pins generally have three states, 5V, 0V and input. Input mode puts the pin into a <a href="/wiki/High_impedance" title="High impedance">high impedance</a> state which, electrically speaking, “disconnects” that pin from the circuit, meaning little or no current will flow through it. This allows for the circuit to see any number of pins connected at any time, simply by changing the state of the pin. In order to drive the 6 LED matrix above, the two pins corresponding to the LED we wish to light are connected to 5V and 0V while the third pin is set in its input state. In doing so, we prevent current leakage out of the third pin, ensuring that the LED we wish to light is the only one lit.<br /></p>
<p>By using tri-state logic, the matrix can theoretically be expanded to any size, as long as pins are available. Any LED can be lit by applying 5V and 0V to its corresponding pins and setting all of the other pins connected to the matrix to input mode.</p>
<p><a name="Problems_with_charlieplexing" id="Problems_with_charlieplexing"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=5" title="Edit section: Problems with charlieplexing">edit</a>]</span> <span class="mw-headline">Problems with charlieplexing</span></h2>
<p><a name="Refresh_rate" id="Refresh_rate"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=6" title="Edit section: Refresh rate">edit</a>]</span> <span class="mw-headline">Refresh rate</span></h3>
<p>Because only a single set of LEDs all sharing a common anode or cathode can be lit simultaneously without turning on unintended LEDs, charlieplexing requires frequent output changes, through a method known as flickering. When flickering is done, not all LEDs are lit quite simultaneously, but rather one set of LEDs is lit briefly, then another set, then another, and eventually the cycle repeats. If it is done fast enough, they will appear to all be on, all the time, to the human eye. In order for a display to not have any noticeable flicker, the <a href="/wiki/Refresh_rate" title="Refresh rate">refresh rate</a> for each LED must be greater than 50Hz. Suppose 8 bits are used to control 56 LEDs via Charlieplexing, which is enough for 8 7-segment displays (without decimal points). Typically 7-segment displays are made to have a common cathode, sometimes a common anode, but without loss of generality suppose it is a common cathode. All LEDs in all 8 7-segment displays cannot be turned on simultaneously in any desired combination via Charlieplexing. It is impossible to get 56 bits of information directly from 8 trits of information. Instead, the human eye must be fooled by use of a flicker. Only one 7-segment display, one set of 7 LEDs can be active at any time. The way this would be done is for the 8 common cathodes of the 8 displays to each get assigned to its own unique pin among the 8 I/O ports. At any time, one and only one of the 8 controlling I/O pins will be actively low, and thus only the 7-segment display with its common cathode connected to that actively low pin can have any of its LEDs on. That is the active 7-segment display. The anodes of the 7 LED segments within the active 7-segment display can then be turned on in any combination by having the other 7 I/O ports either high or in high-impedance mode, in any combination. They are connected to the remaining 7 pins, but through resistors (the common cathode connection is connected to the pin itself, not through a resistor, because otherwise the current through each individual segment would depend on the number of total segments turned on, as they'd all have to share a single resistor). But to show a desired number using all 8 digits, only one 7-segment display can be shown at a time, so all 8 must be cycled through separately, and in a 50th of a second for the entire period of 8. Thus the display must be refreshed at 400 Hz for the period-8 cycle through all 8 segments to make the LEDs flash no slower than 50 times per second. This requires constant interruption of whatever additional processing the controller performs, 400 times per second.</p>
<p><a name="Peak_current" id="Peak_current"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=7" title="Edit section: Peak current">edit</a>]</span> <span class="mw-headline">Peak current</span></h3>
<p>Due to the decreased <a href="/wiki/Duty_cycle" title="Duty cycle">duty cycle</a>, the <a href="/wiki/Electric_Current" title="Electric Current" class="mw-redirect">current</a> requirement of a charlieplexed display increases much faster than it would with a traditionally multiplexed display. As the display gets larger, the average current flowing through the LED must be (roughly) constant in order for it to maintain constant brightness, thus requiring the peak current to increase proportionally. This causes a number of issues that limit the practical size of a charlieplexed display.</p>
<ul>
<li>LEDs often have a maximum peak current rating as well as an average current rating.</li>
<li>If the microcontroller code crashes the LED left lit is under much higher stress than in a traditionally multiplexed display increasing the risk of a failure before the fault is spotted.</li>
</ul>
<p><a name="Requirement_for_tristate" id="Requirement_for_tristate"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=8" title="Edit section: Requirement for tristate">edit</a>]</span> <span class="mw-headline">Requirement for tristate</span></h3>
<p>All the outputs used to drive a charlieplexed display must be tristate. If the current is low enough to drive the displays directly off the IO pins of the microcontroller this is no problem but if external tristates must be used then each tristate will generally require two output lines to control eliminating most of the advantage of a charlieplexed display. Since the current from microcontroller pins is typically limited to 20mA or so this severely restricts the practical size of a charlieplexed display.</p>
<p><a name="Complexity" id="Complexity"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=9" title="Edit section: Complexity">edit</a>]</span> <span class="mw-headline">Complexity</span></h3>
<p>Charlieplex matrices are much more complicated, both in the required PC Board layout and microcontroller progamming, than are traditional multiplex matricies. This increases design time.</p>
<p><a name="Forward_voltage" id="Forward_voltage"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=10" title="Edit section: Forward voltage">edit</a>]</span> <span class="mw-headline">Forward voltage</span></h3>
<p>When using LEDs with different forward <a href="/wiki/Voltage" title="Voltage">voltages</a>, like when using different color LEDs, problems can exist where other LEDs will light when not wanted to.</p>
<p>If we look at the diagram above we notice that if LED 6 has a four volt forward voltage, and LED’s 1 and 3 have forward voltages of two volts or less, they will light when LED 6 is intended to, as their current path is shorter. This issue can easily be avoided by checking the forward voltages of the LEDs used in the matrix and checking for compatibility issues. Or, more simply, using LEDs that have the same forward voltage.<sup id="cite_ref-1" class="reference"><a href="#cite_note-1" title=""><span>[</span>2<span>]</span></a></sup><sup id="cite_ref-2" class="reference"><a href="#cite_note-2" title=""><span>[</span>3<span>]</span></a></sup><sup id="cite_ref-3" class="reference"><a href="#cite_note-3" title=""><span>[</span>4<span>]</span></a></sup></p>
<p><a name="LED_failure" id="LED_failure"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=11" title="Edit section: LED failure">edit</a>]</span> <span class="mw-headline">LED failure</span></h3>
<p>If a single LED fails, either by becoming an open circuit, by becoming a short-circuit, or becoming leaky (developing a parasitic parallel resistance which allows current in both directions), the impact will be catastrophic for the display as a whole and furthermore the actual problem LED may be notoriously difficult to identify, as not just a single but potentially large set of LEDs which should not be lit may all come on together, and without detailed knowledge of the circuit, the relation between which LED is bad and what set of LEDs all come on together cannot be easily established. If the failed LED becomes an open circuit, the voltage between the LEDs 2 electrodes may build up until it finds a path through two LEDs. There are as many such paths as there are pins used to control the array minus 2; if the LED with anode at node m and cathode at node n fails in this way, it may be that every single pair of LEDs in which one's anode is node m, cathode is p for any value of p (with the exceptions that p cannot be m or n, so there are as many possible choices for p as the number of pins controlling the array minus 2), along with the LED whose anode is p and cathode is n, will all light up. If there are 8 I/O pins controlling the array, this means there will be 6 parasitic paths through pairs of 2 LEDs, and 12 LEDs may be unintentionally lit, but fortunately this will only happen when the one bad LED is supposed to come on, which may be a small fraction of the time, and will exhibit no deleterious symptoms when the problem LED is not supposed to be lit. If the problem is a short between nodes x and y, then every time any LED U with either x or y as its anode or cathode and some node z as its other electrode is supposed to come on (without loss of generality, suppose U's cathode is connected to x), the LED V with cathode y and anode z will light as well, so any time EITHER node x or y is activated as an anode OR a cathode, two LEDs will come on instead of one. In this case, it lights only one additional LED unintentionally, but it does it far more frequently; not merely when the failed LED is supposed to come on, but when ANY LED which has a pin in common with the failed LED is supposed to come on. The problem elements become especially difficult to identify if there are two or more LEDs at fault. What this means is that unlike most methods in which the loss of a single LED merely causes a single burned-out segment, when Charlieplexing is used, one or two burned-out LEDs, whatever the mode of failure, will almost certainly cause a catastrophic cascade of unintended lightings of the LEDs that still work, very likely rendering the entire device completely and immediately unusable. This must be taken into account when considering the required lifetime and failure characteristics of the device being designed.</p>
<p><a name="Input_data_multiplexing" id="Input_data_multiplexing"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=12" title="Edit section: Input data multiplexing">edit</a>]</span> <span class="mw-headline">Input data multiplexing</span></h2>
<p>Charlieplexing can also be used to multiplex digital input signals into a microcontroller. The same diode circuits are used, except a switch is placed in series with each diode. To read whether a switch is open or closed, the microcontroller configures one pin as an input with an internal pull-up resistor. The other pin is configured as an output and set to logic-low. If the input pin reads low then the switch is closed, and if the input pin reads high then the switch is open. <sup id="cite_ref-4" class="reference"><a href="#cite_note-4" title=""><span>[</span>5<span>]</span></a></sup></p>
<p>One potential application for this is to read a standard (4x3) 12-key numeric keypad using only 4 I/O lines. The traditional row-column scan method requires 4 + 3 = 7 I/O lines. Thus Charlie saves 3 I/O lines; however it adds the expense of 12 diodes, (since the diodes are only free when LEDs are used). This reference<sup id="cite_ref-5" class="reference"><a href="#cite_note-5" title=""><span>[</span>6<span>]</span></a></sup> shows a variation on the circuit that only needs 4 diodes, however that method qualifies as <a href="/wiki/Lossy_compression" title="Lossy compression">lossy compression</a>, because when certain combinations of buttons are pressed simultaneously, those signals interfere with the microcontroller's ability to read certain other buttons. The microcontroller can always detect when the data is corrupt, but there is no guarantee it can sense the original key presses, unless only one button is pressed at a time. (However, it is probably possible to arrange the circuit so that if at most any two adjacent buttons are pressed, then no data loss will occur.) Basically though, the input is only loss-less on the 4 diode circuit if only one button is pressed at a time, or if certain problematic multiple key presses are avoided. In the 12 diode circuit, this is not an issue, and there is always a one-to-one correspondence between button presses and input data. However, there are so many diodes that are required to use the method (especially for larger arrays) that there is generally no cost savings over the traditional row-column scan method, unless for some reason the cost of a diode is only a fraction of the cost of an I/O pin, where that fraction is one over the number of I/O lines.</p>
<p><a name="Resources" id="Resources"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Charlieplexing&amp;action=edit&amp;section=13" title="Edit section: Resources">edit</a>]</span> <span class="mw-headline">Resources</span></h2>
<div class="references-small">
<ol class="references">
<li id="cite_note-0"><b><a href="#cite_ref-0" title="">^</a></b> <a href="http://www.medexamtools.com/calarm.htm" class="external text" title="http://www.medexamtools.com/calarm.htm" rel="nofollow">Medworks's page</a> about the Charlieplexed clock in the picture.</li>
<li id="cite_note-1"><b><a href="#cite_ref-1" title="">^</a></b> <a href="http://www.maxim-ic.com/appnotes.cfm/an_pk/1880" class="external text" title="http://www.maxim-ic.com/appnotes.cfm/an_pk/1880" rel="nofollow">Maxim's appnote</a> on charlieplexing use in their chips.</li>
<li id="cite_note-2"><b><a href="#cite_ref-2" title="">^</a></b> This <a href="http://www.instructables.com/id/E5COF05YF6EP287ITF/" class="external text" title="http://www.instructables.com/id/E5COF05YF6EP287ITF/" rel="nofollow">Instructables article</a> explains both the theory and how to implement the design.</li>
<li id="cite_note-3"><b><a href="#cite_ref-3" title="">^</a></b> <a href="http://www.tinaja.com/glib/muse152.pdf" class="external text" title="http://www.tinaja.com/glib/muse152.pdf" rel="nofollow">Don Lancaster's Tech Musings #152</a> is where the idea of charlieplexing originated.</li>
<li id="cite_note-4"><b><a href="#cite_ref-4" title="">^</a></b> <a href="http://electronicdesign.com/Articles/ArticleID/18652/18652.html" class="external free" title="http://electronicdesign.com/Articles/ArticleID/18652/18652.html" rel="nofollow">http://electronicdesign.com/Articles/ArticleID/18652/18652.html</a></li>
<li id="cite_note-5"><b><a href="#cite_ref-5" title="">^</a></b> <a href="http://electronicdesign.com/Articles/ArticleID/18652/18652.html" class="external free" title="http://electronicdesign.com/Articles/ArticleID/18652/18652.html" rel="nofollow">http://electronicdesign.com/Articles/ArticleID/18652/18652.html</a> Electronic Design Magazine, 1 page article on Charlieplexing for input data</li>
</ol>
</div>
<p><br /></p>
<div class="boilerplate metadata" id="stub">
<table cellpadding="0" cellspacing="0" style="background-color: transparent;">
<tr>
<td><a href="/wiki/File:Commodore64.jpg" class="image" title="Commodore64.jpg"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Commodore64.jpg/35px-Commodore64.jpg" width="35" height="22" border="0" /></a></td>
<td><i>&#160;This <a href="/wiki/Microcomputer" title="Microcomputer">microcomputer</a>/<a href="/wiki/Microprocessor" title="Microprocessor">microprocessor</a>-related article is a <a href="/wiki/Wikipedia:Perfect_stub_article" title="Wikipedia:Perfect stub article" class="mw-redirect">stub</a>. You can <a href="/wiki/Wikipedia:Find_or_fix_a_stub" title="Wikipedia:Find or fix a stub" class="mw-redirect">help</a> Wikipedia by <a href="http://en.wikipedia.org/w/index.php?stub&amp;title=Charlieplexing&amp;action=edit" class="external text" title="http://en.wikipedia.org/w/index.php?stub&amp;title=Charlieplexing&amp;action=edit" rel="nofollow">expanding it</a></i>.</td>
</tr>
</table>
</div>


<!-- 
NewPP limit report
Preprocessor node count: 119/1000000
Post-expand include size: 660/2048000 bytes
Template argument size: 0/2048000 bytes
Expensive parser function count: 0/500
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:5906299-0!1!0!default!!en!2 and timestamp 20090424143516 -->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org/wiki/Charlieplexing">http://en.wikipedia.org/wiki/Charlieplexing</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/Category:Microcomputer_stubs" title="Category:Microcomputer stubs">Microcomputer stubs</a></span> | <span dir='ltr'><a href="/wiki/Category:Digital_circuits" title="Category:Digital circuits">Digital circuits</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Charlieplexing" title="View the content page [c]" accesskey="c">Article</a></li>
				 <li id="ca-talk"><a href="/wiki/Talk:Charlieplexing" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=Charlieplexing&amp;action=edit" title="You can edit this page. &#10;Please use the preview button before saving. [e]" accesskey="e">Edit this page</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=Charlieplexing&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Charlieplexing" title="You are encouraged to log in; however, it is not mandatory. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li>
				<li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content — the best of Wikipedia">Featured content</a></li>
				<li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/w/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Wikipedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if one exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search Wikipedia for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-interaction'>
		<h5>Interaction</h5>
		<div class='pBody'>
			<ul>
				<li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li>
				<li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-contact"><a href="/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Donate" title="Support us">Donate to Wikipedia</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Charlieplexing" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Charlieplexing" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Wikipedia:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=Charlieplexing&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=Charlieplexing&amp;oldid=285860979" title="Permanent link to this version of the page">Permanent link</a></li><li id="t-cite"><a href="/w/index.php?title=Special:Cite&amp;page=Charlieplexing&amp;id=285860979">Cite this page</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>Languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-nl"><a href="http://nl.wikipedia.org/wiki/Charlieplexing">Nederlands</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 24 April 2009, at 14:35 (UTC).</li>
					<li id="copyright">All text is available under the terms of the <a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Copyrights" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc.</a>, a U.S. registered <a class='internal' href="http://en.wikipedia.org/wiki/501%28c%29#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="http://en.wikipedia.org/wiki/Non-profit_organization" title="Non-profit organization">nonprofit</a> <a href="http://en.wikipedia.org/wiki/Charitable_organization" title="Charitable organization">charity</a>.<br /></li>
					<li id="privacy"><a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
					<li id="disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served by srv215 in 0.041 secs. --></body></html>
