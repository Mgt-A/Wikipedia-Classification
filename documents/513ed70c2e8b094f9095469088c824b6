<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15alpha" />
		<meta name="keywords" content="Call stack,Ada (programming language),Assembly language,Automatic memory allocation,Buffer overflow,Burroughs large systems,C++,Calling convention,Common Lisp,Compiler,Computer program" />
		<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Call_stack&amp;action=edit" />
		<link rel="edit" title="Edit this page" href="/w/index.php?title=Call_stack&amp;action=edit" />
		<link rel="apple-touch-icon" href="http://en.wikipedia.org/apple-touch-icon.png" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<link rel="alternate" type="application/rss+xml" title="Wikipedia RSS Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Call stack - Wikipedia, the free encyclopedia</title>
		<link rel="stylesheet" href="/skins-1.5/common/shared.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/common/commonPrint.css?207xx" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins-1.5/monobook/main.css?207xx" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins-1.5/chick/main.css?207xx" type="text/css" media="handheld" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE50Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins-1.5/monobook/IE55Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins-1.5/monobook/IE60Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins-1.5/monobook/IE70Fixes.css?207xx" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Handheld.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" media="handheld" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=2678400&amp;action=raw&amp;maxage=2678400" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=2678400&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js?207xx"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins-1.5";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://en.wikipedia.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Call_stack";
		var wgTitle = "Call stack";
		var wgAction = "view";
		var wgArticleId = "1718105";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 279620111;
		var wgVersion = "1.15alpha";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgMWSuggestTemplate = "http://en.wikipedia.org/w/api.php?action=opensearch\x26search={searchTerms}\x26namespace={namespaces}\x26suggest";
		var wgDBname = "enwiki";
		var wgSearchNamespaces = [0];
		var wgMWSuggestMessages = ["with suggestions", "no suggestions"];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?207xx"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js?207xx"></script>
		<script type="text/javascript" src="/skins-1.5/common/mwsuggest.js?207xx"></script>
<script type="text/javascript">/*<![CDATA[*/
var wgNotice='';var wgNoticeLocal='';
/*]]>*/</script>		<script type="text/javascript" src="http://upload.wikimedia.org/centralnotice/wikipedia/en/centralnotice.js?207xx"></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Call_stack skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><script type='text/javascript'>if (wgNotice != '') document.writeln(wgNotice);</script></div>		<h1 id="firstHeading" class="firstHeading">Call stack</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>In <a href="/wiki/Computer_science" title="Computer science">computer science</a>, a <b>call stack</b> is a dynamic <a href="/wiki/Stack_(data_structure)" title="Stack (data structure)">stack</a> data structure that stores information about the active <a href="/wiki/Subroutine" title="Subroutine">subroutines</a> of a <a href="/wiki/Computer_program" title="Computer program">computer program</a>. This kind of stack is also known as an <b>execution stack</b>, <b>control stack</b>, <b>function stack</b>, or <b>run-time stack</b>, and is often shortened to just "the stack".</p>
<p>A call stack is often used for several related purposes, but the main reason for having one is to keep track of the point to which each active subroutine should return control when it finishes executing. (The active subroutines are those which have been called but have not yet completed execution by returning.) If, for example, a subroutine <code>DrawSquare</code> calls a subroutine <code>DrawLine</code> from four different places, the code of <code>DrawLine</code> must have a way of knowing where to return. This is typically done by code for each call within <code>DrawSquare</code> putting the <a href="/wiki/Memory_address" title="Memory address">address</a> of the <a href="/wiki/Instruction_(computer_science)" title="Instruction (computer science)">instruction</a> after the particular call <a href="/wiki/Statement_(programming)" title="Statement (programming)">statement</a> (the "return address") onto the call stack.</p>
<p>Since the call stack is organized as a <a href="/wiki/Stack_(data_structure)" title="Stack (data structure)">stack</a>, the caller <i>pushes</i> the return address onto the stack, and the called subroutine, when it finishes, <a href="/wiki/Pop_(computer_programming)" title="Pop (computer programming)">pops</a> the return address off the call stack (and transfers control to that address). If a called subroutine calls on to yet another subroutine, it will push its return address onto the call stack, and so on, with the information stacking up and unstacking as the program dictates. If the pushing consumes all of the space allocated for the call stack, an error called a <a href="/wiki/Stack_overflow" title="Stack overflow">stack overflow</a> occurs. Adding a subroutine's entry to the call stack is sometimes called <b>winding</b>; conversely, removing entries is <b>unwinding</b>.</p>
<p>There is usually exactly one call stack associated with a running program (or more accurately, with each <a href="/wiki/Task_(computers)" title="Task (computers)">task</a> or <a href="/wiki/Thread_(computer_science)" title="Thread (computer science)">thread</a> of a <a href="/wiki/Process_(computing)" title="Process (computing)">process</a>), although additional stacks may be created for <a href="/wiki/Signal_(computing)" title="Signal (computing)">signal</a> handling or <a href="/wiki/Cooperative_multitasking" title="Cooperative multitasking" class="mw-redirect">cooperative multitasking</a> (as with <a href="/wiki/Setcontext" title="Setcontext">setcontext</a>). Since there is only one in this important context, it can be referred to as <i>the</i> stack (implicitly, "of the task").</p>
<p>In <a href="/wiki/High-level_programming_language" title="High-level programming language">high-level programming languages</a>, the specifics of the call stack are usually hidden from the programmer. They are given access only to the list of functions, and not the memory on the stack itself. Most <a href="/wiki/Assembly_language" title="Assembly language">assembly languages</a>, on the other hand, require programmers to be involved with manipulating the stack. The actual details of the stack in a <a href="/wiki/Programming_language" title="Programming language">programming language</a> depend upon the <a href="/wiki/Compiler" title="Compiler">compiler</a>, <a href="/wiki/Operating_system" title="Operating system">operating system</a>, and the available <a href="/wiki/Instruction_set" title="Instruction set">instruction set</a>.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Functions_of_the_call_stack"><span class="tocnumber">1</span> <span class="toctext">Functions of the call stack</span></a></li>
<li class="toclevel-1"><a href="#Structure"><span class="tocnumber">2</span> <span class="toctext">Structure</span></a></li>
<li class="toclevel-1"><a href="#Use"><span class="tocnumber">3</span> <span class="toctext">Use</span></a>
<ul>
<li class="toclevel-2"><a href="#Call_site_processing"><span class="tocnumber">3.1</span> <span class="toctext">Call site processing</span></a></li>
<li class="toclevel-2"><a href="#Callee_processing"><span class="tocnumber">3.2</span> <span class="toctext">Callee processing</span></a></li>
<li class="toclevel-2"><a href="#Return_processing"><span class="tocnumber">3.3</span> <span class="toctext">Return processing</span></a></li>
<li class="toclevel-2"><a href="#Unwinding"><span class="tocnumber">3.4</span> <span class="toctext">Unwinding</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Call_Stacks_and_Software_Testing"><span class="tocnumber">4</span> <span class="toctext">Call Stacks and Software Testing</span></a></li>
<li class="toclevel-1"><a href="#Performance_analysis"><span class="tocnumber">5</span> <span class="toctext">Performance analysis</span></a></li>
<li class="toclevel-1"><a href="#Security"><span class="tocnumber">6</span> <span class="toctext">Security</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">8</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#External_links"><span class="tocnumber">9</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Functions_of_the_call_stack" id="Functions_of_the_call_stack"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=1" title="Edit section: Functions of the call stack">edit</a>]</span> <span class="mw-headline">Functions of the call stack</span></h2>
<p>As noted above, the primary purpose of a call stack is:</p>
<ul>
<li><b>Storing the return address</b> – When a subroutine is called, the location of the instruction to return to needs to be saved somewhere. Using a stack to save the return address has important advantages over alternatives. One is that each task has its own stack, and thus the subroutine can be <a href="/wiki/Reentrant_(subroutine)" title="Reentrant (subroutine)">reentrant</a>, that is, can be active simultaneously for different tasks doing different things. Another benefit is that <a href="/wiki/Recursion_(computer_science)" title="Recursion (computer science)">recursion</a> is automatically supported. When a function calls itself recursively, a return address needs to be stored for each activation of the function so that it can later be used to return from the function activation. This capability is automatic with a stack.</li>
</ul>
<p>A call stack may serve additional functions, depending on the language, operating system, and machine environment. Among them can be:</p>
<ul>
<li><b>Local data storage</b> – A subroutine frequently needs memory space for storing the values of <a href="/wiki/Local_variable" title="Local variable">local variables</a>, the variables that are known only within the active subroutine and do not retain values after it returns. It is often convenient to allocate space for this use by simply moving the top of the stack by enough to provide the space. This is very fast to do compared with, say, a <a href="/wiki/Dynamic_memory_allocation" title="Dynamic memory allocation">heap</a> allocation. Note that each separate activation of a subroutine gets its own separate space in the stack for locals.</li>
</ul>
<ul>
<li><b>Parameter passing</b> – Subroutines often require that values for <a href="/wiki/Parameter_(computer_science)" title="Parameter (computer science)">parameters</a> be supplied to them by the code which calls them, and it is not uncommon that space for these parameters may be laid out in the call stack. Generally if there are only a few small parameters, processor <a href="/wiki/Processor_register" title="Processor register">registers</a> will be used to pass the values, but if there are more parameters than can be handled this way, memory space will be needed. The call stack works well as a place for these parameters, especially since each call to a subroutine, which will have differing values for parameters, will be given separate space on the call stack for those values.</li>
</ul>
<ul>
<li><b>Evaluation stack</b> – Operands for arithmetic or logical operations are most often placed into register and operated on there. However, in some situations the operands may be stacked up to an arbitrary depth, which means something more than registers must be used. The stack of such operands, rather like that in an <a href="/wiki/RPN_calculator" title="RPN calculator" class="mw-redirect">RPN calculator</a>, is called an evaluation stack, and may occupy space in the call stack.</li>
</ul>
<ul>
<li><b>Pointer to current instance</b> - Some <a href="/wiki/Object-oriented_language" title="Object-oriented language" class="mw-redirect">object-oriented languages</a> (e.g., <a href="/wiki/C%2B%2B" title="C++">C++</a>), store the <a href="/wiki/This_(computer_science)" title="This (computer science)"><i>this</i> pointer</a> along with function arguments in the call stack when invoking methods. The <i>this</i> pointer points to the <a href="/wiki/Object_(computer_science)" title="Object (computer science)">object</a> <a href="/wiki/Instance" title="Instance" class="mw-redirect">instance</a> associated with the method to be invoked. The <i>this</i> pointer is an essential part of the execution context in object oriented languages, since it provides access to member data and the <a href="/wiki/Virtual_method_table" title="Virtual method table">V-Table</a> of the current object. The <i>this</i> pointer links <a href="/wiki/Layer" title="Layer">layers</a> used in <a href="/wiki/Object-oriented_design" title="Object-oriented design">object-oriented design</a> with layers (types of stack frames) of the run-time call stack.</li>
</ul>
<ul>
<li><b>Enclosing subroutine context</b> - Some programming languages (e.g., <a href="/wiki/Pascal_(programming_language)" title="Pascal (programming language)">Pascal</a> and <a href="/wiki/Ada_(programming_language)" title="Ada (programming language)">Ada</a>) support <a href="/wiki/Nested_functions" title="Nested functions" class="mw-redirect">nested subroutines</a>, allowing an inner routine to access the context of its outer enclosing routine, i.e., the parameters and local variables within the scope of the outer routine. Such static nesting can repeat - a function declared within a function declared within a function... The implementation must provide a means by which a called function at any given static nesting level can reference the enclosing frame at each enclosing nesting level. Commonly this reference is implemented by a pointer to the encompassing frame, called a "downstack link" or "static link", to distinguish it from the "dynamic link" that refers to the immediate caller (which need not be the static parent function). For example, languages often allow inner routines to call themselves recursively, resulting in multiple call frames for the inner routine's invocations, all of whose static links point to the same outer routine context. Instead of a static link, the references to the enclosing static frames may be collected into an array of pointers known as a <i>display</i> which is indexed to locate a desired frame. The Burroughs B6500 had such a display in hardware that supported up to 32 levels of static nesting.</li>
</ul>
<ul>
<li><b>Other return state</b> – Besides the return address, in some environments there may be other machine or software states that need to be restored when a subroutine returns. This might include things like privilege level, exception handling information, arithmetic modes, and so on. If needed, this may be stored in the call stack just as the return address is.</li>
</ul>
<p>The typical call stack is used for the return address, locals, and parameters (known as a <i>call frame</i>). In some environments there may be more or fewer functions assigned to the call stack. In the <a href="/wiki/Forth_(programming_language)" title="Forth (programming language)">Forth programming language</a>, for example, only the return address and local variables are stored on the call stack (which in that environment is named the <i>return stack</i>); parameters are stored on a separate <i>data stack</i>. Most Forths also have a third stack for <a href="/wiki/Floating_point" title="Floating point">floating point</a> parameters.</p>
<p><a name="Structure" id="Structure"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=2" title="Edit section: Structure">edit</a>]</span> <span class="mw-headline">Structure</span></h2>
<p>A call stack is composed of <b>stack frames</b> (sometimes called <b>activation records</b>). These are <a href="/wiki/Machine_dependent" title="Machine dependent" class="mw-redirect">machine dependent</a> data structures containing subroutine state information. Each stack frame corresponds to a call to a subroutine which has not yet terminated with a return. For example, if a subroutine named <code>DrawLine</code> is currently running, having just been called by a subroutine <code>DrawSquare</code>, the top part of the call stack might be laid out like this (where the stack is growing towards the top):</p>
<div class="center">
<div class="floatnone"><a href="/wiki/File:Call_stack_layout.svg" class="image" title="Call stack layout.svg"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Call_stack_layout.svg/342px-Call_stack_layout.svg.png" width="342" height="279" border="0" /></a></div>
</div>
<p>The stack frame at the top of the stack is for the currently executing routine. In the most common approach the stack frame includes space for the local variables of the routine, the return address back to the routine's caller, and the parameter values passed into the routine. The stack is often accessed via a register called the <b>stack pointer</b>, which also serves to indicate the current top of the stack. Alternatively, memory within the frame may be accessed via a separate register, often termed the <b>frame pointer</b>, which typically points to some fixed point in the frame structure, such as the location for the return address.</p>
<p>Stack frames are not all the same size. Different subroutines have differing numbers of parameters, so that part of the stack frame will be different for different subroutines, although usually fixed across all activations of a particular subroutine. Similarly, the amount of space needed for local variables will be different for different subroutines. In fact, some languages support dynamic allocations of memory for local variables on the stack, in which case the size of the locals area will vary from activation to activation of a subroutine, and is not known when the subroutine is <a href="/wiki/Compiler" title="Compiler">compiled</a>. In the latter case, access via a frame pointer, rather than via the stack pointer, is usually necessary since the offsets from the stack top to values such as the return address would not be known at compile time.</p>
<p>In many systems a stack frame has a field to contain the previous value of the frame pointer register, the value it had while the caller was executing. For example, in the diagram above, the stack frame of <code>DrawLine</code> would have a memory location holding the frame pointer value that <code>DrawSquare</code> uses. The value is saved upon entry to the subroutine and restored for the return. Having such a field in a known location in the stack frame allows code to access each frame successively underneath the currently executing routine's frame.</p>
<p>Programming languages that support <a href="/wiki/Nested_function" title="Nested function">nested subroutines</a> have a field in the call frame that points to the call frame of the outer routine that invoked the inner (nested) routine. This is sometimes called a <b>display</b><sup id="cite_ref-0" class="reference"><a href="#cite_note-0" title=""><span>[</span>1<span>]</span></a></sup>. This pointer provides the inner routine (as well as any other inner routines it may invoke) access to the parameters and local variables of the outer invoking routine. A few computers, such as the <a href="/wiki/Burroughs_large_systems" title="Burroughs large systems">Burroughs large systems</a>, have special "display registers" to support such nested functions.</p>
<p>For some purposes, the stack frame of a subroutine and that of its caller can be considered to overlap, the overlap consisting of the area where the parameters are passed from the caller to the callee. In some environments, the caller pushes each argument onto the stack, thus extending its stack frame, then invokes the callee. In other environments, the caller has a preallocated area at the top of its stack frame to hold the arguments it supplies to other subroutines it calls. This area is sometimes termed the <b>outgoing arguments area</b> or <b>callout area</b>. Under this approach, the size of the area is calculated by the compiler to be the largest needed by any called subroutine.</p>
<p><a name="Use" id="Use"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=3" title="Edit section: Use">edit</a>]</span> <span class="mw-headline">Use</span></h2>
<p><a name="Call_site_processing" id="Call_site_processing"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=4" title="Edit section: Call site processing">edit</a>]</span> <span class="mw-headline">Call site processing</span></h3>
<p>Usually the call stack manipulation needed at the site of a call to a subroutine is minimal (which is good since there can be many call sites for each subroutine to be called). The values for the actual arguments are evaluated at the call site, since they are specific to the particular call, and either pushed onto the stack or placed into registers, as determined by the <a href="/wiki/Calling_convention" title="Calling convention">calling convention</a> being used. The actual call instruction, such as "Branch and Link," is then typically executed to transfer control to the code of the target subroutine.</p>
<p><a name="Callee_processing" id="Callee_processing"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=5" title="Edit section: Callee processing">edit</a>]</span> <span class="mw-headline">Callee processing</span></h3>
<p>In the called subroutine, the first code executed is usually termed the <a href="/wiki/Function_prologue" title="Function prologue">subroutine prologue</a>, since it does the necessary housekeeping before the code for the statements of the routine is begun.</p>
<p>The prologue will commonly save the return address left in a register by the call instruction by pushing the value onto the call stack. Similarly, the current stack pointer and/or frame pointer values may be pushed. Alternatively, some instruction set architectures automatically provide comparable functionality as part of the action of the call instruction itself, and in such an environment the prologue need not do this.</p>
<p>If frame pointers are being used, the prologue will typically set the new value of the frame pointer register from the stack pointer. Space on the stack for local variables can then be allocated by incrementally changing the stack pointer.</p>
<p>The <a href="/wiki/Forth_(programming_language)" title="Forth (programming language)">Forth programming language</a> allows explicit winding of the call stack (called there the "return stack"). The <a href="/wiki/Scheme_(programming_language)" title="Scheme (programming language)">Scheme programming language</a> allows the winding of special frames on the stack through a "<a href="/w/index.php?title=Dynamic_wind&amp;action=edit&amp;redlink=1" class="new" title="Dynamic wind (page does not exist)">dynamic wind</a>".</p>
<p><a name="Return_processing" id="Return_processing"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=6" title="Edit section: Return processing">edit</a>]</span> <span class="mw-headline">Return processing</span></h3>
<p>When a subroutine is ready to return, it executes an epilogue that undoes the steps of the prologue. This will typically restore saved register values (such as the frame pointer value) from the stack frame, pop the entire stack frame off the stack by changing the stack pointer value, and finally branch to the instruction at the return address. Under many calling conventions the items popped off the stack by the epilogue include the original argument values, in which case there usually are no further stack manipulations that need to be done by the caller. With some calling conventions, however, it is the caller's responsibility to remove the arguments from the stack after the return.</p>
<p><a name="Unwinding" id="Unwinding"></a></p>
<h3><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=7" title="Edit section: Unwinding">edit</a>]</span> <span class="mw-headline">Unwinding</span></h3>
<p>Returning from the called function will pop the top frame off of the stack, perhaps leaving a return value.</p>
<p>Some languages (such as <a href="/wiki/Pascal_programming_language" title="Pascal programming language" class="mw-redirect">Pascal</a>) allow a global <a href="/wiki/GOTO" title="GOTO" class="mw-redirect">goto</a> statement to transfer control out of a nested function and into a previously invoked outer function. This operation requires the stack to be unwound, removing as many stack frames as necessary to restore the proper context to transfer control to the target statement within the enclosing outer function. Such transfers of control are generally used only for error handling.</p>
<p>Other languages (such as <a href="/wiki/Object_Pascal" title="Object Pascal">Object Pascal</a>) provide <a href="/wiki/Exception_handling" title="Exception handling">exception handling</a>, which also requires unwinding of the stack. The stack frame of a function contains one or more entries specifying exception handlers. When an exception is thrown, the stack is unwound until an exception handler is found that is prepared to handle (catch) the exception. <a href="/wiki/Common_Lisp" title="Common Lisp">Common Lisp</a> allows control of what happens when the stack is unwound by using the <code>unwind-protect</code> special operator.</p>
<p>When applying a <a href="/wiki/Continuation" title="Continuation">continuation</a>, the stack is unwound and then rewound with the stack of the continuation. This is not the only way to implement continuations; for example, using multiple, explicit stacks, application of a continuation can simply activate its stack and wind a value to be passed.</p>
<p><a name="Call_Stacks_and_Software_Testing" id="Call_Stacks_and_Software_Testing"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=8" title="Edit section: Call Stacks and Software Testing">edit</a>]</span> <span class="mw-headline">Call Stacks and Software Testing</span></h2>
<p>A recently reported technique <sup id="cite_ref-1" class="reference"><a href="#cite_note-1" title=""><span>[</span>2<span>]</span></a></sup> uses call stacks in a very different way than others discussed on this page. It uses call stacks for <a href="/w/index.php?title=Test_suite_reduction&amp;action=edit&amp;redlink=1" class="new" title="Test suite reduction (page does not exist)">test suite reduction</a>. Briefly, Test suite reduction seeks to reduce the number of test cases in a test suite while retaining a high percentage of the original suite’s fault detection effectiveness. Two test cases are considered to be equivalent if they generate the same set of call stacks during execution. See <sup id="cite_ref-2" class="reference"><a href="#cite_note-2" title=""><span>[</span>3<span>]</span></a></sup>for more details.</p>
<p><a name="Performance_analysis" id="Performance_analysis"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=9" title="Edit section: Performance analysis">edit</a>]</span> <span class="mw-headline">Performance analysis</span></h2>
<p>Taking random-time samples of the call stack can be very useful in optimizing performance of programs. The reason is if a subroutine call instruction appears on the call stack for a certain fraction of execution time, its possible removal would save that much time. See <a href="/wiki/Performance_analysis" title="Performance analysis" class="mw-redirect">Performance analysis</a> and <a href="/wiki/Deep_sampling" title="Deep sampling">Deep sampling</a>.</p>
<p><a name="Security" id="Security"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=10" title="Edit section: Security">edit</a>]</span> <span class="mw-headline">Security</span></h2>
<p>The mixing of control flow data affecting the execution of code (return addresses, saved frame pointers) and simple program data (parameters, return values) in a call stack is a security risk, possibly <a href="/wiki/Exploit_(computer_security)" title="Exploit (computer security)">exploitable</a> through <a href="/wiki/Buffer_overflow" title="Buffer overflow">buffer overflows</a> (in which article the risk and exploitation are explained).</p>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=11" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="/wiki/Dynamic_memory_allocation" title="Dynamic memory allocation">Dynamic memory allocation</a></li>
<li><a href="/wiki/Automatic_memory_allocation" title="Automatic memory allocation" class="mw-redirect">Automatic memory allocation</a></li>
<li><a href="/wiki/Calling_convention" title="Calling convention">Calling convention</a></li>
<li><a href="/wiki/Stack_buffer_overflow" title="Stack buffer overflow">Stack buffer overflow</a></li>
</ul>
<p><a name="References" id="References"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=12" title="Edit section: References">edit</a>]</span> <span class="mw-headline">References</span></h2>
<ol class="references">
<li id="cite_note-0"><b><a href="#cite_ref-0" title="">^</a></b> <a href="http://c2.com/cgi/wiki?AlternativeMicroprocessorDesign" class="extiw" title="wiki:AlternativeMicroprocessorDesign">wiki:AlternativeMicroprocessorDesign</a></li>
<li id="cite_note-1"><b><a href="#cite_ref-1" title="">^</a></b> “Call Stack Coverage for GUI Test-Suite Reduction” by Scott McMaster and Atif M. Memon. In Proceedings of the 17th IEEE International Symposium on Software Reliability Engineering (ISSRE 2006), Nov. 2006.</li>
<li id="cite_note-2"><b><a href="#cite_ref-2" title="">^</a></b> “Call-Stack Coverage for GUI Test-Suite Reduction” by Scott McMaster and Atif M. Memon. IEEE Trans. Softw. Eng., 2008, IEEE Press.</li>
</ol>
<p><a name="External_links" id="External_links"></a></p>
<h2><span class="editsection">[<a href="/w/index.php?title=Call_stack&amp;action=edit&amp;section=13" title="Edit section: External links">edit</a>]</span> <span class="mw-headline">External links</span></h2>
<ul>
<li><a href="http://msdn2.microsoft.com/en-us/library/ms794596.aspx" class="external text" title="http://msdn2.microsoft.com/en-us/library/ms794596.aspx" rel="nofollow">Stack Frame Allocation</a> on MSDN</li>
<li><a href="http://www.eventhelix.com/RealtimeMantra/Basics/CToAssemblyTranslation.htm" class="external text" title="http://www.eventhelix.com/RealtimeMantra/Basics/CToAssemblyTranslation.htm" rel="nofollow">Function Calling and Frame Pointer Operations in 68000</a></li>
</ul>


<!-- 
NewPP limit report
Preprocessor node count: 54/1000000
Post-expand include size: 0/2048000 bytes
Template argument size: 0/2048000 bytes
Expensive parser function count: 0/500
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:1718105-0!1!0!default!!en!2 and timestamp 20090408172413 -->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org/wiki/Call_stack">http://en.wikipedia.org/wiki/Call_stack</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/Category:Control_flow" title="Category:Control flow">Control flow</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Call_stack" title="View the content page [c]" accesskey="c">Article</a></li>
				 <li id="ca-talk"><a href="/wiki/Talk:Call_stack" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=Call_stack&amp;action=edit" title="You can edit this page. &#10;Please use the preview button before saving. [e]" accesskey="e">Edit this page</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=Call_stack&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Call_stack" title="You are encouraged to log in; however, it is not mandatory. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li>
				<li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content — the best of Wikipedia">Featured content</a></li>
				<li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/w/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Wikipedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if one exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search Wikipedia for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-interaction'>
		<h5>Interaction</h5>
		<div class='pBody'>
			<ul>
				<li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li>
				<li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-contact"><a href="/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Donate" title="Support us">Donate to Wikipedia</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Call_stack" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Call_stack" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Wikipedia:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=Call_stack&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=Call_stack&amp;oldid=279620111" title="Permanent link to this version of the page">Permanent link</a></li><li id="t-cite"><a href="/w/index.php?title=Special:Cite&amp;page=Call_stack&amp;id=279620111">Cite this page</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>Languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-es"><a href="http://es.wikipedia.org/wiki/Pila_(estructura_de_datos)#Pila_de_llamadas">Español</a></li>
				<li class="interwiki-is"><a href="http://is.wikipedia.org/wiki/Kallhla%C3%B0i">Íslenska</a></li>
				<li class="interwiki-it"><a href="http://it.wikipedia.org/wiki/Call_stack">Italiano</a></li>
				<li class="interwiki-ja"><a href="http://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%BC%E3%83%AB%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF">日本語</a></li>
				<li class="interwiki-pt"><a href="http://pt.wikipedia.org/wiki/Pilha_de_chamada">Português</a></li>
				<li class="interwiki-ru"><a href="http://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B5%D0%BA_%D0%B2%D1%8B%D0%B7%D0%BE%D0%B2%D0%BE%D0%B2">Русский</a></li>
				<li class="interwiki-sv"><a href="http://sv.wikipedia.org/wiki/Stackpekare">Svenska</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 25 March 2009, at 17:21 (UTC).</li>
					<li id="copyright">All text is available under the terms of the <a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="http://en.wikipedia.org/wiki/Wikipedia:Copyrights" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc.</a>, a U.S. registered <a class='internal' href="http://en.wikipedia.org/wiki/501%28c%29#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="http://en.wikipedia.org/wiki/Non-profit_organization" title="Non-profit organization">nonprofit</a> <a href="http://en.wikipedia.org/wiki/Charitable_organization" title="Charitable organization">charity</a>.<br /></li>
					<li id="privacy"><a href="http://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
					<li id="disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served by srv108 in 0.057 secs. --></body></html>
